!function(a,b,c,d,e){"use strict";function f(a){var b="bez_"+d.makeArray(arguments).join("_").replace(".","p");if("function"!=typeof d.easing[b]){var c=function(a,b){var c=[null,null],d=[null,null],e=[null,null],f=function(f,g){return e[g]=3*a[g],d[g]=3*(b[g]-a[g])-e[g],c[g]=1-e[g]-d[g],f*(e[g]+f*(d[g]+f*c[g]))},g=function(a){return e[0]+a*(2*d[0]+3*c[0]*a)},h=function(a){for(var b,c=a,d=0;++d<14&&(b=f(c,0)-a,!(Math.abs(b)<.001));)c-=b/g(c);return c};return function(a){return f(h(a),1)}};d.easing[b]=function(b,d,e,f,g){return f*c([a[0],a[1]],[a[2],a[3]])(d/g)+e}}return b}function g(){}function h(a,b,c){return Math.max(isNaN(b)?-1/0:b,Math.min(isNaN(c)?1/0:c,a))}function i(a){return a.match(/ma/)&&a.match(/-?\d+(?!d)/g)[a.match(/3d/)?12:4]}function j(a){return Ac?+i(a.css("transform")):+a.css("left").replace("px","")}function k(a,b){var c={};return Ac?c.transform="translate3d("+(a+(b?.001:0))+"px,0,0)":c.left=a,c}function l(a){return{"transition-duration":a+"ms"}}function m(a,b){return+String(a).replace(b||"px","")||e}function n(a){return/%$/.test(a)&&m(a,"%")}function o(a){return(!!m(a)||!!m(a,"%"))&&a}function p(a,b,c,d){return(a-(d||0))*(b+(c||0))}function q(a,b,c,d){return-Math.round(a/(b+(c||0))-(d||0))}function r(a){var b=a.data();if(!b.tEnd){var c=a[0],d={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",msTransition:"MSTransitionEnd",transition:"transitionend"};c.addEventListener(d[jc.prefixed("transition")],function(a){b.tProp&&a.propertyName.match(b.tProp)&&b.onEndFn()},!1),b.tEnd=!0}}function s(a,b,c,d){var e,f=a.data();f&&(f.onEndFn=function(){e||(e=!0,clearTimeout(f.tT),c())},f.tProp=b,clearTimeout(f.tT),f.tT=setTimeout(function(){f.onEndFn()},1.5*d),r(a))}function t(a,b,c){if(a.length){var d=a.data();Ac?(a.css(l(0)),d.onEndFn=g,clearTimeout(d.tT)):a.stop();var e=u(b,function(){return j(a)});return a.css(k(e,c)),e}}function u(){for(var a,b=0,c=arguments.length;c>b&&(a=b?arguments[b]():arguments[b],"number"!=typeof a);b++);return a}function v(a,b){return Math.round(a+(b-a)/1.5)}function w(){return w.p=w.p||("https://"===c.protocol?"https://":"http://"),w.p}function x(a){var c=b.createElement("a");return c.href=a,c}function y(a,b){if("string"!=typeof a)return a;a=x(a);var c,d;if(a.host.match(/youtube\.com/)&&a.search){if(c=a.search.split("v=")[1]){var e=c.indexOf("&");-1!==e&&(c=c.substring(0,e)),d="youtube"}}else a.host.match(/youtube\.com|youtu\.be/)?(c=a.pathname.replace(/^\/(embed\/|v\/)?/,"").replace(/\/.*/,""),d="youtube"):a.host.match(/vimeo\.com/)&&(d="vimeo",c=a.pathname.replace(/^\/(video\/)?/,"").replace(/\/.*/,""));return c&&d||!b||(c=a.href,d="custom"),c?{id:c,type:d,s:a.search.replace(/^\?/,"")}:!1}function z(a,b,c){var e,f,g=a.video;return"youtube"===g.type?(f=w()+"img.youtube.com/vi/"+g.id+"/default.jpg",e=f.replace(/\/default.jpg$/,"/hqdefault.jpg"),a.thumbsReady=!0):"vimeo"===g.type?d.ajax({url:w()+"vimeo.com/api/v2/video/"+g.id+".json",dataType:"jsonp",success:function(d){a.thumbsReady=!0,A(b,{img:d[0].thumbnail_large,thumb:d[0].thumbnail_small},a.i,c)}}):a.thumbsReady=!0,{img:e,thumb:f}}function A(a,b,c,e){for(var f=0,g=a.length;g>f;f++){var h=a[f];if(h.i===c&&h.thumbsReady){var i={videoReady:!0};i[Qc]=i[Sc]=i[Rc]=!1,e.splice(f,1,d.extend({},h,i,b));break}}}function B(a){function b(a,b,e){var f=a.children("img").eq(0),g=a.attr("href"),h=a.attr("src"),i=f.attr("src"),j=b.video,k=e?y(g,j===!0):!1;k?g=!1:k=j,c(a,f,d.extend(b,{video:k,img:b.img||g||h||i,thumb:b.thumb||i||h||g}))}function c(a,b,c){var e=c.thumb&&c.img!==c.thumb,f=m(c.width||a.attr("width")),g=m(c.height||a.attr("height"));d.extend(c,{width:f,height:g,thumbratio:Q(c.thumbratio||m(c.thumbwidth||b&&b.attr("width")||e||f)/m(c.thumbheight||b&&b.attr("height")||e||g))})}var e=[];return a.children().each(function(){var a=d(this),f=P(d.extend(a.data(),{id:a.attr("id")}));if(a.is("a, img"))b(a,f,!0);else{if(a.is(":empty"))return;c(a,null,d.extend(f,{html:this,_html:a.html()}))}e.push(f)}),e}function C(a){return 0===a.offsetWidth&&0===a.offsetHeight}function D(a){return!d.contains(b.documentElement,a)}function E(a,b,c){a()?b():setTimeout(function(){E(a,b)},c||100)}function F(a){c.replace(c.protocol+"//"+c.host+c.pathname.replace(/^\/?/,"/")+c.search+"#"+a)}function G(a,b,c){var d=a.data(),e=d.measures;if(e&&(!d.l||d.l.W!==e.width||d.l.H!==e.height||d.l.r!==e.ratio||d.l.w!==b.w||d.l.h!==b.h||d.l.m!==c)){var f=e.width,g=e.height,i=b.w/b.h,j=e.ratio>=i,k="scaledown"===c,l="contain"===c,m="cover"===c;j&&(k||l)||!j&&m?(f=h(b.w,0,k?f:1/0),g=f/e.ratio):(j&&m||!j&&(k||l))&&(g=h(b.h,0,k?g:1/0),f=g*e.ratio),a.css({width:Math.ceil(f),height:Math.ceil(g),marginLeft:Math.floor(-f/2),marginTop:Math.floor(-g/2)}),d.l={W:e.width,H:e.height,r:e.ratio,w:b.w,h:b.h,m:c}}return!0}function H(a,b){var c=a[0];c.styleSheet?c.styleSheet.cssText=b:a.html(b)}function I(a,b,c){return b===c?!1:b>=a?"left":a>=c?"right":"left right"}function J(a,b,c,d){if(!c)return!1;if(!isNaN(a))return a-(d?0:1);for(var e,f=0,g=b.length;g>f;f++){var h=b[f];if(h.id===a){e=f;break}}return e}function K(a,b,c){c=c||{},a.each(function(){var a,e=d(this),f=e.data();f.clickOn||(f.clickOn=!0,d.extend(W(e,{onStart:function(b){a=b,(c.onStart||g).call(this,b)},onMove:c.onMove||g,onEnd:function(d){d.moved||c.tail.checked||b.call(this,a)}}),c.tail))})}function L(a,b){return'<div class="'+a+'">'+(b||"")+"</div>"}function M(a){for(var b=a.length;b;){var c=Math.floor(Math.random()*b--),d=a[b];a[b]=a[c],a[c]=d}return a}function N(a){return"[object Array]"==Object.prototype.toString.call(a)&&d.map(a,function(a){return d.extend({},a)})}function O(a,b){wc.scrollLeft(a).scrollTop(b)}function P(a){if(a){var b={};return d.each(a,function(a,c){b[a.toLowerCase()]=c}),b}}function Q(a){if(a){var b=+a;return isNaN(b)?(b=a.split("index.html"),+b[0]/+b[1]||e):b}}function R(a,b){a.preventDefault(),b&&a.stopPropagation()}function S(a){return a?">":"<"}function T(a,b){var c=Math.round(b.pos),e=b.onEnd||g;"undefined"!=typeof b.overPos&&b.overPos!==b.pos&&(c=b.overPos,e=function(){T(a,d.extend({},b,{overPos:b.pos,time:Math.max(Jc,b.time/2)}))});var f=d.extend(k(c,b._001),b.width&&{width:b.width});Ac?(a.css(d.extend(l(b.time),f)),b.time>10?s(a,"transform",e,b.time):e()):a.stop().animate(f,b.time,Tc,e)}function U(a,b,c,e,f,h){var i="undefined"!=typeof h;if(i||(f.push(arguments),Array.prototype.push.call(arguments,f.length),!(f.length>1))){a=a||d(a),b=b||d(b);var j=a[0],k=b[0],l="crossfade"===e.method,m=function(){if(!m.done){m.done=!0;var a=(i||f.shift())&&f.shift();a&&U.apply(this,a),(e.onEnd||g)(!!a)}},n=e.time/(h||1);c.not(a.addClass(Hb).removeClass(Gb)).not(b.addClass(Gb).removeClass(Hb)).removeClass(Hb+" "+Gb),a.stop(),b.stop(),l&&k&&a.fadeTo(0,0),a.fadeTo(l?n:1,1,l&&m),b.fadeTo(n,0,m),j&&l||k||m()}}function V(a){var b=(a.touches||[])[0]||a;a._x=b.pageX,a._y=b.clientY}function W(c,e){function f(a){return n=d(a.target),t.checked=q=r=!1,l||t.flow||a.touches&&a.touches.length>1||a.which>1||sc&&sc.type!==a.type&&uc||(q=e.select&&n.is(e.select,s))?q:(p="touchstart"===a.type,r=n.is("a, a *",s),V(a),m=sc=a,tc=a.type.replace(/down|start/,"move").replace(/Down/,"Move"),o=t.control,(e.onStart||g).call(s,a,{control:o,$target:n}),l=t.flow=!0,(!p||t.go)&&R(a),void 0)}function h(a){if(a.touches&&a.touches.length>1||Gc&&!a.isPrimary||tc!==a.type||!l)return l&&i(),void 0;V(a);var b=Math.abs(a._x-m._x),c=Math.abs(a._y-m._y),d=b-c,f=(t.go||t.x||d>=0)&&!t.noSwipe,h=0>d;p&&!t.checked?(l=f)&&R(a):(R(a),(e.onMove||g).call(s,a,{touch:p})),t.checked=t.checked||f||h}function i(a){var b=l;t.control=l=!1,b&&(t.flow=!1),!b||r&&!t.checked||(a&&R(a),uc=!0,clearTimeout(vc),vc=setTimeout(function(){uc=!1},1e3),(e.onEnd||g).call(s,{moved:t.checked,$target:n,control:o,touch:p,startEvent:m,aborted:!a||"MSPointerCancel"===a.type}))}function j(){t.flow||setTimeout(function(){t.flow=!0},10)}function k(){t.flow&&setTimeout(function(){t.flow=!1},Ic)}var l,m,n,o,p,q,r,s=c[0],t={};return Gc?(s[Fc]("MSPointerDown",f,!1),b[Fc]("MSPointerMove",h,!1),b[Fc]("MSPointerCancel",i,!1),b[Fc]("MSPointerUp",i,!1)):(s[Fc]&&(s[Fc]("touchstart",f,!1),s[Fc]("touchmove",h,!1),s[Fc]("touchend",i,!1),b[Fc]("touchstart",j,!1),b[Fc]("touchend",k,!1),b[Fc]("touchcancel",k,!1),a[Fc]("scroll",k,!1)),c.on("mousedown",f),xc.on("mousemove",h).on("mouseup",i)),c.on("click","a",function(a){t.checked&&R(a)}),t}function X(a,b){function c(c){j=l=c._x,q=d.now(),p=[[q,j]],m=n=C.noMove?0:t(a,(b.getPos||g)(),b._001),(b.onStart||g).call(A,c)}function e(a,b){s=B.min,u=B.max,w=B.snap,x=a.altKey,z=!1,y=b.control,y||c(a)}function f(e,f){y&&(y=!1,c(e)),C.noSwipe||(l=e._x,p.push([d.now(),l]),n=m-(j-l),o=I(n,s,u),s>=n?n=v(n,s):n>=u&&(n=v(n,u)),C.noMove||(a.css(k(n,b._001)),z||(z=!0,f.touch||Gc||a.addClass(Wb)),(b.onMove||g).call(A,e,{pos:n,edge:o})))}function i(c){if(!y){c.touch||Gc||a.removeClass(Wb),r=(new Date).getTime();for(var e,f,i,j,k,o,q,t,v,z=r-Ic,B=null,C=Jc,D=b.friction,E=p.length-1;E>=0;E--){if(e=p[E][0],f=Math.abs(e-z),null===B||i>f)B=e,j=p[E][1];else if(B===z||f>i)break;i=f}q=h(n,s,u);var F=j-l,G=F>=0,H=r-B,I=H>Ic,J=!I&&n!==m&&q===n;w&&(q=h(Math[J?G?"floor":"ceil":"round"](n/w)*w,s,u),s=u=q),J&&(w||q===n)&&(v=-(F/H),C*=h(Math.abs(v),b.timeLow,b.timeHigh),k=Math.round(n+v*C/D),w||(q=k),(!G&&k>u||G&&s>k)&&(o=G?s:u,t=k-o,w||(q=o),t=h(q+.03*t,o-50,o+50),C=Math.abs((n-t)/(v/D)))),C*=x?10:1,(b.onEnd||g).call(A,d.extend(c,{pos:n,newPos:q,overPos:t,time:C,moved:I?w:Math.abs(n-m)>(w?0:3)}))}}var j,l,m,n,o,p,q,r,s,u,w,x,y,z,A=a[0],B=a.data(),C={};return C=d.extend(W(b.$wrap,{onStart:e,onMove:f,onEnd:i,select:b.select,control:b.control}),C)}function Y(a,b){var c,e,f,h=a[0],i={prevent:{}};return h[Fc]&&h[Fc](Hc,function(a){var h=a.wheelDeltaY||-1*a.deltaY||0,j=a.wheelDeltaX||-1*a.deltaX||0,k=Math.abs(j)>Math.abs(h),l=S(0>j),m=e===l,n=d.now(),o=Ic>n-f;e=l,f=n,k&&i.ok&&(!i.prevent[l]||c)&&(R(a,!0),c&&m&&o||(b.shift&&(c=!0,clearTimeout(i.t),i.t=setTimeout(function(){c=!1},Kc)),(b.onEnd||g)(a,b.shift?l:j)))},!1),i}function Z(){d.each(d.Fotorama.instances,function(a,b){b.index=a})}function $(a){d.Fotorama.instances.push(a),Z()}function _(a){d.Fotorama.instances.splice(a.index,1),Z()}var ab="fotorama",bb="fullscreen",cb=ab+"__wrap",db=cb+"--css2",eb=cb+"--css3",fb=cb+"--video",gb=cb+"--fade",hb=cb+"--slide",ib=cb+"--no-controls",jb=cb+"--no-shadows",kb=cb+"--pan-y",lb=cb+"--rtl",mb=ab+"__stage",nb=mb+"__frame",ob=nb+"--video",pb=mb+"__shaft",qb=mb+"--only-active",rb=ab+"__grab",sb=ab+"__pointer",tb=ab+"__arr",ub=tb+"--disabled",vb=tb+"--prev",wb=tb+"--next",xb=ab+"__nav",yb=xb+"-wrap",zb=xb+"__shaft",Ab=xb+"--dots",Bb=xb+"--thumbs",Cb=xb+"__frame",Db=Cb+"--dot",Eb=Cb+"--thumb",Fb=ab+"__fade",Gb=Fb+"-front",Hb=Fb+"-rear",Ib=ab+"__shadow",Jb=Ib+"s",Kb=Jb+"--left",Lb=Jb+"--right",Mb=ab+"__active",Nb=ab+"__select",Ob=ab+"--hidden",Pb=ab+"--fullscreen",Qb=ab+"__fullscreen-icon",Rb=ab+"__error",Sb=ab+"__loading",Tb=ab+"__loaded",Ub=Tb+"--full",Vb=Tb+"--img",Wb=ab+"__grabbing",Xb=ab+"__img",Yb=Xb+"--full",Zb=ab+"__dot",$b=ab+"__thumb",_b=$b+"-border",ac=ab+"__html",bc=ab+"__video",cc=bc+"-play",dc=bc+"-close",ec=ab+"__caption",fc=ab+"__caption__wrap",gc=ab+"__spinner",hc=d&&d.fn.jquery.split(".");if(!hc||hc[0]<1||1==hc[0]&&hc[1]<8)throw"Fotorama requires jQuery 1.8 or later and will not run without it.";var ic={},jc=function(a,b,c){function d(a){r.cssText=a}function e(a,b){return typeof a===b}function f(a,b){return!!~(""+a).indexOf(b)}function g(a,b){for(var d in a){var e=a[d];if(!f(e,"-")&&r[e]!==c)return"pfx"==b?e:!0}return!1}function h(a,b,d){for(var f in a){var g=b[a[f]];if(g!==c)return d===!1?a[f]:e(g,"function")?g.bind(d||b):g}return!1}function i(a,b,c){var d=a.charAt(0).toUpperCase()+a.slice(1),f=(a+" "+u.join(d+" ")+d).split(" ");return e(b,"string")||e(b,"undefined")?g(f,b):(f=(a+" "+v.join(d+" ")+d).split(" "),h(f,b,c))}var j,k,l,m="2.6.2",n={},o=b.documentElement,p="modernizr",q=b.createElement(p),r=q.style,s=({}.toString," -webkit- -moz- -o- -ms- ".split(" ")),t="Webkit Moz O ms",u=t.split(" "),v=t.toLowerCase().split(" "),w={},x=[],y=x.slice,z=function(a,c,d,e){var f,g,h,i,j=b.createElement("div"),k=b.body,l=k||b.createElement("body");if(parseInt(d,10))for(;d--;)h=b.createElement("div"),h.id=e?e[d]:p+(d+1),j.appendChild(h);return f=["&#173;",'<style id="s',p,'">',a,"</style>"].join(""),j.id=p,(k?j:l).innerHTML+=f,l.appendChild(j),k||(l.style.background="",l.style.overflow="hidden",i=o.style.overflow,o.style.overflow="hidden",o.appendChild(l)),g=c(j,a),k?j.parentNode.removeChild(j):(l.parentNode.removeChild(l),o.style.overflow=i),!!g},A={}.hasOwnProperty;l=e(A,"undefined")||e(A.call,"undefined")?function(a,b){return b in a&&e(a.constructor.prototype[b],"undefined")}:function(a,b){return A.call(a,b)},Function.prototype.bind||(Function.prototype.bind=function(a){var b=this;if("function"!=typeof b)throw new TypeError;var c=y.call(arguments,1),d=function(){if(this instanceof d){var e=function(){};e.prototype=b.prototype;var f=new e,g=b.apply(f,c.concat(y.call(arguments)));return Object(g)===g?g:f}return b.apply(a,c.concat(y.call(arguments)))};return d}),w.csstransforms3d=function(){var a=!!i("perspective");return a};for(var B in w)l(w,B)&&(k=B.toLowerCase(),n[k]=w[B](),x.push((n[k]?"":"no-")+k));return n.addTest=function(a,b){if("object"==typeof a)for(var d in a)l(a,d)&&n.addTest(d,a[d]);else{if(a=a.toLowerCase(),n[a]!==c)return n;b="function"==typeof b?b():b,"undefined"!=typeof enableClasses&&enableClasses&&(o.className+=" "+(b?"":"no-")+a),n[a]=b}return n},d(""),q=j=null,n._version=m,n._prefixes=s,n._domPrefixes=v,n._cssomPrefixes=u,n.testProp=function(a){return g([a])},n.testAllProps=i,n.testStyles=z,n.prefixed=function(a,b,c){return b?i(a,b,c):i(a,"pfx")},n}(a,b),kc={ok:!1,is:function(){return!1},request:function(){},cancel:function(){},event:"",prefix:""},lc="webkit moz o ms khtml".split(" ");if("undefined"!=typeof b.cancelFullScreen)kc.ok=!0;else for(var mc=0,nc=lc.length;nc>mc;mc++)if(kc.prefix=lc[mc],"undefined"!=typeof b[kc.prefix+"CancelFullScreen"]){kc.ok=!0;break}kc.ok&&(kc.event=kc.prefix+"fullscreenchange",kc.is=function(){switch(this.prefix){case"":return b.fullScreen;case"webkit":return b.webkitIsFullScreen;default:return b[this.prefix+"FullScreen"]}},kc.request=function(a){return""===this.prefix?a.requestFullScreen():a[this.prefix+"RequestFullScreen"]()},kc.cancel=function(){return""===this.prefix?b.cancelFullScreen():b[this.prefix+"CancelFullScreen"]()});var oc,pc={lines:12,length:5,width:2,radius:7,corners:1,rotate:15,color:"rgba(128, 128, 128, .75)",hwaccel:!0};!function(a,b){oc=b()}(this,function(){function a(a,c){var d,e=b.createElement(a||"div");for(d in c)e[d]=c[d];return e}function c(a){for(var b=1,c=arguments.length;c>b;b++)a.appendChild(arguments[b]);return a}function d(a,b,c,d){var e=["opacity",b,~~(100*a),c,d].join("-"),f=.01+100*(c/d),g=Math.max(1-(1-a)/b*(100-f),a),h=m.substring(0,m.indexOf("Animation")).toLowerCase(),i=h&&"-"+h+"-"||"";return o[e]||(p.insertRule("@"+i+"keyframes "+e+"{"+"0%{opacity:"+g+"}"+f+"%{opacity:"+a+"}"+(f+.01)+"%{opacity:1}"+(f+b)%100+"%{opacity:"+a+"}"+"100%{opacity:"+g+"}"+"}",p.cssRules.length),o[e]=1),e}function f(a,b){var c,d,f=a.style;for(b=b.charAt(0).toUpperCase()+b.slice(1),d=0;d<n.length;d++)if(c=n[d]+b,f[c]!==e)return c;return f[b]!==e?b:void 0}function g(a,b){for(var c in b)a.style[f(a,c)||c]=b[c];return a}function h(a){for(var b=1;b<arguments.length;b++){var c=arguments[b];for(var d in c)a[d]===e&&(a[d]=c[d])}return a}function i(a){for(var b={x:a.offsetLeft,y:a.offsetTop};a=a.offsetParent;)b.x+=a.offsetLeft,b.y+=a.offsetTop;return b}function j(a,b){return"string"==typeof a?a:a[b%a.length]}function k(a){return"undefined"==typeof this?new k(a):(this.opts=h(a||{},k.defaults,q),void 0)}function l(){function b(b,c){return a("<"+b+' xmlns="urn:schemas-microsoft.com:vml" class="spin-vml">',c)}p.addRule(".spin-vml","behavior:url(#default#VML)"),k.prototype.lines=function(a,d){function e(){return g(b("group",{coordsize:k+" "+k,coordorigin:-i+" "+-i}),{width:k,height:k})}function f(a,f,h){c(m,c(g(e(),{rotation:360/d.lines*a+"deg",left:~~f}),c(g(b("roundrect",{arcsize:d.corners}),{width:i,height:d.width,left:d.radius,top:-d.width>>1,filter:h}),b("fill",{color:j(d.color,a),opacity:d.opacity}),b("stroke",{opacity:0}))))}var h,i=d.length+d.width,k=2*i,l=2*-(d.width+d.length)+"px",m=g(e(),{position:"absolute",top:l,left:l});if(d.shadow)for(h=1;h<=d.lines;h++)f(h,-2,"progid:DXImageTransform.Microsoft.Blur(pixelradius=2,makeshadow=1,shadowopacity=.3)");for(h=1;h<=d.lines;h++)f(h);return c(a,m)},k.prototype.opacity=function(a,b,c,d){var e=a.firstChild;d=d.shadow&&d.lines||0,e&&b+d<e.childNodes.length&&(e=e.childNodes[b+d],e=e&&e.firstChild,e=e&&e.firstChild,e&&(e.opacity=c))}}var m,n=["webkit","Moz","ms","O"],o={},p=function(){var d=a("style",{type:"text/css"});return c(b.getElementsByTagName("head")[0],d),d.sheet||d.styleSheet}(),q={lines:12,length:7,width:5,radius:10,rotate:0,corners:1,color:"#000",direction:1,speed:1,trail:100,opacity:.25,fps:20,zIndex:2e9,className:"spinner",top:"auto",left:"auto",position:"relative"};k.defaults={},h(k.prototype,{spin:function(b){this.stop();var c,d,e=this,f=e.opts,h=e.el=g(a(0,{className:f.className}),{position:f.position,width:0,zIndex:f.zIndex}),j=f.radius+f.length+f.width;if(b&&(b.insertBefore(h,b.firstChild||null),d=i(b),c=i(h),g(h,{left:("auto"==f.left?d.x-c.x+(b.offsetWidth>>1):parseInt(f.left,10)+j)+"px",top:("auto"==f.top?d.y-c.y+(b.offsetHeight>>1):parseInt(f.top,10)+j)+"px"})),h.setAttribute("role","progressbar"),e.lines(h,e.opts),!m){var k,l=0,n=(f.lines-1)*(1-f.direction)/2,o=f.fps,p=o/f.speed,q=(1-f.opacity)/(p*f.trail/100),r=p/f.lines;!function s(){l++;for(var a=0;a<f.lines;a++)k=Math.max(1-(l+(f.lines-a)*r)%p*q,f.opacity),e.opacity(h,a*f.direction+n,k,f);e.timeout=e.el&&setTimeout(s,~~(1e3/o))}()}return e},stop:function(){var a=this.el;return a&&(clearTimeout(this.timeout),a.parentNode&&a.parentNode.removeChild(a),this.el=e),this},lines:function(b,e){function f(b,c){return g(a(),{position:"absolute",width:e.length+e.width+"px",height:e.width+"px",background:b,boxShadow:c,transformOrigin:"left",transform:"rotate("+~~(360/e.lines*i+e.rotate)+"deg) translate("+e.radius+"px"+",0)",borderRadius:(e.corners*e.width>>1)+"px"})}for(var h,i=0,k=(e.lines-1)*(1-e.direction)/2;i<e.lines;i++)h=g(a(),{position:"absolute",top:1+~(e.width/2)+"px",transform:e.hwaccel?"translate3d(0,0,0)":"",opacity:e.opacity,animation:m&&d(e.opacity,e.trail,k+i*e.direction,e.lines)+" "+1/e.speed+"s linear infinite"}),e.shadow&&c(h,g(f("#000","0 0 4px #000"),{top:"2px"})),c(b,c(h,f(j(e.color,i),"0 0 1px rgba(0,0,0,.1)")));return b},opacity:function(a,b,c){b<a.childNodes.length&&(a.childNodes[b].style.opacity=c)}});var r=g(a("group"),{behavior:"url(#default#VML)"});return!f(r,"transform")&&r.adj?l():m=f(r,"animation"),k});var qc,rc,sc,tc,uc,vc,wc=d(a),xc=d(b),yc="quirks"===c.hash.replace("#",""),zc=jc.csstransforms3d,Ac=zc&&!yc,Bc=zc||"CSS1Compat"===b.compatMode,Cc=kc.ok,Dc=navigator.userAgent.match(/Android|webOS|iPhone|iPad|iPod|BlackBerry|Windows Phone/i),Ec=!Ac||Dc,Fc="addEventListener",Gc=a.navigator.msPointerEnabled,Hc="onwheel"in b.createElement("div")?"wheel":b.onmousewheel!==e?"mousewheel":"DOMMouseScroll",Ic=250,Jc=300,Kc=1400,Lc=5e3,Mc=2,Nc=64,Oc=500,Pc=333,Qc="$stageFrame",Rc="$navDotFrame",Sc="$navThumbFrame",Tc=f([.1,0,.25,1]);jQuery.Fotorama=function(a,f){function i(){d.each(ld,function(a,b){if(!b.i){b.i=Yd++;var c=y(b.video,!0);if(c){var d={};b.video=c,b.img||b.thumb?b.thumbsReady=!0:d=z(b,ld,Ud),A(ld,{img:d.img,thumb:d.thumb},b.i,Ud)}}})}function j(a){var b="keydown."+ab,c="keydown."+ab+Vd,d="resize."+ab+Vd;a?(xc.on(c,function(a){pd&&27===a.keyCode?(R(a),cd(pd,!0,!0)):(Ud.fullScreen||f.keyboard&&!Ud.index)&&(27===a.keyCode?(R(a),Ud.cancelFullScreen()):39===a.keyCode||40===a.keyCode&&Ud.fullScreen?(R(a),Ud.show({index:">",slow:a.altKey,user:!0})):(37===a.keyCode||38===a.keyCode&&Ud.fullScreen)&&(R(a),Ud.show({index:"<",slow:a.altKey,user:!0})))}),Ud.index||xc.off(b).on(b,"textarea, input, select",function(a){!rc.hasClass(bb)&&a.stopPropagation()}),wc.on(d,Ud.resize)):(xc.off(c),wc.off(d))}function r(b){b!==r.f&&(b?(a.html("").addClass(ab+" "+Wd).append(ae).before($d).before(_d),$(Ud)):(ae.detach(),$d.detach(),_d.detach(),a.html(Zd.urtext).removeClass(Wd),_(Ud)),j(b),r.f=b)}function s(){ld=Ud.data=ld||N(f.data)||B(a),md=Ud.size=ld.length,!kd.ok&&f.shuffle&&M(ld),i(),ve=W(ve),md&&r(!0)}function v(){var a=2>md||pd;ye.noMove=a||Ed,ye.noSwipe=a||!f.swipe,ce.toggleClass(rb,!ye.noMove&&!ye.noSwipe),Gc&&ae.toggleClass(kb,!ye.noSwipe)}function w(a){a===!0&&(a=""),f.autoplay=Math.max(+a||Lc,1.5*Hd)}function x(a){return a?"add":"remove"}function C(){Ud.options=f=P(f),Ed="crossfade"===f.transition||"dissolve"===f.transition,yd=f.loop&&(md>2||Ed),Hd=+f.transitionduration||Jc,Jd="rtl"===f.direction;var a={add:[],remove:[]};md>1?(zd=f.nav,Bd="top"===f.navposition,a.remove.push(Nb),ge.toggle(f.arrows)):(zd=!1,ge.hide()),od=new oc(d.extend(pc,f.spinner)),zc(),Dc(),f.autoplay&&w(f.autoplay),Fd=m(f.thumbwidth)||Nc,Gd=m(f.thumbheight)||Nc,ze.ok=Be.ok=f.trackpad&&!Ec,v(),Wc(f,!0),Ad="thumbs"===zd,Ad?(mc(md,"navThumb"),nd=le,Td=Sc,H($d,d.Fotorama.jst.style({w:Fd,h:Gd,b:f.thumbborderwidth,m:f.thumbmargin,s:Vd,q:!Bc})),ie.addClass(Bb).removeClass(Ab)):"dots"===zd?(mc(md,"navDot"),nd=ke,Td=Rc,ie.addClass(Ab).removeClass(Bb)):(zd=!1,ie.removeClass(Bb+" "+Ab)),zd&&(Bd?he.insertBefore(be):he.insertAfter(be),uc.nav=!1,uc(nd,je,"nav")),Cd=f.allowfullscreen,Cd?(pe.appendTo(be),Dd=Cc&&"native"===Cd):(pe.detach(),Dd=!1),a[x(Ed)].push(gb),a[x(!Ed)].push(hb),a[x(Jd)].push(lb),Id=f.shadows&&!Ec,a[x(!Id)].push(jb),jc(),ae.addClass(a.add.join(" ")).removeClass(a.remove.join(" ")),we=d.extend({},f)}function V(a){return 0>a?(md+a%md)%md:a>=md?a%md:a}function W(a){return h(a,0,md-1)}function Z(a){return yd?V(a):W(a)}function Fb(a){return a>0||yd?a-1:!1}function Gb(a){return md-1>a||yd?a+1:!1}function Hb(){me.min=yd?-1/0:-p(md-1,xe.w,f.margin,sd),me.max=yd?1/0:-p(0,xe.w,f.margin,sd),me.snap=xe.w+f.margin}function Ib(){ne.min=Math.min(0,xe.W-je.width()),ne.max=0,je.toggleClass(rb,!(Ae.noMove=ne.min===ne.max))}function Wb(a,b,c){if("number"==typeof a){a=new Array(a);var e=!0}return d.each(a,function(a,d){if(e&&(d=a),"number"==typeof d){var f=ld[V(d)];if(f){var g="$"+b+"Frame",h=f[g];c.call(this,a,d,f,h,g,h&&h.data())}}})}function bc(a,b,c,d){(!Kd||"*"===Kd&&d===xd)&&(a=o(f.width)||o(a)||Oc,b=o(f.height)||o(b)||Pc,Ud.resize({width:a,ratio:f.ratio||c||a/b},0,d===xd?!0:"*"))}function hc(a,b,c,e,g){Wb(a,b,function(a,h,i,j,k,l){function m(a){var b=V(h);Xc(a,{index:b,src:v,frame:ld[b]})}function n(){s.remove(),d.Fotorama.cache[v]="error",i.html&&"stage"===b||!w||w===v?(!v||i.html||q?"stage"===b&&(j.trigger("f:load").removeClass(Sb+" "+Rb).addClass(Tb),m("load"),bc()):(j.trigger("f:error").removeClass(Sb).addClass(Rb),m("error")),l.state="error",!(md>1)||i.html||i.deleted||i.video||q||(i.deleted=!0,Ud.splice(h,1))):(i[u]=v=w,hc([h],b,c,e,!0))}function o(){d.Fotorama.measures[v]=t.measures=d.Fotorama.measures[v]||{width:r.width,height:r.height,ratio:r.width/r.height},bc(t.measures.width,t.measures.height,t.measures.ratio,h),s.off("load error").addClass(Xb+(q?" "+Yb:"")).prependTo(j),G(s,c||xe,e||i.fit||f.fit),d.Fotorama.cache[v]=l.state="loaded",setTimeout(function(){j.trigger("f:load").removeClass(Sb+" "+Rb).addClass(Tb+" "+(q?Ub:Vb)),"stage"===b&&m("load")},5)}function p(){var a=10;E(function(){return!Rd||!a--&&!Ec},function(){o()})}if(j){var q=Ud.fullScreen&&i.full&&i.full!==i.img&&!l.$full&&"stage"===b;if(!l.$img||g||q){var r=new Image,s=d(r),t=s.data();l[q?"$full":"$img"]=s;var u="stage"===b?q?"full":"img":"thumb",v=i[u],w=q?null:i["stage"===b?"thumb":"img"];if("navThumb"===b&&(j=l.$wrap),!v)return n(),void 0;d.Fotorama.cache[v]?!function x(){"error"===d.Fotorama.cache[v]?n():"loaded"===d.Fotorama.cache[v]?setTimeout(p,0):setTimeout(x,100)}():(d.Fotorama.cache[v]="*",s.on("load",p).on("error",n)),l.state="",r.src=v}}})}function ic(a){ue.append(od.spin().el).appendTo(a)}function jc(){ue.detach(),od.stop()}function lc(){var a=Ud.activeFrame[Qc];a&&!a.data().state&&(ic(a),a.on("f:load f:error",function(){a.off("f:load f:error"),jc()}))}function mc(a,b){Wb(a,b,function(a,c,e,g,h,i){g||(g=e[h]=ae[h].clone(),i=g.data(),i.data=e,"stage"===b?(e.html&&d('<div class="'+ac+'"></div>').append(e._html?d(e.html).removeAttr("id").html(e._html):e.html).appendTo(g),f.captions&&e.caption&&d(L(ec,L(fc,e.caption))).appendTo(g),e.video&&g.addClass(ob).append(re.clone()),de=de.add(g)):"navDot"===b?ke=ke.add(g):"navThumb"===b&&(i.$wrap=g.children(":first"),le=le.add(g),e.video&&g.append(re.clone())))})}function nc(a,b,c){return a&&a.length&&G(a,b,c)}function sc(a){Wb(a,"stage",function(a,b,c,e,g,h){if(e){De[Qc][V(b)]=e.css(d.extend({left:Ed?0:p(b,xe.w,f.margin,sd)},Ed&&l(0))),D(e[0])&&(e.appendTo(ce),cd(c.$video));var i=c.fit||f.fit;nc(h.$img,xe,i),nc(h.$full,xe,i)}})}function tc(a,b){if("thumbs"===zd&&!isNaN(a)){var c=-a,e=-a+xe.w;le.each(function(){var a=d(this),f=a.data(),g=f.eq,h={h:Gd},i="cover";h.w=f.w,f.l+f.w<c||f.l>e||nc(f.$img,h,i)||b&&hc([g],"navThumb",h,i)})}}function uc(a,b,c){if(!uc[c]){var e="nav"===c&&Ad,g=0;b.append(a.filter(function(){for(var a,b=d(this),c=b.data(),e=0,f=ld.length;f>e;e++)if(c.data===ld[e]){a=!0,c.eq=e;break}return a||b.remove()&&!1}).sort(function(a,b){return d(a).data().eq-d(b).data().eq}).each(function(){if(e){var a=d(this),b=a.data(),c=Math.round(Gd*b.data.thumbratio)||Fd;b.l=g,b.w=c,a.css({width:c}),g+=c+f.thumbmargin}})),uc[c]=!0}}function vc(a){return a-Ee>xe.w/3}function yc(a){return!(yd||ve+a&&ve-md+a||pd)}function zc(){ee.toggleClass(ub,yc(0)),fe.toggleClass(ub,yc(1))}function Dc(){ze.ok&&(ze.prevent={"<":yc(0),">":yc(1)})}function Fc(a){var b,c,d=a.data();return Ad?(b=d.l,c=d.w):(b=a.position().left,c=a.width()),{c:b+c/2,min:-b+10*f.thumbmargin,max:-b+xe.w-c-10*f.thumbmargin}}function Hc(a){var b=Ud.activeFrame[Td].data();T(oe,{time:.9*a,pos:b.l,width:b.w-2*f.thumbborderwidth})}function Kc(a){var b=ld[a.guessIndex][Td];if(b){var c=ne.min!==ne.max,d=c&&Fc(Ud.activeFrame[Td]),e=c&&(a.keep&&Kc.l?Kc.l:h((a.coo||xe.w/2)-Fc(b).c,d.min,d.max)),f=c&&h(e,ne.min,ne.max),g=.9*a.time;T(je,{time:g,pos:f||0,onEnd:function(){tc(f,!0)}}),bd(ie,I(f,ne.min,ne.max)),Kc.l=e}}function Mc(){Tc(Td),Ce[Td].push(Ud.activeFrame[Td].addClass(Mb))}function Tc(a){for(var b=Ce[a];b.length;)b.shift().removeClass(Mb)}function Uc(a){var b=De[a];d.each(rd,function(a,c){delete b[V(c)]}),d.each(b,function(a,c){delete b[a],c.detach()})}function Vc(a){sd=td=ve;var b=Ud.activeFrame,c=b[Qc];c&&(Tc(Qc),Ce[Qc].push(c.addClass(Mb)),a||Ud.show.onEnd(!0),t(ce,0,!0),Uc(Qc),sc(rd),Hb(),Ib())}function Wc(a,b){a&&d.extend(xe,{width:a.width||xe.width,height:a.height,minwidth:a.minwidth,maxwidth:a.maxwidth,minheight:a.minheight,maxheight:a.maxheight,ratio:Q(a.ratio)})&&!b&&d.extend(f,{width:xe.width,height:xe.height,minwidth:xe.minwidth,maxwidth:xe.maxwidth,minheight:xe.minheight,maxheight:xe.maxheight,ratio:xe.ratio})}function Xc(b,c,d){a.trigger(ab+":"+b,[Ud,c]),Ud.prevent[b]?delete Ud.prevent[b]:(d||g)()}function Yc(){clearTimeout(Zc.t),Rd=1,f.stopautoplayontouch?Ud.stopAutoplay():Od=!0}function Zc(){Zc.t=setTimeout(function(){Rd=0},Jc+Ic)}function $c(){Od=!(!pd&&!Pd)}function _c(){if(clearTimeout(_c.t),!f.autoplay||Od)return Ud.autoplay&&(Ud.autoplay=!1,Xc("stopautoplay")),void 0;Ud.autoplay||(Ud.autoplay=!0,Xc("startautoplay"));var a=ve,b=Ud.activeFrame[Qc].data();E(function(){return b.state||a!==ve},function(){_c.t=setTimeout(function(){Od||a!==ve||Ud.show(yd?S(!Jd):V(ve+(Jd?-1:1)))},f.autoplay)})}function ad(){Ud.fullScreen&&(Ud.fullScreen=!1,Cc&&kc.cancel(Xd),rc.removeClass(bb),qc.removeClass(bb),a.removeClass(Pb).insertAfter(_d),xe=d.extend({},Qd),cd(pd,!0,!0),gd("x",!1),Ud.resize(),hc(rd,"stage"),O(Md,Ld),Xc("fullscreenexit"))}function bd(a,b){Id&&(a.removeClass(Kb+" "+Lb),b&&!pd&&a.addClass(b.replace(/^|\s/g," "+Jb+"--")))}function cd(a,b,c){b&&(ae.removeClass(fb),pd=!1,v()),a&&a!==pd&&(a.remove(),Xc("unloadvideo")),c&&($c(),_c())}function dd(a){ae.toggleClass(ib,a)}function ed(a){if(!ye.flow){var b=a?a.pageX:ed.x,c=b&&!yc(vc(b))&&f.click;ed.p===c||!Ed&&f.swipe||!be.toggleClass(sb,c)||(ed.p=c,ed.x=b)}}function fd(a,b){var c=a.target,g=d(c);g.hasClass(cc)?Ud.playVideo():c===qe?Ud[(Ud.fullScreen?"cancel":"request")+"FullScreen"]():pd?c===te&&cd(pd,!0,!0):Xc("stagetap",e,function(){b?dd():f.click&&Ud.show({index:a.shiftKey||S(vc(a._x)),slow:a.altKey,user:!0})})}function gd(a,b){ye[a]=Ae[a]=b}function hd(a,b){var c=d(this).data().eq;Ud.show({index:c,slow:a.altKey,user:!0,coo:a._x-ie.offset().left,time:b})}function id(){if(s(),C(),!id.i){id.i=!0;var a=f.startindex;(a||f.hash&&c.hash)&&(xd=J(a||c.hash.replace(/^#/,""),ld,0===Ud.index||a,a)),ve=sd=td=ud=xd=Z(xd)||0}if(md){if(jd())return;pd&&cd(pd,!0),rd=[],Uc(Qc),Ud.show({index:ve,time:0}),Ud.resize()}else Ud.destroy()}function jd(){return!jd.f===Jd?(jd.f=Jd,ve=md-1-ve,Ud.reverse(),!0):void 0}function kd(){kd.ok||(kd.ok=!0,Xc("ready"))}qc=qc||d("html"),rc=rc||d("body");var ld,md,nd,od,pd,qd,rd,sd,td,ud,vd,wd,xd,yd,zd,Ad,Bd,Cd,Dd,Ed,Fd,Gd,Hd,Id,Jd,Kd,Ld,Md,Nd,Od,Pd,Qd,Rd,Sd,Td,Ud=this,Vd=d.now(),Wd=ab+Vd,Xd=a[0],Yd=1,Zd=a.data(),$d=d("<style></style>"),_d=d(L(Ob)),ae=d(L(cb)),be=d(L(mb)).appendTo(ae),ce=(be[0],d(L(pb)).appendTo(be)),de=d(),ee=d(L(tb+" "+vb)),fe=d(L(tb+" "+wb)),ge=ee.add(fe).appendTo(be),he=d(L(yb)),ie=d(L(xb)).appendTo(he),je=d(L(zb)).appendTo(ie),ke=d(),le=d(),me=ce.data(),ne=je.data(),oe=d(L(_b)).appendTo(je),pe=d(L(Qb)),qe=pe[0],re=d(L(cc)),se=d(L(dc)).appendTo(be),te=se[0],ue=d(L(gc)),ve=!1,we={},xe={},ye={},ze={},Ae={},Be={},Ce={},De={},Ee=0,Fe=[];ae[Qc]=d(L(nb)),ae[Sc]=d(L(Cb+" "+Eb,L($b))),ae[Rc]=d(L(Cb+" "+Db,L(Zb))),Ce[Qc]=[],Ce[Sc]=[],Ce[Rc]=[],De[Qc]={},Ud.prevent={},ae.addClass(Ac?eb:db),Zd.fotorama=this,Ud.startAutoplay=function(a){return Ud.autoplay?this:(Od=Pd=!1,w(a||f.autoplay),_c(),this)},Ud.stopAutoplay=function(){return Ud.autoplay&&(Od=Pd=!0,_c()),this},Ud.show=function(a){var b;"object"!=typeof a?(b=a,a={}):b=a.index,b=">"===b?td+1:"<"===b?td-1:"<<"===b?0:">>"===b?md-1:b,b=isNaN(b)?J(b,ld,!0):b,b="undefined"==typeof b?ve||0:b,Ud.activeIndex=ve=Z(b),vd=Fb(ve),wd=Gb(ve),rd=[ve,vd,wd],td=yd?b:ve;var c=Math.abs(ud-td),d=u(a.time,function(){return Math.min(Hd*(1+(c-1)/12),2*Hd)}),e=a.overPos;a.slow&&(d*=10),Ud.activeFrame=qd=ld[ve],cd(pd,qd.i!==ld[V(sd)].i),mc(rd,"stage"),sc(Ec?[td]:[td,Fb(td),Gb(td)]),gd("go",!0),Xc("show",{user:a.user,time:d});var g=Ud.show.onEnd=function(b){g.ok||(g.ok=!0,lc(),hc(rd,"stage"),b||Vc(!0),Xc("showend",{user:a.user}),gd("go",!1),Dc(),ed(),$c(),_c())};if(Ed){var i=qd[Qc],j=ve!==ud?ld[ud][Qc]:null;U(i,j,de,{time:d,method:f.transition,onEnd:g},Fe)}else T(ce,{pos:-p(td,xe.w,f.margin,sd),overPos:e,time:d,onEnd:g,_001:!0});if(zc(),zd){Mc();var k=W(ve+h(td-ud,-1,1));Kc({time:d,coo:k!==ve&&a.coo,guessIndex:"undefined"!=typeof a.coo?k:ve}),Ad&&Hc(d)}return Nd="undefined"!=typeof ud&&ud!==ve,ud=ve,f.hash&&Nd&&!Ud.eq&&F(qd.id||ve+1),this},Ud.requestFullScreen=function(){return Cd&&!Ud.fullScreen&&(Ld=wc.scrollTop(),Md=wc.scrollLeft(),O(0,0),gd("x",!0),Qd=d.extend({},xe),a.addClass(Pb).appendTo(rc.addClass(bb)),qc.addClass(bb),cd(pd,!0,!0),Ud.fullScreen=!0,Dd&&kc.request(Xd),Ud.resize(),hc(rd,"stage"),lc(),Xc("fullscreenenter")),this},Ud.cancelFullScreen=function(){return Dd&&kc.is()?kc.cancel(b):ad(),this},b.addEventListener&&b.addEventListener(kc.event,function(){!ld||kc.is()||pd||ad()},!1),Ud.resize=function(a){if(!ld)return this;Wc(Ud.fullScreen?{width:"100%",maxwidth:null,minwidth:null,height:"100%",maxheight:null,minheight:null}:P(a),Ud.fullScreen);var b=arguments[1]||0,c=arguments[2],d=xe.width,e=xe.height,g=xe.ratio,i=wc.height()-(zd?ie.height():0);return o(d)&&(ae.css({width:d,minWidth:xe.minwidth,maxWidth:xe.maxwidth}),d=xe.W=xe.w=ae.width(),f.glimpse&&(xe.w-=Math.round(2*(n(f.glimpse)/100*d||m(f.glimpse)||0))),ce.css({width:xe.w,marginLeft:(xe.W-xe.w)/2}),e=n(e)/100*i||m(e),e=e||g&&d/g,e&&(d=Math.round(d),e=xe.h=Math.round(h(e,n(xe.minheight)/100*i||m(xe.minheight),n(xe.maxheight)/100*i||m(xe.maxheight))),Vc(),be.addClass(qb).stop().animate({width:d,height:e},b,function(){be.removeClass(qb)}),zd&&(ie.stop().animate({width:d},b),Kc({guessIndex:ve,time:b,keep:!0}),Ad&&uc.nav&&Hc(b)),Kd=c||!0,kd())),Ee=be.offset().left,this},Ud.setOptions=function(a){return d.extend(f,a),id(),this},Ud.shuffle=function(){return ld&&M(ld)&&id(),this},Ud.destroy=function(){return Ud.cancelFullScreen(),Ud.stopAutoplay(),ld=Ud.data=null,r(),rd=[],Uc(Qc),this},Ud.playVideo=function(){var a=Ud.activeFrame,b=a.video,c=ve;return"object"==typeof b&&a.videoReady&&(Dd&&Ud.fullScreen&&Ud.cancelFullScreen(),E(function(){return!kc.is()||c!==ve},function(){c===ve&&(a.$video=a.$video||d(d.Fotorama.jst.video(b)),a.$video.appendTo(a[Qc]),ae.addClass(fb),pd=a.$video,v(),Xc("loadvideo"))})),this},Ud.stopVideo=function(){return cd(pd,!0,!0),this},be.on("mousemove",ed),ye=X(ce,{onStart:Yc,onMove:function(a,b){bd(be,b.edge)},onEnd:function(a){bd(be),Zc();var b=(Gc&&!Sd||a.touch)&&f.arrows;if(a.moved||b&&a.pos!==a.newPos){var c=q(a.newPos,xe.w,f.margin,sd);Ud.show({index:c,time:Ed?Hd:a.time,overPos:a.overPos,user:!0})}else a.aborted||fd(a.startEvent,b)},getPos:function(){return-p(td,xe.w,f.margin,sd)},_001:!0,timeLow:1,timeHigh:1,friction:2,select:"."+Nb+", ."+Nb+" *",$wrap:be}),Ae=X(je,{onStart:Yc,onMove:function(a,b){bd(ie,b.edge)},onEnd:function(a){function b(){Kc.l=a.newPos,$c(),_c(),tc(a.newPos,!0)}if(Zc(),a.moved)a.pos!==a.newPos?(T(je,{time:a.time,pos:a.newPos,overPos:a.overPos,onEnd:b}),tc(a.newPos),Id&&bd(ie,I(a.newPos,ne.min,ne.max))):b();else{var c=a.$target.closest("."+Cb,je)[0];c&&hd.call(c,a.startEvent)}},timeLow:.5,timeHigh:2,friction:5,$wrap:ie}),ze=Y(be,{shift:!0,onEnd:function(a,b){Yc(),Zc(),Ud.show({index:b,slow:a.altKey})}}),Be=Y(ie,{onEnd:function(a,b){Yc(),Zc();var c=t(je)+.25*b;je.css(k(h(c,ne.min,ne.max))),Id&&bd(ie,I(c,ne.min,ne.max)),Be.prevent={"<":c>=ne.max,">":c<=ne.min},clearTimeout(Be.t),Be.t=setTimeout(function(){tc(c,!0)},Ic),tc(c)}}),ae.hover(function(){setTimeout(function(){Rd||(Sd=!0,dd(!Sd))},0)},function(){Sd&&(Sd=!1,dd(!Sd))}),K(ge,function(a){R(a),pd?cd(pd,!0,!0):(Zc(),Ud.show({index:ge.index(this)?">":"<",slow:a.altKey,user:!0}))},{onStart:function(){Yc(),ye.control=!0},tail:ye}),d.each("load push pop shift unshift reverse sort splice".split(" "),function(a,b){Ud[b]=function(){return ld=ld||[],"load"!==b?Array.prototype[b].apply(ld,arguments):arguments[0]&&"object"==typeof arguments[0]&&arguments[0].length&&(ld=N(arguments[0])),id(),Ud}}),id()},d.fn.fotorama=function(b){return this.each(function(){var c=this,e=d(this),f=e.data(),g=f.fotorama;g?g.setOptions(b):E(function(){return!C(c)},function(){f.urtext=e.html(),new d.Fotorama(e,d.extend({},{width:null,minwidth:null,maxwidth:"100%",height:null,minheight:null,maxheight:null,ratio:null,margin:Mc,glimpse:0,nav:"dots",navposition:"bottom",thumbwidth:Nc,thumbheight:Nc,thumbmargin:Mc,thumbborderwidth:Mc,allowfullscreen:!1,fit:"contain",transition:"slide",transitionduration:Jc,captions:!0,hash:!1,startindex:0,loop:!1,autoplay:!1,stopautoplayontouch:!0,keyboard:!1,arrows:!0,click:!0,swipe:!0,trackpad:!0,shuffle:!1,direction:"ltr",shadows:!0},a.fotoramaDefaults,b,f))})})},d.Fotorama.instances=[],d.Fotorama.cache={},d.Fotorama.measures={},d=d||{},d.Fotorama=d.Fotorama||{},d.Fotorama.jst=d.Fotorama.jst||{},d.Fotorama.jst.style=function(a){var b,c="";return ic.escape,c+=".fotorama"+(null==(b=a.s)?"":b)+" .fotorama__nav--thumbs .fotorama__nav__frame{\npadding:"+(null==(b=a.m)?"":b)+"px;\nheight:"+(null==(b=a.h)?"":b)+"px}\n.fotorama"+(null==(b=a.s)?"":b)+" .fotorama__thumb-border{\nheight:"+(null==(b=a.h-a.b*(a.q?0:2))?"":b)+"px;\nborder-width:"+(null==(b=a.b)?"":b)+"px;\nmargin-top:"+(null==(b=a.m)?"":b)+"px}"},d.Fotorama.jst.video=function(a){function b(){c+=d.call(arguments,"")}var c="",d=(ic.escape,Array.prototype.join);return c+='<div class="fotorama__video"><iframe src="',b(("youtube"==a.type?"http://youtube.com/embed/"+a.id+"?autoplay=1":"vimeo"==a.type?"http://player.vimeo.com/video/"+a.id+"?autoplay=1&badge=0":a.id)+(a.s&&"custom"!=a.type?"&"+a.s:"")),c+='" frameborder="0" allowfullscreen></iframe></div>'},d(function(){d("."+ab+':not([data-auto="false"])').fotorama()})}(window,document,location,window.jQuery);(function(window,document,$,undefined){"use strict";var H=$("html"),W=$(window),D=$(document),F=$.fancybox=function(){F.open.apply(this,arguments);},IE=navigator.userAgent.match(/msie/i),didUpdate=null,isTouch=document.createTouch!==undefined,isQuery=function(obj){return obj&&obj.hasOwnProperty&&obj instanceof $;},isString=function(str){return str&&$.type(str)==="string";},isPercentage=function(str){return isString(str)&&str.indexOf('%')>0;},isScrollable=function(el){return(el&&!(el.style.overflow&&el.style.overflow==='hidden')&&((el.clientWidth&&el.scrollWidth>el.clientWidth)||(el.clientHeight&&el.scrollHeight>el.clientHeight)));},getScalar=function(orig,dim){var value=parseInt(orig,10)||0;if(dim&&isPercentage(orig)){value=F.getViewport()[dim]/100*value;}
return Math.ceil(value);},getValue=function(value,dim){return getScalar(value,dim)+'px';};$.extend(F,{version:'2.1.5',defaults:{padding:15,margin:20,width:800,height:600,minWidth:100,minHeight:100,maxWidth:9999,maxHeight:9999,pixelRatio:1,autoSize:true,autoHeight:false,autoWidth:false,autoResize:true,autoCenter:!isTouch,fitToView:true,aspectRatio:false,topRatio:0.5,leftRatio:0.5,scrolling:'auto',wrapCSS:'',arrows:true,closeBtn:true,closeClick:false,nextClick:false,mouseWheel:true,autoPlay:false,playSpeed:3000,preload:3,modal:false,loop:true,ajax:{dataType:'html',headers:{'X-fancyBox':true}},iframe:{scrolling:'auto',preload:true},swf:{wmode:'transparent',allowfullscreen:'true',allowscriptaccess:'always'},keys:{next:{13:'left',34:'up',39:'left',40:'up'},prev:{8:'right',33:'down',37:'right',38:'down'},close:[27],play:[32],toggle:[70]},direction:{next:'left',prev:'right'},scrollOutside:true,index:0,type:null,href:null,content:null,title:null,tpl:{wrap:'<div class="fancybox-wrap" tabIndex="-1"><div class="fancybox-skin"><div class="fancybox-outer"><div class="fancybox-inner"></div></div></div></div>',image:'<img class="fancybox-image" src="{href}" alt="" />',iframe:'<iframe id="fancybox-frame{rnd}" name="fancybox-frame{rnd}" class="fancybox-iframe" frameborder="0" vspace="0" hspace="0" webkitAllowFullScreen mozallowfullscreen allowFullScreen'+(IE?' allowtransparency="true"':'')+'></iframe>',error:'<p class="fancybox-error">The requested content cannot be loaded.<br/>Please try again later.</p>',closeBtn:'<a title="Close" class="fancybox-item fancybox-close" href="javascript:;"></a>',next:'<a title="Next" class="fancybox-nav fancybox-next" href="javascript:;"><span></span></a>',prev:'<a title="Previous" class="fancybox-nav fancybox-prev" href="javascript:;"><span></span></a>'},openEffect:'fade',openSpeed:250,openEasing:'swing',openOpacity:true,openMethod:'zoomIn',closeEffect:'fade',closeSpeed:250,closeEasing:'swing',closeOpacity:true,closeMethod:'zoomOut',nextEffect:'elastic',nextSpeed:250,nextEasing:'swing',nextMethod:'changeIn',prevEffect:'elastic',prevSpeed:250,prevEasing:'swing',prevMethod:'changeOut',helpers:{overlay:true,title:true},onCancel:$.noop,beforeLoad:$.noop,afterLoad:$.noop,beforeShow:$.noop,afterShow:$.noop,beforeChange:$.noop,beforeClose:$.noop,afterClose:$.noop},group:{},opts:{},previous:null,coming:null,current:null,isActive:false,isOpen:false,isOpened:false,wrap:null,skin:null,outer:null,inner:null,player:{timer:null,isActive:false},ajaxLoad:null,imgPreload:null,transitions:{},helpers:{},open:function(group,opts){if(!group){return;}
if(!$.isPlainObject(opts)){opts={};}
if(false===F.close(true)){return;}
if(!$.isArray(group)){group=isQuery(group)?$(group).get():[group];}
$.each(group,function(i,element){var obj={},href,title,content,type,rez,hrefParts,selector;if($.type(element)==="object"){if(element.nodeType){element=$(element);}
if(isQuery(element)){obj={href:element.data('fancybox-href')||element.attr('href'),title:element.data('fancybox-title')||element.attr('title'),isDom:true,element:element};if($.metadata){$.extend(true,obj,element.metadata());}}else{obj=element;}}
href=opts.href||obj.href||(isString(element)?element:null);title=opts.title!==undefined?opts.title:obj.title||'';content=opts.content||obj.content;type=content?'html':(opts.type||obj.type);if(!type&&obj.isDom){type=element.data('fancybox-type');if(!type){rez=element.prop('class').match(/fancybox\.(\w+)/);type=rez?rez[1]:null;}}
if(isString(href)){if(!type){if(F.isImage(href)){type='image';}else if(F.isSWF(href)){type='swf';}else if(href.charAt(0)==='#'){type='inline';}else if(isString(element)){type='html';content=element;}}
if(type==='ajax'){hrefParts=href.split(/\s+/,2);href=hrefParts.shift();selector=hrefParts.shift();}}
if(!content){if(type==='inline'){if(href){content=$(isString(href)?href.replace(/.*(?=#[^\s]+$)/,''):href);}else if(obj.isDom){content=element;}}else if(type==='html'){content=href;}else if(!type&&!href&&obj.isDom){type='inline';content=element;}}
$.extend(obj,{href:href,type:type,content:content,title:title,selector:selector});group[i]=obj;});F.opts=$.extend(true,{},F.defaults,opts);if(opts.keys!==undefined){F.opts.keys=opts.keys?$.extend({},F.defaults.keys,opts.keys):false;}
F.group=group;return F._start(F.opts.index);},cancel:function(){var coming=F.coming;if(!coming||false===F.trigger('onCancel')){return;}
F.hideLoading();if(F.ajaxLoad){F.ajaxLoad.abort();}
F.ajaxLoad=null;if(F.imgPreload){F.imgPreload.onload=F.imgPreload.onerror=null;}
if(coming.wrap){coming.wrap.stop(true,true).trigger('onReset').remove();}
F.coming=null;if(!F.current){F._afterZoomOut(coming);}},close:function(event){F.cancel();if(false===F.trigger('beforeClose')){return;}
F.unbindEvents();if(!F.isActive){return;}
if(!F.isOpen||event===true){$('.fancybox-wrap').stop(true).trigger('onReset').remove();F._afterZoomOut();}else{F.isOpen=F.isOpened=false;F.isClosing=true;$('.fancybox-item, .fancybox-nav').remove();F.wrap.stop(true,true).removeClass('fancybox-opened');F.transitions[F.current.closeMethod]();}},play:function(action){var clear=function(){clearTimeout(F.player.timer);},set=function(){clear();if(F.current&&F.player.isActive){F.player.timer=setTimeout(F.next,F.current.playSpeed);}},stop=function(){clear();D.unbind('.player');F.player.isActive=false;F.trigger('onPlayEnd');},start=function(){if(F.current&&(F.current.loop||F.current.index<F.group.length-1)){F.player.isActive=true;D.bind({'onCancel.player beforeClose.player':stop,'onUpdate.player':set,'beforeLoad.player':clear});set();F.trigger('onPlayStart');}};if(action===true||(!F.player.isActive&&action!==false)){start();}else{stop();}},next:function(direction){var current=F.current;if(current){if(!isString(direction)){direction=current.direction.next;}
F.jumpto(current.index+1,direction,'next');}},prev:function(direction){var current=F.current;if(current){if(!isString(direction)){direction=current.direction.prev;}
F.jumpto(current.index-1,direction,'prev');}},jumpto:function(index,direction,router){var current=F.current;if(!current){return;}
index=getScalar(index);F.direction=direction||current.direction[(index>=current.index?'next':'prev')];F.router=router||'jumpto';if(current.loop){if(index<0){index=current.group.length+(index%current.group.length);}
index=index%current.group.length;}
if(current.group[index]!==undefined){F.cancel();F._start(index);}},reposition:function(e,onlyAbsolute){var current=F.current,wrap=current?current.wrap:null,pos;if(wrap){pos=F._getPosition(onlyAbsolute);if(e&&e.type==='scroll'){delete pos.position;wrap.stop(true,true).animate(pos,200);}else{wrap.css(pos);current.pos=$.extend({},current.dim,pos);}}},update:function(e){var type=(e&&e.type),anyway=!type||type==='orientationchange';if(anyway){clearTimeout(didUpdate);didUpdate=null;}
if(!F.isOpen||didUpdate){return;}
didUpdate=setTimeout(function(){var current=F.current;if(!current||F.isClosing){return;}
F.wrap.removeClass('fancybox-tmp');if(anyway||type==='load'||(type==='resize'&&current.autoResize)){F._setDimension();}
if(!(type==='scroll'&&current.canShrink)){F.reposition(e);}
F.trigger('onUpdate');didUpdate=null;},(anyway&&!isTouch?0:300));},toggle:function(action){if(F.isOpen){F.current.fitToView=$.type(action)==="boolean"?action:!F.current.fitToView;if(isTouch){F.wrap.removeAttr('style').addClass('fancybox-tmp');F.trigger('onUpdate');}
F.update();}},hideLoading:function(){D.unbind('.loading');$('#fancybox-loading').remove();},showLoading:function(){var el,viewport;F.hideLoading();el=$('<div id="fancybox-loading"><div></div></div>').click(F.cancel).appendTo('body');D.bind('keydown.loading',function(e){if((e.which||e.keyCode)===27){e.preventDefault();F.cancel();}});if(!F.defaults.fixed){viewport=F.getViewport();el.css({position:'absolute',top:(viewport.h*0.5)+viewport.y,left:(viewport.w*0.5)+viewport.x});}},getViewport:function(){var locked=(F.current&&F.current.locked)||false,rez={x:W.scrollLeft(),y:W.scrollTop()};if(locked){rez.w=locked[0].clientWidth;rez.h=locked[0].clientHeight;}else{rez.w=isTouch&&window.innerWidth?window.innerWidth:W.width();rez.h=isTouch&&window.innerHeight?window.innerHeight:W.height();}
return rez;},unbindEvents:function(){if(F.wrap&&isQuery(F.wrap)){F.wrap.unbind('.fb');}
D.unbind('.fb');W.unbind('.fb');},bindEvents:function(){var current=F.current,keys;if(!current){return;}
W.bind('orientationchange.fb'+(isTouch?'':' resize.fb')+(current.autoCenter&&!current.locked?' scroll.fb':''),F.update);keys=current.keys;if(keys){D.bind('keydown.fb',function(e){var code=e.which||e.keyCode,target=e.target||e.srcElement;if(code===27&&F.coming){return false;}
if(!e.ctrlKey&&!e.altKey&&!e.shiftKey&&!e.metaKey&&!(target&&(target.type||$(target).is('[contenteditable]')))){$.each(keys,function(i,val){if(current.group.length>1&&val[code]!==undefined){F[i](val[code]);e.preventDefault();return false;}
if($.inArray(code,val)>-1){F[i]();e.preventDefault();return false;}});}});}
if($.fn.mousewheel&&current.mouseWheel){F.wrap.bind('mousewheel.fb',function(e,delta,deltaX,deltaY){var target=e.target||null,parent=$(target),canScroll=false;while(parent.length){if(canScroll||parent.is('.fancybox-skin')||parent.is('.fancybox-wrap')){break;}
canScroll=isScrollable(parent[0]);parent=$(parent).parent();}
if(delta!==0&&!canScroll){if(F.group.length>1&&!current.canShrink){if(deltaY>0||deltaX>0){F.prev(deltaY>0?'down':'left');}else if(deltaY<0||deltaX<0){F.next(deltaY<0?'up':'right');}
e.preventDefault();}}});}},trigger:function(event,o){var ret,obj=o||F.coming||F.current;if(!obj){return;}
if($.isFunction(obj[event])){ret=obj[event].apply(obj,Array.prototype.slice.call(arguments,1));}
if(ret===false){return false;}
if(obj.helpers){$.each(obj.helpers,function(helper,opts){if(opts&&F.helpers[helper]&&$.isFunction(F.helpers[helper][event])){F.helpers[helper][event]($.extend(true,{},F.helpers[helper].defaults,opts),obj);}});}
D.trigger(event);},isImage:function(str){return isString(str)&&str.match(/(^data:image\/.*,)|(\.(jp(e|g|eg)|gif|png|bmp|webp|svg)((\?|#).*)?$)/i);},isSWF:function(str){return isString(str)&&str.match(/\.(swf)((\?|#).*)?$/i);},_start:function(index){var coming={},obj,href,type,margin,padding;index=getScalar(index);obj=F.group[index]||null;if(!obj){return false;}
coming=$.extend(true,{},F.opts,obj);margin=coming.margin;padding=coming.padding;if($.type(margin)==='number'){coming.margin=[margin,margin,margin,margin];}
if($.type(padding)==='number'){coming.padding=[padding,padding,padding,padding];}
if(coming.modal){$.extend(true,coming,{closeBtn:false,closeClick:false,nextClick:false,arrows:false,mouseWheel:false,keys:null,helpers:{overlay:{closeClick:false}}});}
if(coming.autoSize){coming.autoWidth=coming.autoHeight=true;}
if(coming.width==='auto'){coming.autoWidth=true;}
if(coming.height==='auto'){coming.autoHeight=true;}
coming.group=F.group;coming.index=index;F.coming=coming;if(false===F.trigger('beforeLoad')){F.coming=null;return;}
type=coming.type;href=coming.href;if(!type){F.coming=null;if(F.current&&F.router&&F.router!=='jumpto'){F.current.index=index;return F[F.router](F.direction);}
return false;}
F.isActive=true;if(type==='image'||type==='swf'){coming.autoHeight=coming.autoWidth=false;coming.scrolling='visible';}
if(type==='image'){coming.aspectRatio=true;}
if(type==='iframe'&&isTouch){coming.scrolling='scroll';}
coming.wrap=$(coming.tpl.wrap).addClass('fancybox-'+(isTouch?'mobile':'desktop')+' fancybox-type-'+type+' fancybox-tmp '+coming.wrapCSS).appendTo(coming.parent||'body');$.extend(coming,{skin:$('.fancybox-skin',coming.wrap),outer:$('.fancybox-outer',coming.wrap),inner:$('.fancybox-inner',coming.wrap)});$.each(["Top","Right","Bottom","Left"],function(i,v){coming.skin.css('padding'+v,getValue(coming.padding[i]));});F.trigger('onReady');if(type==='inline'||type==='html'){if(!coming.content||!coming.content.length){return F._error('content');}}else if(!href){return F._error('href');}
if(type==='image'){F._loadImage();}else if(type==='ajax'){F._loadAjax();}else if(type==='iframe'){F._loadIframe();}else{F._afterLoad();}},_error:function(type){$.extend(F.coming,{type:'html',autoWidth:true,autoHeight:true,minWidth:0,minHeight:0,scrolling:'no',hasError:type,content:F.coming.tpl.error});F._afterLoad();},_loadImage:function(){var img=F.imgPreload=new Image();img.onload=function(){this.onload=this.onerror=null;F.coming.width=this.width/F.opts.pixelRatio;F.coming.height=this.height/F.opts.pixelRatio;F._afterLoad();};img.onerror=function(){this.onload=this.onerror=null;F._error('image');};img.src=F.coming.href;if(img.complete!==true){F.showLoading();}},_loadAjax:function(){var coming=F.coming;F.showLoading();F.ajaxLoad=$.ajax($.extend({},coming.ajax,{url:coming.href,error:function(jqXHR,textStatus){if(F.coming&&textStatus!=='abort'){F._error('ajax',jqXHR);}else{F.hideLoading();}},success:function(data,textStatus){if(textStatus==='success'){coming.content=data;F._afterLoad();}}}));},_loadIframe:function(){var coming=F.coming,iframe=$(coming.tpl.iframe.replace(/\{rnd\}/g,new Date().getTime())).attr('scrolling',isTouch?'auto':coming.iframe.scrolling).attr('src',coming.href);$(coming.wrap).bind('onReset',function(){try{$(this).find('iframe').hide().attr('src','//about:blank').end().empty();}catch(e){}});if(coming.iframe.preload){F.showLoading();iframe.one('load',function(){$(this).data('ready',1);if(!isTouch){$(this).bind('load.fb',F.update);}
$(this).parents('.fancybox-wrap').width('100%').removeClass('fancybox-tmp').show();F._afterLoad();});}
coming.content=iframe.appendTo(coming.inner);if(!coming.iframe.preload){F._afterLoad();}},_preloadImages:function(){var group=F.group,current=F.current,len=group.length,cnt=current.preload?Math.min(current.preload,len-1):0,item,i;for(i=1;i<=cnt;i+=1){item=group[(current.index+i)%len];if(item.type==='image'&&item.href){new Image().src=item.href;}}},_afterLoad:function(){var coming=F.coming,previous=F.current,placeholder='fancybox-placeholder',current,content,type,scrolling,href,embed;F.hideLoading();if(!coming||F.isActive===false){return;}
if(false===F.trigger('afterLoad',coming,previous)){coming.wrap.stop(true).trigger('onReset').remove();F.coming=null;return;}
if(previous){F.trigger('beforeChange',previous);previous.wrap.stop(true).removeClass('fancybox-opened').find('.fancybox-item, .fancybox-nav').remove();}
F.unbindEvents();current=coming;content=coming.content;type=coming.type;scrolling=coming.scrolling;$.extend(F,{wrap:current.wrap,skin:current.skin,outer:current.outer,inner:current.inner,current:current,previous:previous});href=current.href;switch(type){case'inline':case'ajax':case'html':if(current.selector){content=$('<div>').html(content).find(current.selector);}else if(isQuery(content)){if(!content.data(placeholder)){content.data(placeholder,$('<div class="'+placeholder+'"></div>').insertAfter(content).hide());}
content=content.show().detach();current.wrap.bind('onReset',function(){if($(this).find(content).length){content.hide().replaceAll(content.data(placeholder)).data(placeholder,false);}});}
break;case'image':content=current.tpl.image.replace('{href}',href);break;case'swf':content='<object id="fancybox-swf" classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" width="100%" height="100%"><param name="movie" value="'+href+'"></param>';embed='';$.each(current.swf,function(name,val){content+='<param name="'+name+'" value="'+val+'"></param>';embed+=' '+name+'="'+val+'"';});content+='<embed src="'+href+'" type="application/x-shockwave-flash" width="100%" height="100%"'+embed+'></embed></object>';break;}
if(!(isQuery(content)&&content.parent().is(current.inner))){current.inner.append(content);}
F.trigger('beforeShow');current.inner.css('overflow',scrolling==='yes'?'scroll':(scrolling==='no'?'hidden':scrolling));F._setDimension();F.reposition();F.isOpen=false;F.coming=null;F.bindEvents();if(!F.isOpened){$('.fancybox-wrap').not(current.wrap).stop(true).trigger('onReset').remove();}else if(previous.prevMethod){F.transitions[previous.prevMethod]();}
F.transitions[F.isOpened?current.nextMethod:current.openMethod]();F._preloadImages();},_setDimension:function(){var viewport=F.getViewport(),steps=0,canShrink=false,canExpand=false,wrap=F.wrap,skin=F.skin,inner=F.inner,current=F.current,width=current.width,height=current.height,minWidth=current.minWidth,minHeight=current.minHeight,maxWidth=current.maxWidth,maxHeight=current.maxHeight,scrolling=current.scrolling,scrollOut=current.scrollOutside?current.scrollbarWidth:0,margin=current.margin,wMargin=getScalar(margin[1]+margin[3]),hMargin=getScalar(margin[0]+margin[2]),wPadding,hPadding,wSpace,hSpace,origWidth,origHeight,origMaxWidth,origMaxHeight,ratio,width_,height_,maxWidth_,maxHeight_,iframe,body;wrap.add(skin).add(inner).width('auto').height('auto').removeClass('fancybox-tmp');wPadding=getScalar(skin.outerWidth(true)-skin.width());hPadding=getScalar(skin.outerHeight(true)-skin.height());wSpace=wMargin+wPadding;hSpace=hMargin+hPadding;origWidth=isPercentage(width)?(viewport.w-wSpace)*getScalar(width)/100:width;origHeight=isPercentage(height)?(viewport.h-hSpace)*getScalar(height)/100:height;if(current.type==='iframe'){iframe=current.content;if(current.autoHeight&&iframe.data('ready')===1){try{if(iframe[0].contentWindow.document.location){inner.width(origWidth).height(9999);body=iframe.contents().find('body');if(scrollOut){body.css('overflow-x','hidden');}
origHeight=body.outerHeight(true);}}catch(e){}}}else if(current.autoWidth||current.autoHeight){inner.addClass('fancybox-tmp');if(!current.autoWidth){inner.width(origWidth);}
if(!current.autoHeight){inner.height(origHeight);}
if(current.autoWidth){origWidth=inner.width();}
if(current.autoHeight){origHeight=inner.height();}
inner.removeClass('fancybox-tmp');}
width=getScalar(origWidth);height=getScalar(origHeight);ratio=origWidth/origHeight;minWidth=getScalar(isPercentage(minWidth)?getScalar(minWidth,'w')-wSpace:minWidth);maxWidth=getScalar(isPercentage(maxWidth)?getScalar(maxWidth,'w')-wSpace:maxWidth);minHeight=getScalar(isPercentage(minHeight)?getScalar(minHeight,'h')-hSpace:minHeight);maxHeight=getScalar(isPercentage(maxHeight)?getScalar(maxHeight,'h')-hSpace:maxHeight);origMaxWidth=maxWidth;origMaxHeight=maxHeight;if(current.fitToView){maxWidth=Math.min(viewport.w-wSpace,maxWidth);maxHeight=Math.min(viewport.h-hSpace,maxHeight);}
maxWidth_=viewport.w-wMargin;maxHeight_=viewport.h-hMargin;if(current.aspectRatio){if(width>maxWidth){width=maxWidth;height=getScalar(width/ratio);}
if(height>maxHeight){height=maxHeight;width=getScalar(height*ratio);}
if(width<minWidth){width=minWidth;height=getScalar(width/ratio);}
if(height<minHeight){height=minHeight;width=getScalar(height*ratio);}}else{width=Math.max(minWidth,Math.min(width,maxWidth));if(current.autoHeight&&current.type!=='iframe'){inner.width(width);height=inner.height();}
height=Math.max(minHeight,Math.min(height,maxHeight));}
if(current.fitToView){inner.width(width).height(height);wrap.width(width+wPadding);width_=wrap.width();height_=wrap.height();if(current.aspectRatio){while((width_>maxWidth_||height_>maxHeight_)&&width>minWidth&&height>minHeight){if(steps++>19){break;}
height=Math.max(minHeight,Math.min(maxHeight,height-10));width=getScalar(height*ratio);if(width<minWidth){width=minWidth;height=getScalar(width/ratio);}
if(width>maxWidth){width=maxWidth;height=getScalar(width/ratio);}
inner.width(width).height(height);wrap.width(width+wPadding);width_=wrap.width();height_=wrap.height();}}else{width=Math.max(minWidth,Math.min(width,width-(width_-maxWidth_)));height=Math.max(minHeight,Math.min(height,height-(height_-maxHeight_)));}}
if(scrollOut&&scrolling==='auto'&&height<origHeight&&(width+wPadding+scrollOut)<maxWidth_){width+=scrollOut;}
inner.width(width).height(height);wrap.width(width+wPadding);width_=wrap.width();height_=wrap.height();canShrink=(width_>maxWidth_||height_>maxHeight_)&&width>minWidth&&height>minHeight;canExpand=current.aspectRatio?(width<origMaxWidth&&height<origMaxHeight&&width<origWidth&&height<origHeight):((width<origMaxWidth||height<origMaxHeight)&&(width<origWidth||height<origHeight));$.extend(current,{dim:{width:getValue(width_),height:getValue(height_)},origWidth:origWidth,origHeight:origHeight,canShrink:canShrink,canExpand:canExpand,wPadding:wPadding,hPadding:hPadding,wrapSpace:height_-skin.outerHeight(true),skinSpace:skin.height()-height});if(!iframe&&current.autoHeight&&height>minHeight&&height<maxHeight&&!canExpand){inner.height('auto');}},_getPosition:function(onlyAbsolute){var current=F.current,viewport=F.getViewport(),margin=current.margin,width=F.wrap.width()+margin[1]+margin[3],height=F.wrap.height()+margin[0]+margin[2],rez={position:'absolute',top:margin[0],left:margin[3]};if(current.autoCenter&&current.fixed&&!onlyAbsolute&&height<=viewport.h&&width<=viewport.w){rez.position='fixed';}else if(!current.locked){rez.top+=viewport.y;rez.left+=viewport.x;}
rez.top=getValue(Math.max(rez.top,rez.top+((viewport.h-height)*current.topRatio)));rez.left=getValue(Math.max(rez.left,rez.left+((viewport.w-width)*current.leftRatio)));return rez;},_afterZoomIn:function(){var current=F.current;if(!current){return;}
F.isOpen=F.isOpened=true;F.wrap.css('overflow','visible').addClass('fancybox-opened');F.update();if(current.closeClick||(current.nextClick&&F.group.length>1)){F.inner.css('cursor','pointer').bind('click.fb',function(e){if(!$(e.target).is('a')&&!$(e.target).parent().is('a')){e.preventDefault();F[current.closeClick?'close':'next']();}});}
if(current.closeBtn){$(current.tpl.closeBtn).appendTo(F.skin).bind('click.fb',function(e){e.preventDefault();F.close();});}
if(current.arrows&&F.group.length>1){if(current.loop||current.index>0){$(current.tpl.prev).appendTo(F.outer).bind('click.fb',F.prev);}
if(current.loop||current.index<F.group.length-1){$(current.tpl.next).appendTo(F.outer).bind('click.fb',F.next);}}
F.trigger('afterShow');if(!current.loop&&current.index===current.group.length-1){F.play(false);}else if(F.opts.autoPlay&&!F.player.isActive){F.opts.autoPlay=false;F.play();}},_afterZoomOut:function(obj){obj=obj||F.current;$('.fancybox-wrap').trigger('onReset').remove();$.extend(F,{group:{},opts:{},router:false,current:null,isActive:false,isOpened:false,isOpen:false,isClosing:false,wrap:null,skin:null,outer:null,inner:null});F.trigger('afterClose',obj);}});F.transitions={getOrigPosition:function(){var current=F.current,element=current.element,orig=current.orig,pos={},width=50,height=50,hPadding=current.hPadding,wPadding=current.wPadding,viewport=F.getViewport();if(!orig&&current.isDom&&element.is(':visible')){orig=element.find('img:first');if(!orig.length){orig=element;}}
if(isQuery(orig)){pos=orig.offset();if(orig.is('img')){width=orig.outerWidth();height=orig.outerHeight();}}else{pos.top=viewport.y+(viewport.h-height)*current.topRatio;pos.left=viewport.x+(viewport.w-width)*current.leftRatio;}
if(F.wrap.css('position')==='fixed'||current.locked){pos.top-=viewport.y;pos.left-=viewport.x;}
pos={top:getValue(pos.top-hPadding*current.topRatio),left:getValue(pos.left-wPadding*current.leftRatio),width:getValue(width+wPadding),height:getValue(height+hPadding)};return pos;},step:function(now,fx){var ratio,padding,value,prop=fx.prop,current=F.current,wrapSpace=current.wrapSpace,skinSpace=current.skinSpace;if(prop==='width'||prop==='height'){ratio=fx.end===fx.start?1:(now-fx.start)/(fx.end-fx.start);if(F.isClosing){ratio=1-ratio;}
padding=prop==='width'?current.wPadding:current.hPadding;value=now-padding;F.skin[prop](getScalar(prop==='width'?value:value-(wrapSpace*ratio)));F.inner[prop](getScalar(prop==='width'?value:value-(wrapSpace*ratio)-(skinSpace*ratio)));}},zoomIn:function(){var current=F.current,startPos=current.pos,effect=current.openEffect,elastic=effect==='elastic',endPos=$.extend({opacity:1},startPos);delete endPos.position;if(elastic){startPos=this.getOrigPosition();if(current.openOpacity){startPos.opacity=0.1;}}else if(effect==='fade'){startPos.opacity=0.1;}
F.wrap.css(startPos).animate(endPos,{duration:effect==='none'?0:current.openSpeed,easing:current.openEasing,step:elastic?this.step:null,complete:F._afterZoomIn});},zoomOut:function(){var current=F.current,effect=current.closeEffect,elastic=effect==='elastic',endPos={opacity:0.1};if(elastic){endPos=this.getOrigPosition();if(current.closeOpacity){endPos.opacity=0.1;}}
F.wrap.animate(endPos,{duration:effect==='none'?0:current.closeSpeed,easing:current.closeEasing,step:elastic?this.step:null,complete:F._afterZoomOut});},changeIn:function(){var current=F.current,effect=current.nextEffect,startPos=current.pos,endPos={opacity:1},direction=F.direction,distance=200,field;startPos.opacity=0.1;if(effect==='elastic'){field=direction==='down'||direction==='up'?'top':'left';if(direction==='down'||direction==='right'){startPos[field]=getValue(getScalar(startPos[field])-distance);endPos[field]='+='+distance+'px';}else{startPos[field]=getValue(getScalar(startPos[field])+distance);endPos[field]='-='+distance+'px';}}
if(effect==='none'){F._afterZoomIn();}else{F.wrap.css(startPos).animate(endPos,{duration:current.nextSpeed,easing:current.nextEasing,complete:F._afterZoomIn});}},changeOut:function(){var previous=F.previous,effect=previous.prevEffect,endPos={opacity:0.1},direction=F.direction,distance=200;if(effect==='elastic'){endPos[direction==='down'||direction==='up'?'top':'left']=(direction==='up'||direction==='left'?'-':'+')+'='+distance+'px';}
previous.wrap.animate(endPos,{duration:effect==='none'?0:previous.prevSpeed,easing:previous.prevEasing,complete:function(){$(this).trigger('onReset').remove();}});}};F.helpers.overlay={defaults:{closeClick:true,speedOut:200,showEarly:true,css:{},locked:!isTouch,fixed:true},overlay:null,fixed:false,el:$('html'),create:function(opts){opts=$.extend({},this.defaults,opts);if(this.overlay){this.close();}
this.overlay=$('<div class="fancybox-overlay"></div>').appendTo(F.coming?F.coming.parent:opts.parent);this.fixed=false;if(opts.fixed&&F.defaults.fixed){this.overlay.addClass('fancybox-overlay-fixed');this.fixed=true;}},open:function(opts){var that=this;opts=$.extend({},this.defaults,opts);if(this.overlay){this.overlay.unbind('.overlay').width('auto').height('auto');}else{this.create(opts);}
if(!this.fixed){W.bind('resize.overlay',$.proxy(this.update,this));this.update();}
if(opts.closeClick){this.overlay.bind('click.overlay',function(e){if($(e.target).hasClass('fancybox-overlay')){if(F.isActive){F.close();}else{that.close();}
return false;}});}
this.overlay.css(opts.css).show();},close:function(){var scrollV,scrollH;W.unbind('resize.overlay');if(this.el.hasClass('fancybox-lock')){$('.fancybox-margin').removeClass('fancybox-margin');scrollV=W.scrollTop();scrollH=W.scrollLeft();this.el.removeClass('fancybox-lock');W.scrollTop(scrollV).scrollLeft(scrollH);}
$('.fancybox-overlay').remove().hide();$.extend(this,{overlay:null,fixed:false});},update:function(){var width='100%',offsetWidth;this.overlay.width(width).height('100%');if(IE){offsetWidth=Math.max(document.documentElement.offsetWidth,document.body.offsetWidth);if(D.width()>offsetWidth){width=D.width();}}else if(D.width()>W.width()){width=D.width();}
this.overlay.width(width).height(D.height());},onReady:function(opts,obj){var overlay=this.overlay;$('.fancybox-overlay').stop(true,true);if(!overlay){this.create(opts);}
if(opts.locked&&this.fixed&&obj.fixed){if(!overlay){this.margin=D.height()>W.height()?$('html').css('margin-right').replace("px",""):false;}
obj.locked=this.overlay.append(obj.wrap);obj.fixed=false;}
if(opts.showEarly===true){this.beforeShow.apply(this,arguments);}},beforeShow:function(opts,obj){var scrollV,scrollH;if(obj.locked){if(this.margin!==false){$('*').filter(function(){return($(this).css('position')==='fixed'&&!$(this).hasClass("fancybox-overlay")&&!$(this).hasClass("fancybox-wrap"));}).addClass('fancybox-margin');this.el.addClass('fancybox-margin');}
scrollV=W.scrollTop();scrollH=W.scrollLeft();this.el.addClass('fancybox-lock');W.scrollTop(scrollV).scrollLeft(scrollH);}
this.open(opts);},onUpdate:function(){if(!this.fixed){this.update();}},afterClose:function(opts){if(this.overlay&&!F.coming){this.overlay.fadeOut(opts.speedOut,$.proxy(this.close,this));}}};F.helpers.title={defaults:{type:'float',position:'bottom'},beforeShow:function(opts){var current=F.current,text=current.title,type=opts.type,title,target;if($.isFunction(text)){text=text.call(current.element,current);}
if(!isString(text)||$.trim(text)===''){return;}
title=$('<div class="fancybox-title fancybox-title-'+type+'-wrap">'+text+'</div>');switch(type){case'inside':target=F.skin;break;case'outside':target=F.wrap;break;case'over':target=F.inner;break;default:target=F.skin;title.appendTo('body');if(IE){title.width(title.width());}
title.wrapInner('<span class="child"></span>');F.current.margin[2]+=Math.abs(getScalar(title.css('margin-bottom')));break;}
title[(opts.position==='top'?'prependTo':'appendTo')](target);}};$.fn.fancybox=function(options){var index,that=$(this),selector=this.selector||'',run=function(e){var what=$(this).blur(),idx=index,relType,relVal;if(!(e.ctrlKey||e.altKey||e.shiftKey||e.metaKey)&&!what.is('.fancybox-wrap')){relType=options.groupAttr||'data-fancybox-group';relVal=what.attr(relType);if(!relVal){relType='rel';relVal=what.get(0)[relType];}
if(relVal&&relVal!==''&&relVal!=='nofollow'){what=selector.length?$(selector):that;what=what.filter('['+relType+'="'+relVal+'"]');idx=what.index(this);}
options.index=idx;if(F.open(what,options)!==false){e.preventDefault();}}};options=options||{};index=options.index||0;if(!selector||options.live===false){that.unbind('click.fb-start').bind('click.fb-start',run);}else{D.undelegate(selector,'click.fb-start').delegate(selector+":not('.fancybox-item, .fancybox-nav')",'click.fb-start',run);}
this.filter('[data-fancybox-start=1]').trigger('click');return this;};D.ready(function(){var w1,w2;if($.scrollbarWidth===undefined){$.scrollbarWidth=function(){var parent=$('<div style="width:50px;height:50px;overflow:auto"><div/></div>').appendTo('body'),child=parent.children(),width=child.innerWidth()-child.height(99).innerWidth();parent.remove();return width;};}
if($.support.fixedPosition===undefined){$.support.fixedPosition=(function(){var elem=$('<div style="position:fixed;top:20px;"></div>').appendTo('body'),fixed=(elem[0].offsetTop===20||elem[0].offsetTop===15);elem.remove();return fixed;}());}
$.extend(F.defaults,{scrollbarWidth:$.scrollbarWidth(),fixed:$.support.fixedPosition,parent:$('body')});w1=$(window).width();H.addClass('fancybox-lock-test');w2=$(window).width();H.removeClass('fancybox-lock-test');$("<style type='text/css'>.fancybox-margin{margin-right:"+(w2-w1)+"px;}</style>").appendTo("head");});}(window,document,jQuery));(function($){if($.fn.inputmask==undefined){$.inputmask={defaults:{placeholder:"_",optionalmarker:{start:"[",end:"]"},escapeChar:"\\",mask:null,oncomplete:$.noop,onincomplete:$.noop,oncleared:$.noop,repeat:0,greedy:true,autoUnmask:false,clearMaskOnLostFocus:true,insertMode:true,clearIncomplete:false,aliases:{},onKeyUp:$.noop,onKeyDown:$.noop,showMaskOnHover:true,numericInput:false,radixPoint:".",definitions:{'9':{validator:"[0-9]",cardinality:1},'a':{validator:"[A-Za-z\u0410-\u044F\u0401\u0451]",cardinality:1},'*':{validator:"[A-Za-z\u0410-\u044F\u0401\u04510-9]",cardinality:1}},keyCode:{ALT:18,BACKSPACE:8,CAPS_LOCK:20,COMMA:188,COMMAND:91,COMMAND_LEFT:91,COMMAND_RIGHT:93,CONTROL:17,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,INSERT:45,LEFT:37,MENU:93,NUMPAD_ADD:107,NUMPAD_DECIMAL:110,NUMPAD_DIVIDE:111,NUMPAD_ENTER:108,NUMPAD_MULTIPLY:106,NUMPAD_SUBTRACT:109,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SHIFT:16,SPACE:32,TAB:9,UP:38,WINDOWS:91},ignorables:[8,9,13,16,17,18,20,27,33,34,35,36,37,38,39,40,46,91,93,108]},val:$.fn.val};$.fn.inputmask=function(fn,options){var opts=$.extend(true,{},$.inputmask.defaults,options);var pasteEvent=isInputEventSupported('paste')?'paste':'input';var iphone=navigator.userAgent.match(/iphone/i)!=null;var android=navigator.userAgent.match(/android.*mobile safari.*/i)!=null;if(android){var browser=navigator.userAgent.match(/mobile safari.*/i);var version=parseInt(new RegExp(/[0-9]+/).exec(browser));android=version<=533;}
var caretposCorrection=null;if(typeof fn=="string"){switch(fn){case"mask":var _buffer=getMaskTemplate();var tests=getTestingChain();return this.each(function(){mask(this);});break;case"unmaskedvalue":var tests=this.data('inputmask')['tests'];var _buffer=this.data('inputmask')['_buffer'];opts.greedy=this.data('inputmask')['greedy'];opts.repeat=this.data('inputmask')['repeat'];opts.definitions=this.data('inputmask')['definitions'];return unmaskedvalue(this);break;case"remove":var tests,_buffer;return this.each(function(){var $input=$(this),input=this;setTimeout(function(){if($input.data('inputmask')){tests=$input.data('inputmask')['tests'];_buffer=$input.data('inputmask')['_buffer'];opts.greedy=$input.data('inputmask')['greedy'];opts.repeat=$input.data('inputmask')['repeat'];opts.definitions=$input.data('inputmask')['definitions'];input._valueSet(unmaskedvalue($input,true));$input.removeData('inputmask');$input.unbind(".inputmask");$input.removeClass('focus.inputmask');var valueProperty;if(Object.getOwnPropertyDescriptor)
valueProperty=Object.getOwnPropertyDescriptor(input,"value");if(valueProperty&&valueProperty.get){if(input._valueGet){Object.defineProperty(input,"value",{get:input._valueGet,set:input._valueSet});}}else if(document.__lookupGetter__&&input.__lookupGetter__("value")){if(input._valueGet){input.__defineGetter__("value",input._valueGet);input.__defineSetter__("value",input._valueSet);}}
delete input._valueGet;delete input._valueSet;}},0);});break;case"getemptymask":if(this.data('inputmask'))
return this.data('inputmask')['_buffer'].join('');else return"";case"hasMaskedValue":return this.data('inputmask')?!this.data('inputmask')['autoUnmask']:false;default:if(!resolveAlias(fn)){opts.mask=fn;}
var _buffer=getMaskTemplate();var tests=getTestingChain();return this.each(function(){mask(this);});break;}}
if(typeof fn=="object"){opts=$.extend(true,{},$.inputmask.defaults,fn);resolveAlias(opts.alias);var _buffer=getMaskTemplate();var tests=getTestingChain();return this.each(function(){mask(this);});}
function isInputEventSupported(eventName){var el=document.createElement('input'),eventName='on'+eventName,isSupported=(eventName in el);if(!isSupported){el.setAttribute(eventName,'return;');isSupported=typeof el[eventName]=='function';}
el=null;return isSupported;}
function resolveAlias(aliasStr){var aliasDefinition=opts.aliases[aliasStr];if(aliasDefinition){if(aliasDefinition.alias)resolveAlias(aliasDefinition.alias);$.extend(true,opts,aliasDefinition);$.extend(true,opts,options);return true;}
return false;}
function getMaskTemplate(){var escaped=false,outCount=0;if(opts.mask.length==1&&opts.greedy==false){opts.placeholder="";}
var singleMask=$.map(opts.mask.split(""),function(element,index){var outElem=[];if(element==opts.escapeChar){escaped=true;}
else if((element!=opts.optionalmarker.start&&element!=opts.optionalmarker.end)||escaped){var maskdef=opts.definitions[element];if(maskdef&&!escaped){for(var i=0;i<maskdef.cardinality;i++){outElem.push(getPlaceHolder(outCount+i));}}else{outElem.push(element);escaped=false;}
outCount+=outElem.length;return outElem;}});var repeatedMask=singleMask.slice();for(var i=1;i<opts.repeat&&opts.greedy;i++){repeatedMask=repeatedMask.concat(singleMask.slice());}
return repeatedMask;}
function getTestingChain(){var isOptional=false,escaped=false;var newBlockMarker=false;return $.map(opts.mask.split(""),function(element,index){var outElem=[];if(element==opts.escapeChar){escaped=true;}else if(element==opts.optionalmarker.start&&!escaped){isOptional=true;newBlockMarker=true;}
else if(element==opts.optionalmarker.end&&!escaped){isOptional=false;newBlockMarker=true;}
else{var maskdef=opts.definitions[element];if(maskdef&&!escaped){var prevalidators=maskdef["prevalidator"],prevalidatorsL=prevalidators?prevalidators.length:0;for(var i=1;i<maskdef.cardinality;i++){var prevalidator=prevalidatorsL>=i?prevalidators[i-1]:[],validator=prevalidator["validator"],cardinality=prevalidator["cardinality"];outElem.push({fn:validator?typeof validator=='string'?new RegExp(validator):new function(){this.test=validator;}:new RegExp("."),cardinality:cardinality?cardinality:1,optionality:isOptional,newBlockMarker:isOptional==true?newBlockMarker:false,offset:0,casing:maskdef["casing"],def:element});if(isOptional==true)
newBlockMarker=false;}
outElem.push({fn:maskdef.validator?typeof maskdef.validator=='string'?new RegExp(maskdef.validator):new function(){this.test=maskdef.validator;}:new RegExp("."),cardinality:maskdef.cardinality,optionality:isOptional,newBlockMarker:newBlockMarker,offset:0,casing:maskdef["casing"],def:element});}else{outElem.push({fn:null,cardinality:0,optionality:isOptional,newBlockMarker:newBlockMarker,offset:0,casing:null,def:element});escaped=false;}
newBlockMarker=false;return outElem;}});}
function isValid(pos,c,buffer,strict){if(pos<0||pos>=getMaskLength())return false;var testPos=determineTestPosition(pos),loopend=c?1:0,chrs='';for(var i=tests[testPos].cardinality;i>loopend;i--){chrs+=getBufferElement(buffer,testPos-(i-1));}
if(c){chrs+=c;}
return tests[testPos].fn!=null?tests[testPos].fn.test(chrs,buffer,pos,strict,opts):false;}
function isMask(pos){var testPos=determineTestPosition(pos);var test=tests[testPos];return test!=undefined?test.fn:false;}
function determineTestPosition(pos){return pos%tests.length;}
function getPlaceHolder(pos){return opts.placeholder.charAt(pos%opts.placeholder.length);}
function getMaskLength(){var calculatedLength=_buffer.length;if(!opts.greedy&&opts.repeat>1){calculatedLength+=(_buffer.length*(opts.repeat-1));}
return calculatedLength;}
function seekNext(buffer,pos){var maskL=getMaskLength();if(pos>=maskL)return maskL;var position=pos;while(++position<maskL&&!isMask(position)){};return position;}
function seekPrevious(buffer,pos){var position=pos;if(position<=0)return 0;while(--position>0&&!isMask(position)){};return position;}
function setBufferElement(buffer,position,element){var test=tests[determineTestPosition(position)];var elem=element;if(elem!=undefined){switch(test.casing){case"upper":elem=element.toUpperCase();break;case"lower":elem=element.toLowerCase();break;}}
buffer[position]=elem;}
function getBufferElement(buffer,position,autoPrepare){if(autoPrepare)position=prepareBuffer(buffer,position);return buffer[position];}
function prepareBuffer(buffer,position,isRTL){var j;if(isRTL){while(position<0&&buffer.length<getMaskLength()){j=_buffer.length-1;position=_buffer.length;while(_buffer[j]!==undefined){buffer.unshift(_buffer[j--]);}}}else{while(buffer[position]==undefined&&buffer.length<getMaskLength()){j=0;while(_buffer[j]!==undefined){buffer.push(_buffer[j++]);}}}
return position;}
function writeBuffer(input,buffer,caretPos){input._valueSet(buffer.join(''));if(caretPos!=undefined){if(android){setTimeout(function(){caret(input,caretPos);},100);}
else caret(input,caretPos);}};function clearBuffer(buffer,start,end){for(var i=start,maskL=getMaskLength();i<end&&i<maskL;i++){setBufferElement(buffer,i,getBufferElement(_buffer.slice(),i));}};function setReTargetPlaceHolder(buffer,pos){var testPos=determineTestPosition(pos);setBufferElement(buffer,pos,getBufferElement(_buffer,testPos));}
function checkVal(input,buffer,clearInvalid,skipRadixHandling){var isRTL=$(input).data('inputmask')['isRTL'],inputValue=truncateInput(input._valueGet(),isRTL).split('');if(isRTL){var maskL=getMaskLength();var inputValueRev=inputValue.reverse();inputValueRev.length=maskL;for(var i=0;i<maskL;i++){var targetPosition=determineTestPosition(maskL-(i+1));if(tests[targetPosition].fn==null&&inputValueRev[i]!=getBufferElement(_buffer,targetPosition)){inputValueRev.splice(i,0,getBufferElement(_buffer,targetPosition));inputValueRev.length=maskL;}else{inputValueRev[i]=inputValueRev[i]||getBufferElement(_buffer,targetPosition);}}
inputValue=inputValueRev.reverse();}
clearBuffer(buffer,0,buffer.length);buffer.length=_buffer.length;var lastMatch=-1,checkPosition=-1,np,maskL=getMaskLength(),ivl=inputValue.length,rtlMatch=ivl==0?maskL:-1;for(var i=0;i<ivl;i++){for(var pos=checkPosition+1;pos<maskL;pos++){if(isMask(pos)){var c=inputValue[i];if((np=isValid(pos,c,buffer,!clearInvalid))!==false){if(np!==true){pos=np.pos||pos;c=np.c||c;}
setBufferElement(buffer,pos,c);lastMatch=checkPosition=pos;}else{setReTargetPlaceHolder(buffer,pos);if(c==getPlaceHolder(pos)){checkPosition=pos;rtlMatch=pos;}}
break;}else{setReTargetPlaceHolder(buffer,pos);if(lastMatch==checkPosition)
lastMatch=pos;checkPosition=pos;if(inputValue[i]==getBufferElement(buffer,pos))
break;}}}
if(opts.greedy==false){var newBuffer=truncateInput(buffer.join(''),isRTL).split('');while(buffer.length!=newBuffer.length){isRTL?buffer.shift():buffer.pop();}}
if(clearInvalid){writeBuffer(input,buffer);}
return isRTL?(opts.numericInput?($.inArray(opts.radixPoint,buffer)!=-1&&skipRadixHandling!==true?$.inArray(opts.radixPoint,buffer):seekNext(buffer,maskL)):seekNext(buffer,rtlMatch)):seekNext(buffer,lastMatch);}
function escapeRegex(str){var specials=['/','.','*','+','?','|','(',')','[',']','{','}','\\'];return str.replace(new RegExp('(\\'+specials.join('|\\')+')','gim'),'\\$1');}
function truncateInput(inputValue,rtl){return rtl?inputValue.replace(new RegExp("^("+escapeRegex(_buffer.join(''))+")*"),""):inputValue.replace(new RegExp("("+escapeRegex(_buffer.join(''))+")*$"),"");}
function clearOptionalTail(input,buffer){checkVal(input,buffer,false);var tmpBuffer=buffer.slice();if($(input).data('inputmask')['isRTL']){for(var pos=0;pos<=tmpBuffer.length-1;pos++){var testPos=determineTestPosition(pos);if(tests[testPos].optionality){if(getPlaceHolder(pos)==buffer[pos]||!isMask(pos))
tmpBuffer.splice(0,1);else break;}else break;}}else{for(var pos=tmpBuffer.length-1;pos>=0;pos--){var testPos=determineTestPosition(pos);if(tests[testPos].optionality){if(getPlaceHolder(pos)==buffer[pos]||!isMask(pos))
tmpBuffer.pop();else break;}else break;}}
writeBuffer(input,tmpBuffer);}
function unmaskedvalue($input,skipDatepickerCheck){var input=$input[0];if(tests&&(skipDatepickerCheck===true||!$input.hasClass('hasDatepicker'))){var buffer=_buffer.slice();checkVal(input,buffer);return $.map(buffer,function(element,index){return isMask(index)&&element!=getBufferElement(_buffer.slice(),index)?element:null;}).join('');}
else{return input._valueGet();}}
function caret(input,begin,end){var npt=input.jquery&&input.length>0?input[0]:input;if(typeof begin=='number'){end=(typeof end=='number')?end:begin;if(opts.insertMode==false&&begin==end)end++;if(npt.setSelectionRange){npt.setSelectionRange(begin,end);}else if(npt.createTextRange){var range=npt.createTextRange();range.collapse(true);range.moveEnd('character',end);range.moveStart('character',begin);range.select();}
npt.focus();if(android&&end!=npt.selectionEnd)caretposCorrection={begin:begin,end:end};}else{var caretpos=android?caretposCorrection:null,caretposCorrection=null;if(caretpos==null){if(npt.setSelectionRange){begin=npt.selectionStart;end=npt.selectionEnd;}else if(document.selection&&document.selection.createRange){var range=document.selection.createRange();begin=0-range.duplicate().moveStart('character',-100000);end=begin+range.text.length;}
caretpos={begin:begin,end:end};}
return caretpos;}};function mask(el){var $input=$(el);if(!$input.is(":input"))return;opts.greedy=opts.greedy?opts.greedy:opts.repeat==0;var maxLength=$input.prop('maxLength');if(getMaskLength()>maxLength&&maxLength>-1){if(maxLength<_buffer.length)_buffer.length=maxLength;if(opts.greedy==false){opts.repeat=Math.round(maxLength/_buffer.length);}}
$input.prop('maxLength',getMaskLength()*2);$input.data('inputmask',{'tests':tests,'_buffer':_buffer,'greedy':opts.greedy,'repeat':opts.repeat,'autoUnmask':opts.autoUnmask,'definitions':opts.definitions,'isRTL':false});patchValueProperty(el);var buffer=_buffer.slice(),undoBuffer=el._valueGet(),skipKeyPressEvent=false,ignorable=false,lastPosition=-1,firstMaskPos=seekNext(buffer,-1),lastMaskPos=seekPrevious(buffer,getMaskLength()),isRTL=false;if(el.dir=="rtl"||opts.numericInput){el.dir="ltr"
$input.css("text-align","right");$input.removeAttr("dir");var inputData=$input.data('inputmask');inputData['isRTL']=true;$input.data('inputmask',inputData);isRTL=true;}
$input.unbind(".inputmask");$input.removeClass('focus.inputmask');$input.bind("mouseenter.inputmask",function(){var $input=$(this),input=this;if(!$input.hasClass('focus.inputmask')&&opts.showMaskOnHover){var nptL=input._valueGet().length;if(nptL<buffer.length){if(nptL==0)
buffer=_buffer.slice();writeBuffer(input,buffer);}}}).bind("blur.inputmask",function(){var $input=$(this),input=this,nptValue=input._valueGet();$input.removeClass('focus.inputmask');if(nptValue!=undoBuffer){$input.change();}
if(opts.clearMaskOnLostFocus){if(nptValue==_buffer.join(''))
input._valueSet('');else{clearOptionalTail(input,buffer);}}
if(!isComplete(input)){$input.trigger("incomplete");if(opts.clearIncomplete){if(opts.clearMaskOnLostFocus)
input._valueSet('');else{buffer=_buffer.slice();writeBuffer(input,buffer);}}}}).bind("focus.inputmask",function(){var $input=$(this),input=this;if(!$input.hasClass('focus.inputmask')&&!opts.showMaskOnHover){var nptL=input._valueGet().length;if(nptL<buffer.length){if(nptL==0)
buffer=_buffer.slice();caret(input,checkVal(input,buffer,true));}}
$input.addClass('focus.inputmask');undoBuffer=input._valueGet();}).bind("mouseleave.inputmask",function(){var $input=$(this),input=this;if(opts.clearMaskOnLostFocus){if(!$input.hasClass('focus.inputmask')){if(input._valueGet()==_buffer.join('')||input._valueGet()=='')
input._valueSet('');else{clearOptionalTail(input,buffer);}}}}).bind("click.inputmask",function(){var input=this;setTimeout(function(){var selectedCaret=caret(input);if(selectedCaret.begin==selectedCaret.end){var clickPosition=selectedCaret.begin;lastPosition=checkVal(input,buffer,false);if(isRTL)
caret(input,clickPosition>lastPosition&&(isValid(clickPosition,buffer[clickPosition],buffer,true)!==false||!isMask(clickPosition))?clickPosition:lastPosition);else
caret(input,clickPosition<lastPosition&&(isValid(clickPosition,buffer[clickPosition],buffer,true)!==false||!isMask(clickPosition))?clickPosition:lastPosition);}},0);}).bind('dblclick.inputmask',function(){var input=this;setTimeout(function(){caret(input,0,lastPosition);},0);}).bind("keydown.inputmask",keydownEvent).bind("keypress.inputmask",keypressEvent).bind("keyup.inputmask",keyupEvent).bind(pasteEvent+".inputmask, dragdrop.inputmask, drop.inputmask",function(){var input=this;setTimeout(function(){caret(input,checkVal(input,buffer,true));},0);}).bind('setvalue.inputmask',function(){var input=this;undoBuffer=input._valueGet();checkVal(input,buffer,true);if(input._valueGet()==_buffer.join(''))
input._valueSet('');}).bind('complete.inputmask',opts.oncomplete).bind('incomplete.inputmask',opts.onincomplete).bind('cleared.inputmask',opts.oncleared);lastPosition=checkVal(el,buffer,true);var activeElement;try{activeElement=document.activeElement;}catch(e){}
if(activeElement===el){$input.addClass('focus.inputmask');caret(el,lastPosition);}else if(opts.clearMaskOnLostFocus){if(el._valueGet()==_buffer.join('')){el._valueSet('');}else{clearOptionalTail(el,buffer);}}
installEventRuler(el);function isComplete(npt){var complete=true,nptValue=npt._valueGet(),ml=nptValue.length;for(var i=0;i<ml;i++){if(isMask(i)&&nptValue.charAt(i)==getPlaceHolder(i)){complete=false;break;}}
return complete;}
function installEventRuler(npt){var events=$._data(npt).events;$.each(events,function(eventType,eventHandlers){$(npt).bind(eventType+".inputmask",function(event){if(this.readOnly||this.disabled){event.stopPropagation();event.stopImmediatePropagation();event.preventDefault();return false;}});var ourHandler=eventHandlers[eventHandlers.length-1];for(var i=eventHandlers.length-1;i>0;i--){eventHandlers[i]=eventHandlers[i-1];}
eventHandlers[0]=ourHandler;});}
function patchValueProperty(npt){var valueProperty;if(Object.getOwnPropertyDescriptor)
valueProperty=Object.getOwnPropertyDescriptor(npt,"value");if(valueProperty&&valueProperty.get){if(!npt._valueGet){npt._valueGet=valueProperty.get;npt._valueSet=valueProperty.set;Object.defineProperty(npt,"value",{get:function(){var $self=$(this),inputData=$(this).data('inputmask');return inputData&&inputData['autoUnmask']?$self.inputmask('unmaskedvalue'):this._valueGet()!=inputData['_buffer'].join('')?this._valueGet():'';},set:function(value){this._valueSet(value);$(this).triggerHandler('setvalue.inputmask');}});}}else if(document.__lookupGetter__&&npt.__lookupGetter__("value")){if(!npt._valueGet){npt._valueGet=npt.__lookupGetter__("value");npt._valueSet=npt.__lookupSetter__("value");npt.__defineGetter__("value",function(){var $self=$(this),inputData=$(this).data('inputmask');return inputData&&inputData['autoUnmask']?$self.inputmask('unmaskedvalue'):this._valueGet()!=inputData['_buffer'].join('')?this._valueGet():'';});npt.__defineSetter__("value",function(value){this._valueSet(value);$(this).triggerHandler('setvalue.inputmask');});}}else{if(!npt._valueGet){npt._valueGet=function(){return this.value;}
npt._valueSet=function(value){this.value=value;}}
if($.fn.val.inputmaskpatch!=true){$.fn.val=function(){if(arguments.length==0){var $self=$(this);if($self.data('inputmask')){if($self.data('inputmask')['autoUnmask'])
return $self.inputmask('unmaskedvalue');else{var result=$.inputmask.val.apply($self);return result!=$self.data('inputmask')['_buffer'].join('')?result:'';}}else return $.inputmask.val.apply($self);}else{var args=arguments;return this.each(function(){var $self=$(this);var result=$.inputmask.val.apply($self,args);if($self.data('inputmask'))$self.triggerHandler('setvalue.inputmask');return result;});}};$.extend($.fn.val,{inputmaskpatch:true});}}}
function shiftL(start,end,c){while(!isMask(start)&&start-1>=0)start--;for(var i=start;i<end&&i<getMaskLength();i++){if(isMask(i)){setReTargetPlaceHolder(buffer,i);var j=seekNext(buffer,i);var p=getBufferElement(buffer,j);if(p!=getPlaceHolder(j)){if(j<getMaskLength()&&isValid(i,p,buffer,true)!==false&&tests[determineTestPosition(i)].def==tests[determineTestPosition(j)].def){setBufferElement(buffer,i,getBufferElement(buffer,j));setReTargetPlaceHolder(buffer,j);}else{if(isMask(i))
break;}}else if(c==undefined)break;}else{setReTargetPlaceHolder(buffer,i);}}
if(c!=undefined)
setBufferElement(buffer,isRTL?end:seekPrevious(buffer,end),c);buffer=truncateInput(buffer.join(''),isRTL).split('');if(buffer.length==0)buffer=_buffer.slice();return start;}
function shiftR(start,end,c,full){for(var i=start;i<=end&&i<getMaskLength();i++){if(isMask(i)){var t=getBufferElement(buffer,i);setBufferElement(buffer,i,c);if(t!=getPlaceHolder(i)){var j=seekNext(buffer,i);if(j<getMaskLength()){if(isValid(j,t,buffer,true)!==false&&tests[determineTestPosition(i)].def==tests[determineTestPosition(j)].def)
c=t;else{if(isMask(j))
break;else c=t;}}else break;}else if(full!==true)break;}else
setReTargetPlaceHolder(buffer,i);}
var lengthBefore=buffer.length;buffer=truncateInput(buffer.join(''),isRTL).split('');if(buffer.length==0)buffer=_buffer.slice();return end-(lengthBefore-buffer.length);};function keydownEvent(e){skipKeyPressEvent=false;var input=this,k=e.keyCode,pos=caret(input);if(opts.numericInput){var nptStr=input._valueGet();var radixPosition=nptStr.indexOf(opts.radixPoint);if(radixPosition!=-1){isRTL=pos.begin<=radixPosition||pos.end<=radixPosition;}}
if(k==opts.keyCode.BACKSPACE||k==opts.keyCode.DELETE||(iphone&&k==127)){var maskL=getMaskLength();if(pos.begin==0&&pos.end==maskL){buffer=_buffer.slice();writeBuffer(input,buffer);caret(input,checkVal(input,buffer,false));}else if((pos.end-pos.begin)>1||((pos.end-pos.begin)==1&&opts.insertMode)){clearBuffer(buffer,pos.begin,pos.end);writeBuffer(input,buffer,isRTL?checkVal(input,buffer,false):pos.begin);}else{var beginPos=pos.begin-(k==opts.keyCode.DELETE?0:1);if(beginPos<firstMaskPos&&k==opts.keyCode.DELETE){beginPos=firstMaskPos;}
if(beginPos>=firstMaskPos){if(opts.numericInput&&opts.greedy&&k==opts.keyCode.DELETE&&buffer[beginPos]==opts.radixPoint){beginPos=seekNext(buffer,beginPos);isRTL=false;}
if(isRTL){beginPos=shiftR(firstMaskPos,beginPos,getPlaceHolder(beginPos),true);beginPos=(opts.numericInput&&opts.greedy&&k==opts.keyCode.BACKSPACE&&buffer[beginPos+1]==opts.radixPoint)?beginPos+1:seekNext(buffer,beginPos);}else beginPos=shiftL(beginPos,maskL);writeBuffer(input,buffer,beginPos);}}
if(input._valueGet()==_buffer.join(''))
$(input).trigger('cleared');return false;}else if(k==opts.keyCode.END||k==opts.keyCode.PAGE_DOWN){setTimeout(function(){var caretPos=checkVal(input,buffer,false,true);if(!opts.insertMode&&caretPos==getMaskLength()&&!e.shiftKey)caretPos--;caret(input,e.shiftKey?pos.begin:caretPos,caretPos);},0);return false;}else if(k==opts.keyCode.HOME||k==opts.keyCode.PAGE_UP){caret(input,0,e.shiftKey?pos.begin:0);return false;}
else if(k==opts.keyCode.ESCAPE){input._valueSet(undoBuffer);caret(input,0,checkVal(input,buffer));return false;}else if(k==opts.keyCode.INSERT){opts.insertMode=!opts.insertMode;caret(input,!opts.insertMode&&pos.begin==getMaskLength()?pos.begin-1:pos.begin);return false;}else if(e.ctrlKey&&k==88){setTimeout(function(){caret(input,checkVal(input,buffer,true));},0);}else if(!opts.insertMode){if(k==opts.keyCode.RIGHT){var caretPos=pos.begin==pos.end?pos.end+1:pos.end;caretPos=caretPos<getMaskLength()?caretPos:pos.end;caret(input,e.shiftKey?pos.begin:caretPos,e.shiftKey?caretPos+1:caretPos);return false;}else if(k==opts.keyCode.LEFT){var caretPos=pos.begin-1;caretPos=caretPos>0?caretPos:0;caret(input,caretPos,e.shiftKey?pos.end:caretPos);return false;}}
opts.onKeyDown.call(this,e,opts);ignorable=$.inArray(k,opts.ignorables)!=-1;}
function keypressEvent(e){if(skipKeyPressEvent)return false;skipKeyPressEvent=true;var input=this,$input=$(input);e=e||window.event;var k=e.which||e.charCode||e.keyCode;if(opts.numericInput&&k==opts.radixPoint.charCodeAt(opts.radixPoint.length-1)){var nptStr=input._valueGet();var radixPosition=nptStr.indexOf(opts.radixPoint);caret(input,seekNext(buffer,radixPosition!=-1?radixPosition:getMaskLength()));}
if(e.ctrlKey||e.altKey||e.metaKey||ignorable){return true;}else{if(k){$input.trigger('input');var pos=caret(input),c=String.fromCharCode(k),maskL=getMaskLength();clearBuffer(buffer,pos.begin,pos.end);if(isRTL){var p=opts.numericInput?pos.end:seekPrevious(buffer,pos.end),np;if((np=isValid(p==maskL||getBufferElement(buffer,p)==opts.radixPoint?seekPrevious(buffer,p):p,c,buffer,false))!==false){if(np!==true){p=np.pos||pos;c=np.c||c;}
var firstUnmaskedPosition=firstMaskPos;if(opts.insertMode==true){if(opts.greedy==true){var bfrClone=buffer.slice();while(getBufferElement(bfrClone,firstUnmaskedPosition,true)!=getPlaceHolder(firstUnmaskedPosition)&&firstUnmaskedPosition<=p){firstUnmaskedPosition=firstUnmaskedPosition==maskL?(maskL+1):seekNext(buffer,firstUnmaskedPosition);}}
if(firstUnmaskedPosition<=p&&(opts.greedy||buffer.length<maskL)){if(buffer[firstMaskPos]!=getPlaceHolder(firstMaskPos)&&buffer.length<maskL){var offset=prepareBuffer(buffer,-1,isRTL);if(pos.end!=0)p=p+offset;maskL=buffer.length;}
shiftL(firstUnmaskedPosition,opts.numericInput?seekPrevious(buffer,p):p,c);}else return false;}else setBufferElement(buffer,opts.numericInput?seekPrevious(buffer,p):p,c);writeBuffer(input,buffer,opts.numericInput&&p==0?seekNext(buffer,p):p);setTimeout(function(){if(isComplete(input))
$input.trigger("complete");},0);}else if(android)writeBuffer(input,buffer,pos.begin);}
else{var p=seekNext(buffer,pos.begin-1),np;prepareBuffer(buffer,p,isRTL);if((np=isValid(p,c,buffer,false))!==false){if(np!==true){p=np.pos||p;c=np.c||c;}
if(opts.insertMode==true){var lastUnmaskedPosition=getMaskLength();var bfrClone=buffer.slice();while(getBufferElement(bfrClone,lastUnmaskedPosition,true)!=getPlaceHolder(lastUnmaskedPosition)&&lastUnmaskedPosition>=p){lastUnmaskedPosition=lastUnmaskedPosition==0?-1:seekPrevious(buffer,lastUnmaskedPosition);}
if(lastUnmaskedPosition>=p)
shiftR(p,buffer.length,c);else return false;}
else setBufferElement(buffer,p,c);var next=seekNext(buffer,p);writeBuffer(input,buffer,next);setTimeout(function(){if(isComplete(input))
$input.trigger("complete");},0);}else if(android)writeBuffer(input,buffer,pos.begin);}
return false;}}}
function keyupEvent(e){var $input=$(this),input=this;var k=e.keyCode;opts.onKeyUp.call(this,e,opts);if(k==opts.keyCode.TAB&&$input.hasClass('focus.inputmask')&&input._valueGet().length==0){buffer=_buffer.slice();writeBuffer(input,buffer);if(!isRTL)caret(input,0);undoBuffer=input._valueGet();}}}};}})(jQuery);(function($){var JQ_LT_17=parseFloat($.fn.jquery)<1.7;function eventsData($el){return JQ_LT_17?$el.data('events'):$._data($el[0]).events;}
function moveHandlerToTop($el,eventName,isDelegated){var data=eventsData($el);var events=data[eventName];if(!JQ_LT_17){var handler=isDelegated?events.splice(events.delegateCount-1,1)[0]:events.pop();events.splice(isDelegated?0:(events.delegateCount||0),0,handler);return;}
if(isDelegated){data.live.unshift(data.live.pop());}else{events.unshift(events.pop());}}
function moveEventHandlers($elems,eventsString,isDelegate){var events=eventsString.split(/\s+/);$elems.each(function(){for(var i=0;i<events.length;++i){var pureEventName=$.trim(events[i]).match(/[^\.]+/i)[0];moveHandlerToTop($(this),pureEventName,isDelegate);}});}
$.fn.bindFirst=function(){var args=$.makeArray(arguments);var eventsString=args.shift();if(eventsString){$.fn.bind.apply(this,arguments);moveEventHandlers(this,eventsString);}
return this;};$.fn.delegateFirst=function(){var args=$.makeArray(arguments);var eventsString=args[1];if(eventsString){args.splice(0,2);$.fn.delegate.apply(this,arguments);moveEventHandlers(this,eventsString,true);}
return this;};$.fn.liveFirst=function(){var args=$.makeArray(arguments);args.unshift(this.selector);$.fn.delegateFirst.apply($(document),args);return this;};if(!JQ_LT_17){$.fn.onFirst=function(types,selector){var $el=$(this);var isDelegated=typeof selector==='string';$.fn.on.apply($el,arguments);if(typeof types==='object'){for(type in types)
if(types.hasOwnProperty(type)){moveEventHandlers($el,type,isDelegated);}}else if(typeof types==='string'){moveEventHandlers($el,types,isDelegated);}
return $el;};}})(jQuery);(function($){$.masksLoad=function(url){var maskList;$.ajax({url:url,async:false,dataType:'json',success:function(response){maskList=response;}});return maskList;}
$.masksSort=function(maskList,defs,match,key){maskList.sort(function(a,b){var ia=0,ib=0;for(;(ia<a[key].length&&ib<b[key].length);){var cha=a[key].charAt(ia);var chb=b[key].charAt(ib);if(!match.test(cha)){ia++;continue;}
if(!match.test(chb)){ib++;continue;}
if($.inArray(cha,defs)!=-1&&$.inArray(chb,defs)==-1){return 1;}
if($.inArray(cha,defs)==-1&&$.inArray(chb,defs)!=-1){return-1;}
if($.inArray(cha,defs)==-1&&$.inArray(chb,defs)==-1){if(cha!=chb){return cha<chb?-1:1;}}
ia++;ib++;}
for(;(ia<a[key].length||ib<b[key].length);){if(ia<a[key].length&&!match.test(a[key].charAt(ia))){ia++;continue;}
if(ib<b[key].length&&!match.test(b[key].charAt(ib))){ib++;continue;}
if(ia<a[key].length){return 1;}
if(ib<b[key].length){return-1;}}
return 0;});return maskList;}
$.fn.inputmasks=function(maskOpts,mode){var caret=function(begin,end){if(typeof begin=='number'){end=(typeof end=='number')?end:begin;if(this.setSelectionRange){this.setSelectionRange(begin,end);}else if(this.createTextRange){var range=this.createTextRange();range.collapse(true);range.moveEnd('character',end);range.moveStart('character',begin);range.select();}}else{if(this.setSelectionRange){begin=this.selectionStart;end=this.selectionEnd;}else if(document.selection&&document.selection.createRange){var range=document.selection.createRange();begin=0-range.duplicate().moveStart('character',-100000);end=begin+range.text.length;}
return{begin:begin,end:end};}};var keys=Object.keys||function(obj){if(obj!==Object(obj)){throw new TypeError('Invalid object');}
var keys=[];for(var key in obj){keys[keys.length]=key;}
return keys;};maskOpts=$.extend(true,{onMaskChange:$.noop},maskOpts);var defs={};for(var def in maskOpts.inputmask.definitions){var validator=maskOpts.inputmask.definitions[def].validator;switch(typeof validator){case"string":defs[def]=new RegExp(validator);break;case"object":if("test"in maskOpts.definitions[def].validator){defs[def]=validator;}
break;case"function":defs[def]={test:validator};break;}}
maskOpts.inputmask.definitions[maskOpts.replace]={validator:maskOpts.match.source,cardinality:1};var iphone=navigator.userAgent.match(/iphone/i)!=null;var oldmatch=false;var placeholder=$.extend(true,{},$.inputmask.defaults,maskOpts.inputmask).placeholder;var insertMode=$.extend(true,{},$.inputmask.defaults,maskOpts.inputmask).insertMode;var maskMatch=function(text){var mtxt="";for(var i=0;i<text.length;i++){var ch=text.charAt(i);if(ch==placeholder){break;}
if(maskOpts.match.test(ch)){mtxt+=ch;}}
for(var mid in maskOpts.list){var mask=maskOpts.list[mid][maskOpts.listKey];var pass=true;for(var it=0,im=0;(it<mtxt.length&&im<mask.length);){var chm=mask.charAt(im);var cht=mtxt.charAt(it);if(!maskOpts.match.test(chm)&&!(chm in defs)){im++;continue;}
if(((chm in defs)&&defs[chm].test(cht))||(cht==chm)){it++;im++;}else{pass=false;break;}}
if(pass&&it==mtxt.length){var determined=mask.substr(im).search(maskOpts.match)==-1;mask=mask.replace(new RegExp([maskOpts.match.source].concat(keys(defs)).join('|'),'g'),maskOpts.replace);var completed=mask.substr(im).search(maskOpts.replace)==-1;return{mask:mask,obj:maskOpts.list[mid],determined:determined,completed:completed};}}
return false;}
var caretApply=function(oldMask,newMask,oldPos){if(!oldMask){return 0;}
var pos=0,startPos=0;for(;pos<oldPos.begin;pos++){if(oldMask.charAt(pos)==maskOpts.replace){startPos++;}}
var endPos=0;for(;pos<oldPos.end;pos++){if(oldMask.charAt(pos)==maskOpts.replace){endPos++;}}
for(pos=0;(pos<newMask.length&&(startPos>0||newMask.charAt(pos)!=maskOpts.replace));pos++){if(newMask.charAt(pos)==maskOpts.replace){startPos--;}}
startPos=pos;for(;(pos<newMask.length&&endPos>0);pos++){if(newMask.charAt(pos)==maskOpts.replace){endPos--;}}
endPos=pos;return{begin:startPos,end:endPos};}
var maskUnbind=function(){$(this).unbind("keypress.inputmask",masksKeyPress).unbind("input.inputmask",masksPaste).unbind("paste.inputmask",masksPaste).unbind("dragdrop.inputmask",masksPaste).unbind("drop.inputmask",masksPaste).unbind("keydown.inputmask",masksKeyDown).unbind("setvalue.inputmask",masksSetValue).unbind("blur.inputmask",masksChange);}
var maskRebind=function(){maskUnbind.call(this);$(this).bindFirst("keypress.inputmask",masksKeyPress).bindFirst("input.inputmask",masksPaste).bindFirst("paste.inputmask",masksPaste).bindFirst("dragdrop.inputmask",masksPaste).bindFirst("drop.inputmask",masksPaste).bindFirst("keydown.inputmask",masksKeyDown).bindFirst("setvalue.inputmask",masksSetValue).bind("blur.inputmask",masksChange);}
var maskApply=function(match,newtext){if(match&&(newtext||match.mask!=oldmatch.mask)){var caretPos;if(!newtext){caretPos=caretApply(oldmatch.mask,match.mask,caret.call(this));}
if(newtext){if(this._valueSet){this._valueSet(newtext);}else{this.value=newtext;}}
$(this).inputmask(match.mask,$.extend(true,maskOpts.inputmask,{insertMode:insertMode}));if(!newtext){caret.call(this,caretPos.begin,caretPos.end);}}
oldmatch=match;maskOpts.onMaskChange.call(this,match.obj,match.determined,match.completed);return true;}
var keyboardApply=function(e,text,insert){var match=maskMatch(text);if(!match||match.obj!=oldmatch.obj||match.determined!=oldmatch.determined){if(match){maskUnbind.call(this);if(insert){maskApply.call(this,match);$(this).trigger(e);}else{$(this).trigger(e);maskApply.call(this,match);}
maskRebind.call(this);}
e.stopImmediatePropagation();return false;}
return true;}
var masksKeyDown=function(e){e=e||window.event;var k=e.which||e.charCode||e.keyCode;if(k==8||k==46||(iphone&&k==127)){var text=this._valueGet();var caretPos=caret.call(this);if(caretPos.begin==caretPos.end||(!insertMode&&caretPos.begin==caretPos.end-1)){var pos=caretPos.begin;do{if(k!=46){pos--;}
var chr=text.charAt(pos);text=text.substring(0,pos)+text.substring(pos+1);}while(pos>0&&pos<text.length&&chr!=placeholder&&!maskOpts.match.test(chr));}else{var test=text.substring(0,caretPos.begin)+text.substring(caretPos.end);if(test.search(maskOpts.match)==-1){text=test;}}
return keyboardApply.call(this,e,text,false);}
if(k==45){insertMode=!insertMode;}
return true;}
var masksKeyPress=function(e){var text=this._valueGet();e=e||window.event;var k=e.which||e.charCode||e.keyCode,c=String.fromCharCode(k);caretPos=caret.call(this);text=text.substring(0,caretPos.begin)+c+text.substring(caretPos.end);return keyboardApply.call(this,e,text,true);}
var masksChange=function(e){var match=maskMatch(this._valueGet());maskApply.call(this,match);maskRebind.call(this);return true;}
var masksSetValue=function(e){maskInit.call(this);e.stopImmediatePropagation();return true;}
var maskInit=function(){var text;if(this._valueGet){text=this._valueGet();}else{text=this.value;}
var match=maskMatch(text);while(!match&&text.length>0){text=text.substr(0,text.length-1);match=maskMatch(text);}
maskApply.call(this,match,text);maskRebind.call(this);}
var masksPaste=function(e){var input=this;setTimeout(function(){maskInit.call(input);},0);e.stopImmediatePropagation();return true;}
switch(mode){case"isCompleted":var res=maskMatch((this[0]._valueGet&&this[0]._valueGet())||this[0].value);return(res&&res.completed);default:this.each(function(){maskInit.call(this);});return this;}}})(jQuery);;(function(e){"function"==typeof define&&define.amd?define(["jquery"],e):e("undefined"!=typeof jQuery?jQuery:window.Zepto)})(function(e){"use strict";function t(t){var r=t.data;t.isDefaultPrevented()||(t.preventDefault(),e(t.target).ajaxSubmit(r))}function r(t){var r=t.target,a=e(r);if(!a.is("[type=submit],[type=image]")){var n=a.closest("[type=submit]");if(0===n.length)return;r=n[0]}var i=this;if(i.clk=r,"image"==r.type)if(void 0!==t.offsetX)i.clk_x=t.offsetX,i.clk_y=t.offsetY;else if("function"==typeof e.fn.offset){var o=a.offset();i.clk_x=t.pageX-o.left,i.clk_y=t.pageY-o.top}else i.clk_x=t.pageX-r.offsetLeft,i.clk_y=t.pageY-r.offsetTop;setTimeout(function(){i.clk=i.clk_x=i.clk_y=null},100)}function a(){if(e.fn.ajaxSubmit.debug){var t="[jquery.form] "+Array.prototype.join.call(arguments,"");window.console&&window.console.log?window.console.log(t):window.opera&&window.opera.postError&&window.opera.postError(t)}}var n={};n.fileapi=void 0!==e("<input type='file'/>").get(0).files,n.formdata=void 0!==window.FormData;var i=!!e.fn.prop;e.fn.attr2=function(){if(!i)return this.attr.apply(this,arguments);var e=this.prop.apply(this,arguments);return e&&e.jquery||"string"==typeof e?e:this.attr.apply(this,arguments)},e.fn.ajaxSubmit=function(t){function r(r){var a,n,i=e.param(r,t.traditional).split("&"),o=i.length,s=[];for(a=0;o>a;a++)i[a]=i[a].replace(/\+/g," "),n=i[a].split("="),s.push([decodeURIComponent(n[0]),decodeURIComponent(n[1])]);return s}function o(a){for(var n=new FormData,i=0;a.length>i;i++)n.append(a[i].name,a[i].value);if(t.extraData){var o=r(t.extraData);for(i=0;o.length>i;i++)o[i]&&n.append(o[i][0],o[i][1])}t.data=null;var s=e.extend(!0,{},e.ajaxSettings,t,{contentType:!1,processData:!1,cache:!1,type:u||"POST"});t.uploadProgress&&(s.xhr=function(){var r=e.ajaxSettings.xhr();return r.upload&&r.upload.addEventListener("progress",function(e){var r=0,a=e.loaded||e.position,n=e.total;e.lengthComputable&&(r=Math.ceil(100*(a/n))),t.uploadProgress(e,a,n,r)},!1),r}),s.data=null;var c=s.beforeSend;return s.beforeSend=function(e,r){r.data=t.formData?t.formData:n,c&&c.call(this,e,r)},e.ajax(s)}function s(r){function n(e){var t=null;try{e.contentWindow&&(t=e.contentWindow.document)}catch(r){a("cannot get iframe.contentWindow document: "+r)}if(t)return t;try{t=e.contentDocument?e.contentDocument:e.document}catch(r){a("cannot get iframe.contentDocument: "+r),t=e.document}return t}function o(){function t(){try{var e=n(g).readyState;a("state = "+e),e&&"uninitialized"==e.toLowerCase()&&setTimeout(t,50)}catch(r){a("Server abort: ",r," (",r.name,")"),s(k),j&&clearTimeout(j),j=void 0}}var r=f.attr2("target"),i=f.attr2("action");w.setAttribute("target",p),(!u||/post/i.test(u))&&w.setAttribute("method","POST"),i!=m.url&&w.setAttribute("action",m.url),m.skipEncodingOverride||u&&!/post/i.test(u)||f.attr({encoding:"multipart/form-data",enctype:"multipart/form-data"}),m.timeout&&(j=setTimeout(function(){T=!0,s(D)},m.timeout));var o=[];try{if(m.extraData)for(var c in m.extraData)m.extraData.hasOwnProperty(c)&&(e.isPlainObject(m.extraData[c])&&m.extraData[c].hasOwnProperty("name")&&m.extraData[c].hasOwnProperty("value")?o.push(e('<input type="hidden" name="'+m.extraData[c].name+'">').val(m.extraData[c].value).appendTo(w)[0]):o.push(e('<input type="hidden" name="'+c+'">').val(m.extraData[c]).appendTo(w)[0]));m.iframeTarget||v.appendTo("body"),g.attachEvent?g.attachEvent("onload",s):g.addEventListener("load",s,!1),setTimeout(t,15);try{w.submit()}catch(l){var d=document.createElement("form").submit;d.apply(w)}}finally{w.setAttribute("action",i),r?w.setAttribute("target",r):f.removeAttr("target"),e(o).remove()}}function s(t){if(!x.aborted&&!F){if(M=n(g),M||(a("cannot access response document"),t=k),t===D&&x)return x.abort("timeout"),S.reject(x,"timeout"),void 0;if(t==k&&x)return x.abort("server abort"),S.reject(x,"error","server abort"),void 0;if(M&&M.location.href!=m.iframeSrc||T){g.detachEvent?g.detachEvent("onload",s):g.removeEventListener("load",s,!1);var r,i="success";try{if(T)throw"timeout";var o="xml"==m.dataType||M.XMLDocument||e.isXMLDoc(M);if(a("isXml="+o),!o&&window.opera&&(null===M.body||!M.body.innerHTML)&&--O)return a("requeing onLoad callback, DOM not available"),setTimeout(s,250),void 0;var u=M.body?M.body:M.documentElement;x.responseText=u?u.innerHTML:null,x.responseXML=M.XMLDocument?M.XMLDocument:M,o&&(m.dataType="xml"),x.getResponseHeader=function(e){var t={"content-type":m.dataType};return t[e.toLowerCase()]},u&&(x.status=Number(u.getAttribute("status"))||x.status,x.statusText=u.getAttribute("statusText")||x.statusText);var c=(m.dataType||"").toLowerCase(),l=/(json|script|text)/.test(c);if(l||m.textarea){var f=M.getElementsByTagName("textarea")[0];if(f)x.responseText=f.value,x.status=Number(f.getAttribute("status"))||x.status,x.statusText=f.getAttribute("statusText")||x.statusText;else if(l){var p=M.getElementsByTagName("pre")[0],h=M.getElementsByTagName("body")[0];p?x.responseText=p.textContent?p.textContent:p.innerText:h&&(x.responseText=h.textContent?h.textContent:h.innerText)}}else"xml"==c&&!x.responseXML&&x.responseText&&(x.responseXML=X(x.responseText));try{E=_(x,c,m)}catch(b){i="parsererror",x.error=r=b||i}}catch(b){a("error caught: ",b),i="error",x.error=r=b||i}x.aborted&&(a("upload aborted"),i=null),x.status&&(i=x.status>=200&&300>x.status||304===x.status?"success":"error"),"success"===i?(m.success&&m.success.call(m.context,E,"success",x),S.resolve(x.responseText,"success",x),d&&e.event.trigger("ajaxSuccess",[x,m])):i&&(void 0===r&&(r=x.statusText),m.error&&m.error.call(m.context,x,i,r),S.reject(x,"error",r),d&&e.event.trigger("ajaxError",[x,m,r])),d&&e.event.trigger("ajaxComplete",[x,m]),d&&!--e.active&&e.event.trigger("ajaxStop"),m.complete&&m.complete.call(m.context,x,i),F=!0,m.timeout&&clearTimeout(j),setTimeout(function(){m.iframeTarget?v.attr("src",m.iframeSrc):v.remove(),x.responseXML=null},100)}}}var c,l,m,d,p,v,g,x,b,y,T,j,w=f[0],S=e.Deferred();if(S.abort=function(e){x.abort(e)},r)for(l=0;h.length>l;l++)c=e(h[l]),i?c.prop("disabled",!1):c.removeAttr("disabled");if(m=e.extend(!0,{},e.ajaxSettings,t),m.context=m.context||m,p="jqFormIO"+(new Date).getTime(),m.iframeTarget?(v=e(m.iframeTarget),y=v.attr2("name"),y?p=y:v.attr2("name",p)):(v=e('<iframe name="'+p+'" src="'+m.iframeSrc+'" />'),v.css({position:"absolute",top:"-1000px",left:"-1000px"})),g=v[0],x={aborted:0,responseText:null,responseXML:null,status:0,statusText:"n/a",getAllResponseHeaders:function(){},getResponseHeader:function(){},setRequestHeader:function(){},abort:function(t){var r="timeout"===t?"timeout":"aborted";a("aborting upload... "+r),this.aborted=1;try{g.contentWindow.document.execCommand&&g.contentWindow.document.execCommand("Stop")}catch(n){}v.attr("src",m.iframeSrc),x.error=r,m.error&&m.error.call(m.context,x,r,t),d&&e.event.trigger("ajaxError",[x,m,r]),m.complete&&m.complete.call(m.context,x,r)}},d=m.global,d&&0===e.active++&&e.event.trigger("ajaxStart"),d&&e.event.trigger("ajaxSend",[x,m]),m.beforeSend&&m.beforeSend.call(m.context,x,m)===!1)return m.global&&e.active--,S.reject(),S;if(x.aborted)return S.reject(),S;b=w.clk,b&&(y=b.name,y&&!b.disabled&&(m.extraData=m.extraData||{},m.extraData[y]=b.value,"image"==b.type&&(m.extraData[y+".x"]=w.clk_x,m.extraData[y+".y"]=w.clk_y)));var D=1,k=2,A=e("meta[name=csrf-token]").attr("content"),L=e("meta[name=csrf-param]").attr("content");L&&A&&(m.extraData=m.extraData||{},m.extraData[L]=A),m.forceSync?o():setTimeout(o,10);var E,M,F,O=50,X=e.parseXML||function(e,t){return window.ActiveXObject?(t=new ActiveXObject("Microsoft.XMLDOM"),t.async="false",t.loadXML(e)):t=(new DOMParser).parseFromString(e,"text/xml"),t&&t.documentElement&&"parsererror"!=t.documentElement.nodeName?t:null},C=e.parseJSON||function(e){return window.eval("("+e+")")},_=function(t,r,a){var n=t.getResponseHeader("content-type")||"",i="xml"===r||!r&&n.indexOf("xml")>=0,o=i?t.responseXML:t.responseText;return i&&"parsererror"===o.documentElement.nodeName&&e.error&&e.error("parsererror"),a&&a.dataFilter&&(o=a.dataFilter(o,r)),"string"==typeof o&&("json"===r||!r&&n.indexOf("json")>=0?o=C(o):("script"===r||!r&&n.indexOf("javascript")>=0)&&e.globalEval(o)),o};return S}if(!this.length)return a("ajaxSubmit: skipping submit process - no element selected"),this;var u,c,l,f=this;"function"==typeof t?t={success:t}:void 0===t&&(t={}),u=t.type||this.attr2("method"),c=t.url||this.attr2("action"),l="string"==typeof c?e.trim(c):"",l=l||window.location.href||"",l&&(l=(l.match(/^([^#]+)/)||[])[1]),t=e.extend(!0,{url:l,success:e.ajaxSettings.success,type:u||e.ajaxSettings.type,iframeSrc:/^https/i.test(window.location.href||"")?"javascript:false":"about:blank"},t);var m={};if(this.trigger("form-pre-serialize",[this,t,m]),m.veto)return a("ajaxSubmit: submit vetoed via form-pre-serialize trigger"),this;if(t.beforeSerialize&&t.beforeSerialize(this,t)===!1)return a("ajaxSubmit: submit aborted via beforeSerialize callback"),this;var d=t.traditional;void 0===d&&(d=e.ajaxSettings.traditional);var p,h=[],v=this.formToArray(t.semantic,h);if(t.data&&(t.extraData=t.data,p=e.param(t.data,d)),t.beforeSubmit&&t.beforeSubmit(v,this,t)===!1)return a("ajaxSubmit: submit aborted via beforeSubmit callback"),this;if(this.trigger("form-submit-validate",[v,this,t,m]),m.veto)return a("ajaxSubmit: submit vetoed via form-submit-validate trigger"),this;var g=e.param(v,d);p&&(g=g?g+"&"+p:p),"GET"==t.type.toUpperCase()?(t.url+=(t.url.indexOf("?")>=0?"&":"?")+g,t.data=null):t.data=g;var x=[];if(t.resetForm&&x.push(function(){f.resetForm()}),t.clearForm&&x.push(function(){f.clearForm(t.includeHidden)}),!t.dataType&&t.target){var b=t.success||function(){};x.push(function(r){var a=t.replaceTarget?"replaceWith":"html";e(t.target)[a](r).each(b,arguments)})}else t.success&&x.push(t.success);if(t.success=function(e,r,a){for(var n=t.context||this,i=0,o=x.length;o>i;i++)x[i].apply(n,[e,r,a||f,f])},t.error){var y=t.error;t.error=function(e,r,a){var n=t.context||this;y.apply(n,[e,r,a,f])}}if(t.complete){var T=t.complete;t.complete=function(e,r){var a=t.context||this;T.apply(a,[e,r,f])}}var j=e("input[type=file]:enabled",this).filter(function(){return""!==e(this).val()}),w=j.length>0,S="multipart/form-data",D=f.attr("enctype")==S||f.attr("encoding")==S,k=n.fileapi&&n.formdata;a("fileAPI :"+k);var A,L=(w||D)&&!k;t.iframe!==!1&&(t.iframe||L)?t.closeKeepAlive?e.get(t.closeKeepAlive,function(){A=s(v)}):A=s(v):A=(w||D)&&k?o(v):e.ajax(t),f.removeData("jqxhr").data("jqxhr",A);for(var E=0;h.length>E;E++)h[E]=null;return this.trigger("form-submit-notify",[this,t]),this},e.fn.ajaxForm=function(n){if(n=n||{},n.delegation=n.delegation&&e.isFunction(e.fn.on),!n.delegation&&0===this.length){var i={s:this.selector,c:this.context};return!e.isReady&&i.s?(a("DOM not ready, queuing ajaxForm"),e(function(){e(i.s,i.c).ajaxForm(n)}),this):(a("terminating; zero elements found by selector"+(e.isReady?"":" (DOM not ready)")),this)}return n.delegation?(e(document).off("submit.form-plugin",this.selector,t).off("click.form-plugin",this.selector,r).on("submit.form-plugin",this.selector,n,t).on("click.form-plugin",this.selector,n,r),this):this.ajaxFormUnbind().bind("submit.form-plugin",n,t).bind("click.form-plugin",n,r)},e.fn.ajaxFormUnbind=function(){return this.unbind("submit.form-plugin click.form-plugin")},e.fn.formToArray=function(t,r){var a=[];if(0===this.length)return a;var i=this[0],o=t?i.getElementsByTagName("*"):i.elements;if(!o)return a;var s,u,c,l,f,m,d;for(s=0,m=o.length;m>s;s++)if(f=o[s],c=f.name,c&&!f.disabled)if(t&&i.clk&&"image"==f.type)i.clk==f&&(a.push({name:c,value:e(f).val(),type:f.type}),a.push({name:c+".x",value:i.clk_x},{name:c+".y",value:i.clk_y}));else if(l=e.fieldValue(f,!0),l&&l.constructor==Array)for(r&&r.push(f),u=0,d=l.length;d>u;u++)a.push({name:c,value:l[u]});else if(n.fileapi&&"file"==f.type){r&&r.push(f);var p=f.files;if(p.length)for(u=0;p.length>u;u++)a.push({name:c,value:p[u],type:f.type});else a.push({name:c,value:"",type:f.type})}else null!==l&&l!==void 0&&(r&&r.push(f),a.push({name:c,value:l,type:f.type,required:f.required}));if(!t&&i.clk){var h=e(i.clk),v=h[0];c=v.name,c&&!v.disabled&&"image"==v.type&&(a.push({name:c,value:h.val()}),a.push({name:c+".x",value:i.clk_x},{name:c+".y",value:i.clk_y}))}return a},e.fn.formSerialize=function(t){return e.param(this.formToArray(t))},e.fn.fieldSerialize=function(t){var r=[];return this.each(function(){var a=this.name;if(a){var n=e.fieldValue(this,t);if(n&&n.constructor==Array)for(var i=0,o=n.length;o>i;i++)r.push({name:a,value:n[i]});else null!==n&&n!==void 0&&r.push({name:this.name,value:n})}}),e.param(r)},e.fn.fieldValue=function(t){for(var r=[],a=0,n=this.length;n>a;a++){var i=this[a],o=e.fieldValue(i,t);null===o||void 0===o||o.constructor==Array&&!o.length||(o.constructor==Array?e.merge(r,o):r.push(o))}return r},e.fieldValue=function(t,r){var a=t.name,n=t.type,i=t.tagName.toLowerCase();if(void 0===r&&(r=!0),r&&(!a||t.disabled||"reset"==n||"button"==n||("checkbox"==n||"radio"==n)&&!t.checked||("submit"==n||"image"==n)&&t.form&&t.form.clk!=t||"select"==i&&-1==t.selectedIndex))return null;if("select"==i){var o=t.selectedIndex;if(0>o)return null;for(var s=[],u=t.options,c="select-one"==n,l=c?o+1:u.length,f=c?o:0;l>f;f++){var m=u[f];if(m.selected){var d=m.value;if(d||(d=m.attributes&&m.attributes.value&&!m.attributes.value.specified?m.text:m.value),c)return d;s.push(d)}}return s}return e(t).val()},e.fn.clearForm=function(t){return this.each(function(){e("input,select,textarea",this).clearFields(t)})},e.fn.clearFields=e.fn.clearInputs=function(t){var r=/^(?:color|date|datetime|email|month|number|password|range|search|tel|text|time|url|week)$/i;return this.each(function(){var a=this.type,n=this.tagName.toLowerCase();r.test(a)||"textarea"==n?this.value="":"checkbox"==a||"radio"==a?this.checked=!1:"select"==n?this.selectedIndex=-1:"file"==a?/MSIE/.test(navigator.userAgent)?e(this).replaceWith(e(this).clone(!0)):e(this).val(""):t&&(t===!0&&/hidden/.test(a)||"string"==typeof t&&e(this).is(t))&&(this.value="")})},e.fn.resetForm=function(){return this.each(function(){("function"==typeof this.reset||"object"==typeof this.reset&&!this.reset.nodeType)&&this.reset()})},e.fn.enable=function(e){return void 0===e&&(e=!0),this.each(function(){this.disabled=!e})},e.fn.selected=function(t){return void 0===t&&(t=!0),this.each(function(){var r=this.type;if("checkbox"==r||"radio"==r)this.checked=t;else if("option"==this.tagName.toLowerCase()){var a=e(this).parent("select");t&&a[0]&&"select-one"==a[0].type&&a.find("option").selected(!1),this.selected=t}})},e.fn.ajaxSubmit.debug=!1});(function($){var defaultOption={appendToBody:false,onInit:null,onFocus:null,onBlur:null,onOpen:null,onClose:null,onChange:null,onDestroy:null};var allInputs=[];function CoreUICount(__elem,__options,__templates){this.domInput=__elem;this.settings=__options||defaultOption;this.templates=__templates||{container:'<div class="b-core-ui-count"></div>',value:'<span class="b-core-ui-count__value"></span>',buttonAdd:'<span class="b-core-ui-count__button b-core-ui-count__button_add"><i class="fa fa-plus"></i></span>',buttonSub:'<span class="b-core-ui-count__button b-core-ui-count__button_sub"><i class="fa fa-minus"></i></span>'};this.init();}
CoreUICount.prototype.init=function(){this.buildUI();this.hideDomInput();if(this.domInput.is(':disabled')){this.container.addClass('disabled');return this;}
this.bindUIEvents();this.settings.onInit&&this.settings.onInit.apply(this,[this,this.domInput,'init']);};CoreUICount.prototype.buildUI=function(){this.container=$(this.templates.container).insertBefore(this.domInput);this.value=$(this.templates.value).appendTo(this.container);this.buttonAdd=$(this.templates.buttonAdd).appendTo(this.container)
this.buttonSub=$(this.templates.buttonSub).appendTo(this.container);this.setValue(this.getValue());};CoreUICount.prototype.hideDomInput=function(){this.domInput.addClass('b-core-ui-count__input_state_hide');};CoreUICount.prototype.showDomInput=function(){this.domInput.removeClass('b-core-ui-count__input_state_hide');};CoreUICount.prototype.bindUIEvents=function(){this.domInput.bind('focus',$.proxy(this,'onFocus'));this.domInput.bind('blur',$.proxy(this,'onBlur'));this.domInput.bind('change',$.proxy(this,'onChange'));this.buttonAdd.bind('click',$.proxy(this,'onAddClick'));this.buttonSub.bind('click',$.proxy(this,'onSubClick'));};CoreUICount.prototype.onFocus=function(){this.isDocumentMouseDown=false;this.container.addClass('focus');this.settings.onFocus&&this.settings.onFocus.apply(this,[this,this.domInput,'focus']);};CoreUICount.prototype.onBlur=function(){if(!this.isDocumentMouseDown){this.container.removeClass('focus');this.settings.onBlur&&this.settings.onBlur.apply(this,[this,this.domInput,'blur']);}};CoreUICount.prototype.onChange=function(){this.settings.onChange&&this.settings.onChange.apply(this,[this,this.domInput,'change']);};CoreUICount.prototype.onAddClick=function(){var val=parseInt(this.getValue());val+=1;this.setValue(val);};CoreUICount.prototype.onSubClick=function(){var val=parseInt(this.getValue());if(val>1){val-=1;this.setValue(val);}};CoreUICount.prototype.setValue=function(_text){this.value.text(_text);this.domInput.val(_text);this.onChange();};CoreUICount.prototype.getValue=function(){return this.domInput.val();};CoreUICount.prototype.update=function(){this.destroy();this.init();};CoreUICount.prototype.destroy=function(){this.domInput.unbind('focus',$.proxy(this,'onFocus'));this.domInput.unbind('blur',$.proxy(this,'onBlur'));this.domInput.unbind('change',$.proxy(this,'onChange'));this.buttonAdd.unbind('click',$.proxy(this,'onAddClick'));this.buttonSub.unbind('click',$.proxy(this,'onSubClick'));this.container.remove();this.showDomInput();this.settings.onDestroy&&this.settings.onDestroy.apply(this,[this,this.domInput,'destroy']);};$.fn.coreUICount=function(__options,__templates){return this.each(function(){var uiCount=$(this).data('coreUICount');if(__options=='destroy'&&!uiCount)return;if(uiCount){__options=(typeof __options=="string"&&uiCount[__options])?__options:'update';uiCount[__options].apply(uiCount);if(__options=='destroy'){$(this).removeData('coreUICount');for(var i=0;i<allInputs.length;i++){if(allInputs[i]==uiCount){allInputs.splice(i,1);break;}}}}else{uiCount=new CoreUICount($(this),__options,__templates);allInputs.push(uiCount);$(this).data('coreUICount',uiCount);}});};})(jQuery);(function(){var $,AbstractChosen,Chosen,SelectParser,_ref,__hasProp={}.hasOwnProperty,__extends=function(child,parent){for(var key in parent){if(__hasProp.call(parent,key))child[key]=parent[key];}function ctor(){this.constructor=child;}ctor.prototype=parent.prototype;child.prototype=new ctor();child.__super__=parent.prototype;return child;};SelectParser=(function(){function SelectParser(){this.options_index=0;this.parsed=[];}
SelectParser.prototype.add_node=function(child){if(child.nodeName.toUpperCase()==="OPTGROUP"){return this.add_group(child);}else{return this.add_option(child);}};SelectParser.prototype.add_group=function(group){var group_position,option,_i,_len,_ref,_results;group_position=this.parsed.length;this.parsed.push({array_index:group_position,group:true,label:this.escapeExpression(group.label),children:0,disabled:group.disabled});_ref=group.childNodes;_results=[];for(_i=0,_len=_ref.length;_i<_len;_i++){option=_ref[_i];_results.push(this.add_option(option,group_position,group.disabled));}
return _results;};SelectParser.prototype.add_option=function(option,group_position,group_disabled){if(option.nodeName.toUpperCase()==="OPTION"){if(option.text!==""){if(group_position!=null){this.parsed[group_position].children+=1;}
this.parsed.push({array_index:this.parsed.length,options_index:this.options_index,value:option.value,text:option.text,html:option.innerHTML,selected:option.selected,disabled:group_disabled===true?group_disabled:option.disabled,group_array_index:group_position,classes:option.className,style:option.style.cssText});}else{this.parsed.push({array_index:this.parsed.length,options_index:this.options_index,empty:true});}
return this.options_index+=1;}};SelectParser.prototype.escapeExpression=function(text){var map,unsafe_chars;if((text==null)||text===false){return"";}
if(!/[\&\<\>\"\'\`]/.test(text)){return text;}
map={"<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"};unsafe_chars=/&(?!\w+;)|[\<\>\"\'\`]/g;return text.replace(unsafe_chars,function(chr){return map[chr]||"&amp;";});};return SelectParser;})();SelectParser.select_to_array=function(select){var child,parser,_i,_len,_ref;parser=new SelectParser();_ref=select.childNodes;for(_i=0,_len=_ref.length;_i<_len;_i++){child=_ref[_i];parser.add_node(child);}
return parser.parsed;};AbstractChosen=(function(){function AbstractChosen(form_field,options){this.form_field=form_field;this.options=options!=null?options:{};if(!AbstractChosen.browser_is_supported()){return;}
this.is_multiple=this.form_field.multiple;this.set_default_text();this.set_default_values();this.setup();this.set_up_html();this.register_observers();}
AbstractChosen.prototype.set_default_values=function(){var _this=this;this.click_test_action=function(evt){return _this.test_active_click(evt);};this.activate_action=function(evt){return _this.activate_field(evt);};this.active_field=false;this.mouse_on_container=false;this.results_showing=false;this.result_highlighted=null;this.allow_single_deselect=(this.options.allow_single_deselect!=null)&&(this.form_field.options[0]!=null)&&this.form_field.options[0].text===""?this.options.allow_single_deselect:false;this.disable_search_threshold=this.options.disable_search_threshold||0;this.disable_search=this.options.disable_search||false;this.enable_split_word_search=this.options.enable_split_word_search!=null?this.options.enable_split_word_search:true;this.group_search=this.options.group_search!=null?this.options.group_search:true;this.search_contains=this.options.search_contains||false;this.single_backstroke_delete=this.options.single_backstroke_delete!=null?this.options.single_backstroke_delete:true;this.max_selected_options=this.options.max_selected_options||Infinity;this.inherit_select_classes=this.options.inherit_select_classes||false;this.display_selected_options=this.options.display_selected_options!=null?this.options.display_selected_options:true;return this.display_disabled_options=this.options.display_disabled_options!=null?this.options.display_disabled_options:true;};AbstractChosen.prototype.set_default_text=function(){if(this.form_field.getAttribute("data-placeholder")){this.default_text=this.form_field.getAttribute("data-placeholder");}else if(this.is_multiple){this.default_text=this.options.placeholder_text_multiple||this.options.placeholder_text||AbstractChosen.default_multiple_text;}else{this.default_text=this.options.placeholder_text_single||this.options.placeholder_text||AbstractChosen.default_single_text;}
return this.results_none_found=this.form_field.getAttribute("data-no_results_text")||this.options.no_results_text||AbstractChosen.default_no_result_text;};AbstractChosen.prototype.mouse_enter=function(){return this.mouse_on_container=true;};AbstractChosen.prototype.mouse_leave=function(){return this.mouse_on_container=false;};AbstractChosen.prototype.input_focus=function(evt){var _this=this;if(this.is_multiple){if(!this.active_field){return setTimeout((function(){return _this.container_mousedown();}),50);}}else{if(!this.active_field){return this.activate_field();}}};AbstractChosen.prototype.input_blur=function(evt){var _this=this;if(!this.mouse_on_container){this.active_field=false;return setTimeout((function(){return _this.blur_test();}),100);}};AbstractChosen.prototype.results_option_build=function(options){var content,data,_i,_len,_ref;content='';_ref=this.results_data;for(_i=0,_len=_ref.length;_i<_len;_i++){data=_ref[_i];if(data.group){content+=this.result_add_group(data);}else{content+=this.result_add_option(data);}
if(options!=null?options.first:void 0){if(data.selected&&this.is_multiple){this.choice_build(data);}else if(data.selected&&!this.is_multiple){this.single_set_selected_text(data.text);}}}
return content;};AbstractChosen.prototype.result_add_option=function(option){var classes,option_el;if(!option.search_match){return'';}
if(!this.include_option_in_results(option)){return'';}
classes=[];if(!option.disabled&&!(option.selected&&this.is_multiple)){classes.push("active-result");}
if(option.disabled&&!(option.selected&&this.is_multiple)){classes.push("disabled-result");}
if(option.selected){classes.push("result-selected");}
if(option.group_array_index!=null){classes.push("group-option");}
if(option.classes!==""){classes.push(option.classes);}
option_el=document.createElement("li");option_el.className=classes.join(" ");option_el.style.cssText=option.style;option_el.setAttribute("data-option-array-index",option.array_index);option_el.innerHTML=option.search_text;return this.outerHTML(option_el);};AbstractChosen.prototype.result_add_group=function(group){var group_el;if(!(group.search_match||group.group_match)){return'';}
if(!(group.active_options>0)){return'';}
group_el=document.createElement("li");group_el.className="group-result";group_el.innerHTML=group.search_text;return this.outerHTML(group_el);};AbstractChosen.prototype.results_update_field=function(){this.set_default_text();if(!this.is_multiple){this.results_reset_cleanup();}
this.result_clear_highlight();this.results_build();if(this.results_showing){return this.winnow_results();}};AbstractChosen.prototype.reset_single_select_options=function(){var result,_i,_len,_ref,_results;_ref=this.results_data;_results=[];for(_i=0,_len=_ref.length;_i<_len;_i++){result=_ref[_i];if(result.selected){_results.push(result.selected=false);}else{_results.push(void 0);}}
return _results;};AbstractChosen.prototype.results_toggle=function(){if(this.results_showing){return this.results_hide();}else{return this.results_show();}};AbstractChosen.prototype.results_search=function(evt){if(this.results_showing){return this.winnow_results();}else{return this.results_show();}};AbstractChosen.prototype.winnow_results=function(){var escapedSearchText,option,regex,regexAnchor,results,results_group,searchText,startpos,text,zregex,_i,_len,_ref;this.no_results_clear();results=0;searchText=this.get_search_text();escapedSearchText=searchText.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&");regexAnchor=this.search_contains?"":"^";regex=new RegExp(regexAnchor+escapedSearchText,'i');zregex=new RegExp(escapedSearchText,'i');_ref=this.results_data;for(_i=0,_len=_ref.length;_i<_len;_i++){option=_ref[_i];option.search_match=false;results_group=null;if(this.include_option_in_results(option)){if(option.group){option.group_match=false;option.active_options=0;}
if((option.group_array_index!=null)&&this.results_data[option.group_array_index]){results_group=this.results_data[option.group_array_index];if(results_group.active_options===0&&results_group.search_match){results+=1;}
results_group.active_options+=1;}
if(!(option.group&&!this.group_search)){option.search_text=option.group?option.label:option.html;option.search_match=this.search_string_match(option.search_text,regex);if(option.search_match&&!option.group){results+=1;}
if(option.search_match){if(searchText.length){startpos=option.search_text.search(zregex);text=option.search_text.substr(0,startpos+searchText.length)+'</em>'+option.search_text.substr(startpos+searchText.length);option.search_text=text.substr(0,startpos)+'<em>'+text.substr(startpos);}
if(results_group!=null){results_group.group_match=true;}}else if((option.group_array_index!=null)&&this.results_data[option.group_array_index].search_match){option.search_match=true;}}}}
this.result_clear_highlight();if(results<1&&searchText.length){this.update_results_content("");return this.no_results(searchText);}else{this.update_results_content(this.results_option_build());return this.winnow_results_set_highlight();}};AbstractChosen.prototype.search_string_match=function(search_string,regex){var part,parts,_i,_len;if(regex.test(search_string)){return true;}else if(this.enable_split_word_search&&(search_string.indexOf(" ")>=0||search_string.indexOf("[")===0)){parts=search_string.replace(/\[|\]/g,"").split(" ");if(parts.length){for(_i=0,_len=parts.length;_i<_len;_i++){part=parts[_i];if(regex.test(part)){return true;}}}}};AbstractChosen.prototype.choices_count=function(){var option,_i,_len,_ref;if(this.selected_option_count!=null){return this.selected_option_count;}
this.selected_option_count=0;_ref=this.form_field.options;for(_i=0,_len=_ref.length;_i<_len;_i++){option=_ref[_i];if(option.selected){this.selected_option_count+=1;}}
return this.selected_option_count;};AbstractChosen.prototype.choices_click=function(evt){evt.preventDefault();if(!(this.results_showing||this.is_disabled)){return this.results_show();}};AbstractChosen.prototype.keyup_checker=function(evt){var stroke,_ref;stroke=(_ref=evt.which)!=null?_ref:evt.keyCode;this.search_field_scale();switch(stroke){case 8:if(this.is_multiple&&this.backstroke_length<1&&this.choices_count()>0){return this.keydown_backstroke();}else if(!this.pending_backstroke){this.result_clear_highlight();return this.results_search();}
break;case 13:evt.preventDefault();if(this.results_showing){return this.result_select(evt);}
break;case 27:if(this.results_showing){this.results_hide();}
return true;case 9:case 38:case 40:case 16:case 91:case 17:break;default:return this.results_search();}};AbstractChosen.prototype.clipboard_event_checker=function(evt){var _this=this;return setTimeout((function(){return _this.results_search();}),50);};AbstractChosen.prototype.container_width=function(){if(this.options.width!=null){return this.options.width;}else{return""+this.form_field.offsetWidth+"px";}};AbstractChosen.prototype.include_option_in_results=function(option){if(this.is_multiple&&(!this.display_selected_options&&option.selected)){return false;}
if(!this.display_disabled_options&&option.disabled){return false;}
if(option.empty){return false;}
return true;};AbstractChosen.prototype.search_results_touchstart=function(evt){this.touch_started=true;return this.search_results_mouseover(evt);};AbstractChosen.prototype.search_results_touchmove=function(evt){this.touch_started=false;return this.search_results_mouseout(evt);};AbstractChosen.prototype.search_results_touchend=function(evt){if(this.touch_started){return this.search_results_mouseup(evt);}};AbstractChosen.prototype.outerHTML=function(element){var tmp;if(element.outerHTML){return element.outerHTML;}
tmp=document.createElement("div");tmp.appendChild(element);return tmp.innerHTML;};AbstractChosen.browser_is_supported=function(){if(window.navigator.appName==="Microsoft Internet Explorer"){return document.documentMode>=8;}
if(/iP(od|hone)/i.test(window.navigator.userAgent)){return false;}
if(/Android/i.test(window.navigator.userAgent)){if(/Mobile/i.test(window.navigator.userAgent)){return false;}}
return true;};AbstractChosen.default_multiple_text="Select Some Options";AbstractChosen.default_single_text="Select an Option";AbstractChosen.default_no_result_text="No results match";return AbstractChosen;})();$=jQuery;$.fn.extend({chosen:function(options){if(!AbstractChosen.browser_is_supported()){return this;}
return this.each(function(input_field){var $this,chosen;$this=$(this);chosen=$this.data('chosen');if(options==='destroy'&&chosen){chosen.destroy();}else if(!chosen){$this.data('chosen',new Chosen(this,options));}});}});Chosen=(function(_super){__extends(Chosen,_super);function Chosen(){_ref=Chosen.__super__.constructor.apply(this,arguments);return _ref;}
Chosen.prototype.setup=function(){this.form_field_jq=$(this.form_field);this.current_selectedIndex=this.form_field.selectedIndex;return this.is_rtl=this.form_field_jq.hasClass("chosen-rtl");};Chosen.prototype.set_up_html=function(){var container_classes,container_props;container_classes=["chosen-container"];container_classes.push("chosen-container-"+(this.is_multiple?"multi":"single"));if(this.inherit_select_classes&&this.form_field.className){container_classes.push(this.form_field.className);}
if(this.is_rtl){container_classes.push("chosen-rtl");}
container_props={'class':container_classes.join(' '),'style':"width: "+(this.container_width())+";",'title':this.form_field.title};if(this.form_field.id.length){container_props.id=this.form_field.id.replace(/[^\w]/g,'_')+"_chosen";}
this.container=$("<div />",container_props);if(this.is_multiple){this.container.html('<ul class="chosen-choices"><li class="search-field"><input type="text" value="'+this.default_text+'" class="default" autocomplete="off" style="width:25px;" /></li></ul><div class="chosen-drop"><ul class="chosen-results"></ul></div>');}else{this.container.html('<a class="chosen-single chosen-default" tabindex="-1"><span>'+this.default_text+'</span><div><b></b></div></a><div class="chosen-drop"><div class="chosen-search"><input type="text" autocomplete="off" /></div><ul class="chosen-results"></ul></div>');}
this.form_field_jq.hide().after(this.container);this.dropdown=this.container.find('div.chosen-drop').first();this.search_field=this.container.find('input').first();this.search_results=this.container.find('ul.chosen-results').first();this.search_field_scale();this.search_no_results=this.container.find('li.no-results').first();if(this.is_multiple){this.search_choices=this.container.find('ul.chosen-choices').first();this.search_container=this.container.find('li.search-field').first();}else{this.search_container=this.container.find('div.chosen-search').first();this.selected_item=this.container.find('.chosen-single').first();}
this.results_build();this.set_tab_index();this.set_label_behavior();return this.form_field_jq.trigger("chosen:ready",{chosen:this});};Chosen.prototype.register_observers=function(){var _this=this;this.container.bind('mousedown.chosen',function(evt){_this.container_mousedown(evt);});this.container.bind('mouseup.chosen',function(evt){_this.container_mouseup(evt);});this.container.bind('mouseenter.chosen',function(evt){_this.mouse_enter(evt);});this.container.bind('mouseleave.chosen',function(evt){_this.mouse_leave(evt);});this.search_results.bind('mouseup.chosen',function(evt){_this.search_results_mouseup(evt);});this.search_results.bind('mouseover.chosen',function(evt){_this.search_results_mouseover(evt);});this.search_results.bind('mouseout.chosen',function(evt){_this.search_results_mouseout(evt);});this.search_results.bind('mousewheel.chosen DOMMouseScroll.chosen',function(evt){_this.search_results_mousewheel(evt);});this.search_results.bind('touchstart.chosen',function(evt){_this.search_results_touchstart(evt);});this.search_results.bind('touchmove.chosen',function(evt){_this.search_results_touchmove(evt);});this.search_results.bind('touchend.chosen',function(evt){_this.search_results_touchend(evt);});this.form_field_jq.bind("chosen:updated.chosen",function(evt){_this.results_update_field(evt);});this.form_field_jq.bind("chosen:activate.chosen",function(evt){_this.activate_field(evt);});this.form_field_jq.bind("chosen:open.chosen",function(evt){_this.container_mousedown(evt);});this.form_field_jq.bind("chosen:close.chosen",function(evt){_this.input_blur(evt);});this.search_field.bind('blur.chosen',function(evt){_this.input_blur(evt);});this.search_field.bind('keyup.chosen',function(evt){_this.keyup_checker(evt);});this.search_field.bind('keydown.chosen',function(evt){_this.keydown_checker(evt);});this.search_field.bind('focus.chosen',function(evt){_this.input_focus(evt);});this.search_field.bind('cut.chosen',function(evt){_this.clipboard_event_checker(evt);});this.search_field.bind('paste.chosen',function(evt){_this.clipboard_event_checker(evt);});if(this.is_multiple){return this.search_choices.bind('click.chosen',function(evt){_this.choices_click(evt);});}else{return this.container.bind('click.chosen',function(evt){evt.preventDefault();});}};Chosen.prototype.destroy=function(){$(this.container[0].ownerDocument).unbind("click.chosen",this.click_test_action);if(this.search_field[0].tabIndex){this.form_field_jq[0].tabIndex=this.search_field[0].tabIndex;}
this.container.remove();this.form_field_jq.removeData('chosen');return this.form_field_jq.show();};Chosen.prototype.search_field_disabled=function(){this.is_disabled=this.form_field_jq[0].disabled;if(this.is_disabled){this.container.addClass('chosen-disabled');this.search_field[0].disabled=true;if(!this.is_multiple){this.selected_item.unbind("focus.chosen",this.activate_action);}
return this.close_field();}else{this.container.removeClass('chosen-disabled');this.search_field[0].disabled=false;if(!this.is_multiple){return this.selected_item.bind("focus.chosen",this.activate_action);}}};Chosen.prototype.container_mousedown=function(evt){if(!this.is_disabled){if(evt&&evt.type==="mousedown"&&!this.results_showing){evt.preventDefault();}
if(!((evt!=null)&&($(evt.target)).hasClass("search-choice-close"))){if(!this.active_field){if(this.is_multiple){this.search_field.val("");}
$(this.container[0].ownerDocument).bind('click.chosen',this.click_test_action);this.results_show();}else if(!this.is_multiple&&evt&&(($(evt.target)[0]===this.selected_item[0])||$(evt.target).parents("a.chosen-single").length)){evt.preventDefault();this.results_toggle();}
return this.activate_field();}}};Chosen.prototype.container_mouseup=function(evt){if(evt.target.nodeName==="ABBR"&&!this.is_disabled){return this.results_reset(evt);}};Chosen.prototype.search_results_mousewheel=function(evt){var delta;if(evt.originalEvent){delta=-evt.originalEvent.wheelDelta||evt.originalEvent.detail;}
if(delta!=null){evt.preventDefault();if(evt.type==='DOMMouseScroll'){delta=delta*40;}
return this.search_results.scrollTop(delta+this.search_results.scrollTop());}};Chosen.prototype.blur_test=function(evt){if(!this.active_field&&this.container.hasClass("chosen-container-active")){return this.close_field();}};Chosen.prototype.close_field=function(){$(this.container[0].ownerDocument).unbind("click.chosen",this.click_test_action);this.active_field=false;this.results_hide();this.container.removeClass("chosen-container-active");this.clear_backstroke();this.show_search_field_default();return this.search_field_scale();};Chosen.prototype.activate_field=function(){this.container.addClass("chosen-container-active");this.active_field=true;this.search_field.val(this.search_field.val());return this.search_field.focus();};Chosen.prototype.test_active_click=function(evt){var active_container;active_container=$(evt.target).closest('.chosen-container');if(active_container.length&&this.container[0]===active_container[0]){return this.active_field=true;}else{return this.close_field();}};Chosen.prototype.results_build=function(){this.parsing=true;this.selected_option_count=null;this.results_data=SelectParser.select_to_array(this.form_field);if(this.is_multiple){this.search_choices.find("li.search-choice").remove();}else if(!this.is_multiple){this.single_set_selected_text();if(this.disable_search||this.form_field.options.length<=this.disable_search_threshold){this.search_field[0].readOnly=true;this.container.addClass("chosen-container-single-nosearch");}else{this.search_field[0].readOnly=false;this.container.removeClass("chosen-container-single-nosearch");}}
this.update_results_content(this.results_option_build({first:true}));this.search_field_disabled();this.show_search_field_default();this.search_field_scale();return this.parsing=false;};Chosen.prototype.result_do_highlight=function(el){var high_bottom,high_top,maxHeight,visible_bottom,visible_top;if(el.length){this.result_clear_highlight();this.result_highlight=el;this.result_highlight.addClass("highlighted");maxHeight=parseInt(this.search_results.css("maxHeight"),10);visible_top=this.search_results.scrollTop();visible_bottom=maxHeight+visible_top;high_top=this.result_highlight.position().top+this.search_results.scrollTop();high_bottom=high_top+this.result_highlight.outerHeight();if(high_bottom>=visible_bottom){return this.search_results.scrollTop((high_bottom-maxHeight)>0?high_bottom-maxHeight:0);}else if(high_top<visible_top){return this.search_results.scrollTop(high_top);}}};Chosen.prototype.result_clear_highlight=function(){if(this.result_highlight){this.result_highlight.removeClass("highlighted");}
return this.result_highlight=null;};Chosen.prototype.results_show=function(){if(this.is_multiple&&this.max_selected_options<=this.choices_count()){this.form_field_jq.trigger("chosen:maxselected",{chosen:this});return false;}
this.container.addClass("chosen-with-drop");this.results_showing=true;this.search_field.focus();this.search_field.val(this.search_field.val());this.winnow_results();return this.form_field_jq.trigger("chosen:showing_dropdown",{chosen:this});};Chosen.prototype.update_results_content=function(content){return this.search_results.html(content);};Chosen.prototype.results_hide=function(){if(this.results_showing){this.result_clear_highlight();this.container.removeClass("chosen-with-drop");this.form_field_jq.trigger("chosen:hiding_dropdown",{chosen:this});}
return this.results_showing=false;};Chosen.prototype.set_tab_index=function(el){var ti;if(this.form_field.tabIndex){ti=this.form_field.tabIndex;this.form_field.tabIndex=-1;return this.search_field[0].tabIndex=ti;}};Chosen.prototype.set_label_behavior=function(){var _this=this;this.form_field_label=this.form_field_jq.parents("label");if(!this.form_field_label.length&&this.form_field.id.length){this.form_field_label=$("label[for='"+this.form_field.id+"']");}
if(this.form_field_label.length>0){return this.form_field_label.bind('click.chosen',function(evt){if(_this.is_multiple){return _this.container_mousedown(evt);}else{return _this.activate_field();}});}};Chosen.prototype.show_search_field_default=function(){if(this.is_multiple&&this.choices_count()<1&&!this.active_field){this.search_field.val(this.default_text);return this.search_field.addClass("default");}else{this.search_field.val("");return this.search_field.removeClass("default");}};Chosen.prototype.search_results_mouseup=function(evt){var target;target=$(evt.target).hasClass("active-result")?$(evt.target):$(evt.target).parents(".active-result").first();if(target.length){this.result_highlight=target;this.result_select(evt);return this.search_field.focus();}};Chosen.prototype.search_results_mouseover=function(evt){var target;target=$(evt.target).hasClass("active-result")?$(evt.target):$(evt.target).parents(".active-result").first();if(target){return this.result_do_highlight(target);}};Chosen.prototype.search_results_mouseout=function(evt){if($(evt.target).hasClass("active-result"||$(evt.target).parents('.active-result').first())){return this.result_clear_highlight();}};Chosen.prototype.choice_build=function(item){var choice,close_link,_this=this;choice=$('<li />',{"class":"search-choice"}).html("<span>"+item.html+"</span>");if(item.disabled){choice.addClass('search-choice-disabled');}else{close_link=$('<a />',{"class":'search-choice-close','data-option-array-index':item.array_index});close_link.bind('click.chosen',function(evt){return _this.choice_destroy_link_click(evt);});choice.append(close_link);}
return this.search_container.before(choice);};Chosen.prototype.choice_destroy_link_click=function(evt){evt.preventDefault();evt.stopPropagation();if(!this.is_disabled){return this.choice_destroy($(evt.target));}};Chosen.prototype.choice_destroy=function(link){if(this.result_deselect(link[0].getAttribute("data-option-array-index"))){this.show_search_field_default();if(this.is_multiple&&this.choices_count()>0&&this.search_field.val().length<1){this.results_hide();}
link.parents('li').first().remove();return this.search_field_scale();}};Chosen.prototype.results_reset=function(){this.reset_single_select_options();this.form_field.options[0].selected=true;this.single_set_selected_text();this.show_search_field_default();this.results_reset_cleanup();this.form_field_jq.trigger("change");if(this.active_field){return this.results_hide();}};Chosen.prototype.results_reset_cleanup=function(){this.current_selectedIndex=this.form_field.selectedIndex;return this.selected_item.find("abbr").remove();};Chosen.prototype.result_select=function(evt){var high,item;if(this.result_highlight){high=this.result_highlight;this.result_clear_highlight();if(this.is_multiple&&this.max_selected_options<=this.choices_count()){this.form_field_jq.trigger("chosen:maxselected",{chosen:this});return false;}
if(this.is_multiple){high.removeClass("active-result");}else{this.reset_single_select_options();}
item=this.results_data[high[0].getAttribute("data-option-array-index")];item.selected=true;this.form_field.options[item.options_index].selected=true;this.selected_option_count=null;if(this.is_multiple){this.choice_build(item);}else{this.single_set_selected_text(item.text);}
if(!((evt.metaKey||evt.ctrlKey)&&this.is_multiple)){this.results_hide();}
this.search_field.val("");if(this.is_multiple||this.form_field.selectedIndex!==this.current_selectedIndex){this.form_field_jq.trigger("change",{'selected':this.form_field.options[item.options_index].value});}
this.current_selectedIndex=this.form_field.selectedIndex;return this.search_field_scale();}};Chosen.prototype.single_set_selected_text=function(text){if(text==null){text=this.default_text;}
if(text===this.default_text){this.selected_item.addClass("chosen-default");}else{this.single_deselect_control_build();this.selected_item.removeClass("chosen-default");}
return this.selected_item.find("span").text(text);};Chosen.prototype.result_deselect=function(pos){var result_data;result_data=this.results_data[pos];if(!this.form_field.options[result_data.options_index].disabled){result_data.selected=false;this.form_field.options[result_data.options_index].selected=false;this.selected_option_count=null;this.result_clear_highlight();if(this.results_showing){this.winnow_results();}
this.form_field_jq.trigger("change",{deselected:this.form_field.options[result_data.options_index].value});this.search_field_scale();return true;}else{return false;}};Chosen.prototype.single_deselect_control_build=function(){if(!this.allow_single_deselect){return;}
if(!this.selected_item.find("abbr").length){this.selected_item.find("span").first().after("<abbr class=\"search-choice-close\"></abbr>");}
return this.selected_item.addClass("chosen-single-with-deselect");};Chosen.prototype.get_search_text=function(){if(this.search_field.val()===this.default_text){return"";}else{return $('<div/>').text($.trim(this.search_field.val())).html();}};Chosen.prototype.winnow_results_set_highlight=function(){var do_high,selected_results;selected_results=!this.is_multiple?this.search_results.find(".result-selected.active-result"):[];do_high=selected_results.length?selected_results.first():this.search_results.find(".active-result").first();if(do_high!=null){return this.result_do_highlight(do_high);}};Chosen.prototype.no_results=function(terms){var no_results_html;no_results_html=$('<li class="no-results">'+this.results_none_found+' "<span></span>"</li>');no_results_html.find("span").first().html(terms);this.search_results.append(no_results_html);return this.form_field_jq.trigger("chosen:no_results",{chosen:this});};Chosen.prototype.no_results_clear=function(){return this.search_results.find(".no-results").remove();};Chosen.prototype.keydown_arrow=function(){var next_sib;if(this.results_showing&&this.result_highlight){next_sib=this.result_highlight.nextAll("li.active-result").first();if(next_sib){return this.result_do_highlight(next_sib);}}else{return this.results_show();}};Chosen.prototype.keyup_arrow=function(){var prev_sibs;if(!this.results_showing&&!this.is_multiple){return this.results_show();}else if(this.result_highlight){prev_sibs=this.result_highlight.prevAll("li.active-result");if(prev_sibs.length){return this.result_do_highlight(prev_sibs.first());}else{if(this.choices_count()>0){this.results_hide();}
return this.result_clear_highlight();}}};Chosen.prototype.keydown_backstroke=function(){var next_available_destroy;if(this.pending_backstroke){this.choice_destroy(this.pending_backstroke.find("a").first());return this.clear_backstroke();}else{next_available_destroy=this.search_container.siblings("li.search-choice").last();if(next_available_destroy.length&&!next_available_destroy.hasClass("search-choice-disabled")){this.pending_backstroke=next_available_destroy;if(this.single_backstroke_delete){return this.keydown_backstroke();}else{return this.pending_backstroke.addClass("search-choice-focus");}}}};Chosen.prototype.clear_backstroke=function(){if(this.pending_backstroke){this.pending_backstroke.removeClass("search-choice-focus");}
return this.pending_backstroke=null;};Chosen.prototype.keydown_checker=function(evt){var stroke,_ref1;stroke=(_ref1=evt.which)!=null?_ref1:evt.keyCode;this.search_field_scale();if(stroke!==8&&this.pending_backstroke){this.clear_backstroke();}
switch(stroke){case 8:this.backstroke_length=this.search_field.val().length;break;case 9:if(this.results_showing&&!this.is_multiple){this.result_select(evt);}
this.mouse_on_container=false;break;case 13:evt.preventDefault();break;case 38:evt.preventDefault();this.keyup_arrow();break;case 40:evt.preventDefault();this.keydown_arrow();break;}};Chosen.prototype.search_field_scale=function(){var div,f_width,h,style,style_block,styles,w,_i,_len;if(this.is_multiple){h=0;w=0;style_block="position:absolute; left: -1000px; top: -1000px; display:none;";styles=['font-size','font-style','font-weight','font-family','line-height','text-transform','letter-spacing'];for(_i=0,_len=styles.length;_i<_len;_i++){style=styles[_i];style_block+=style+":"+this.search_field.css(style)+";";}
div=$('<div />',{'style':style_block});div.text(this.search_field.val());$('body').append(div);w=div.width()+25;div.remove();f_width=this.container.outerWidth();if(w>f_width-10){w=f_width-10;}
return this.search_field.css({'width':w+'px'});}};return Chosen;})(AbstractChosen);}).call(this);!function(a,b){"use strict";a.fn.chained=function(c){return this.each(function(){function d(){var d=!0,g=a("option:selected",e).val();a(e).html(f.html());var h="";a(c).each(function(){var c=a("option:selected",this).val();c&&(h.length>0&&(h+=b.Zepto?"\\\\":"\\"),h+=c)});var i;i=a.isArray(c)?a(c[0]).first():a(c).first();var j=a("option:selected",i).val();a("option",e).each(function(){a(this).hasClass(h)&&a(this).val()===g?(a(this).prop("selected",!0),d=!1):a(this).hasClass(h)||a(this).hasClass(j)||""===a(this).val()||a(this).remove()}),1===a("option",e).size()&&""===a(e).val()?a(e).prop("disabled",!0):a(e).prop("disabled",!1),d&&a(e).trigger("change")}var e=this,f=a(e).clone();a(c).each(function(){a(this).bind("change",function(){d()}),a("option:selected",this).length||a("option",this).first().attr("selected","selected"),d()})})},a.fn.chainedTo=a.fn.chained,a.fn.chained.defaults={}}(window.jQuery||window.Zepto,window,document);(function($){function Countdown(){this.regional=[];this.regional['']={labels:['Years','Months','Weeks','Days','Hours','Minutes','Seconds'],labels1:['Year','Month','Week','Day','Hour','Minute','Second'],compactLabels:['y','m','w','d'],whichLabels:null,digits:['0','1','2','3','4','5','6','7','8','9'],timeSeparator:':',isRTL:false};this._defaults={until:null,since:null,timezone:null,serverSync:null,format:'dHMS',layout:'',compact:false,significant:0,description:'',expiryUrl:'',expiryText:'',alwaysExpire:false,onExpiry:null,onTick:null,tickInterval:1};$.extend(this._defaults,this.regional['']);this._serverSyncs=[];var c=(typeof Date.now=='function'?Date.now:function(){return new Date().getTime()});var d=(window.performance&&typeof window.performance.now=='function');function timerCallBack(a){var b=(a<1e12?(d?(performance.now()+performance.timing.navigationStart):c()):a||c());if(b-f>=1000){x._updateTargets();f=b}e(timerCallBack)}var e=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||null;var f=0;if(!e||$.noRequestAnimationFrame){$.noRequestAnimationFrame=null;setInterval(function(){x._updateTargets()},980)}else{f=window.animationStartTime||window.webkitAnimationStartTime||window.mozAnimationStartTime||window.oAnimationStartTime||window.msAnimationStartTime||c();e(timerCallBack)}}var Y=0;var O=1;var W=2;var D=3;var H=4;var M=5;var S=6;$.extend(Countdown.prototype,{markerClassName:'hasCountdown',propertyName:'countdown',_rtlClass:'countdown_rtl',_sectionClass:'countdown_section',_amountClass:'countdown_amount',_rowClass:'countdown_row',_holdingClass:'countdown_holding',_showClass:'countdown_show',_descrClass:'countdown_descr',_timerTargets:[],setDefaults:function(a){this._resetExtraLabels(this._defaults,a);$.extend(this._defaults,a||{})},UTCDate:function(a,b,c,e,f,g,h,i){if(typeof b=='object'&&b.constructor==Date){i=b.getMilliseconds();h=b.getSeconds();g=b.getMinutes();f=b.getHours();e=b.getDate();c=b.getMonth();b=b.getFullYear()}var d=new Date();d.setUTCFullYear(b);d.setUTCDate(1);d.setUTCMonth(c||0);d.setUTCDate(e||1);d.setUTCHours(f||0);d.setUTCMinutes((g||0)-(Math.abs(a)<30?a*60:a));d.setUTCSeconds(h||0);d.setUTCMilliseconds(i||0);return d},periodsToSeconds:function(a){return a[0]*31557600+a[1]*2629800+a[2]*604800+a[3]*86400+a[4]*3600+a[5]*60+a[6]},_attachPlugin:function(a,b){a=$(a);if(a.hasClass(this.markerClassName)){return}var c={options:$.extend({},this._defaults),_periods:[0,0,0,0,0,0,0]};a.addClass(this.markerClassName).data(this.propertyName,c);this._optionPlugin(a,b)},_addTarget:function(a){if(!this._hasTarget(a)){this._timerTargets.push(a)}},_hasTarget:function(a){return($.inArray(a,this._timerTargets)>-1)},_removeTarget:function(b){this._timerTargets=$.map(this._timerTargets,function(a){return(a==b?null:a)})},_updateTargets:function(){for(var i=this._timerTargets.length-1;i>=0;i--){this._updateCountdown(this._timerTargets[i])}},_optionPlugin:function(a,b,c){a=$(a);var d=a.data(this.propertyName);if(!b||(typeof b=='string'&&c==null)){var e=b;b=(d||{}).options;return(b&&e?b[e]:b)}if(!a.hasClass(this.markerClassName)){return}b=b||{};if(typeof b=='string'){var e=b;b={};b[e]=c}if(b.layout){b.layout=b.layout.replace(/&lt;/g,'<').replace(/&gt;/g,'>')}this._resetExtraLabels(d.options,b);var f=(d.options.timezone!=b.timezone);$.extend(d.options,b);this._adjustSettings(a,d,b.until!=null||b.since!=null||f);var g=new Date();if((d._since&&d._since<g)||(d._until&&d._until>g)){this._addTarget(a[0])}this._updateCountdown(a,d)},_updateCountdown:function(a,b){var c=$(a);b=b||c.data(this.propertyName);if(!b){return}c.html(this._generateHTML(b)).toggleClass(this._rtlClass,b.options.isRTL);if($.isFunction(b.options.onTick)){var d=b._hold!='lap'?b._periods:this._calculatePeriods(b,b._show,b.options.significant,new Date());if(b.options.tickInterval==1||this.periodsToSeconds(d)%b.options.tickInterval==0){b.options.onTick.apply(a,[d])}}var e=b._hold!='pause'&&(b._since?b._now.getTime()<b._since.getTime():b._now.getTime()>=b._until.getTime());if(e&&!b._expiring){b._expiring=true;if(this._hasTarget(a)||b.options.alwaysExpire){this._removeTarget(a);if($.isFunction(b.options.onExpiry)){b.options.onExpiry.apply(a,[])}if(b.options.expiryText){var f=b.options.layout;b.options.layout=b.options.expiryText;this._updateCountdown(a,b);b.options.layout=f}if(b.options.expiryUrl){window.location=b.options.expiryUrl}}b._expiring=false}else if(b._hold=='pause'){this._removeTarget(a)}c.data(this.propertyName,b)},_resetExtraLabels:function(a,b){var c=false;for(var n in b){if(n!='whichLabels'&&n.match(/[Ll]abels/)){c=true;break}}if(c){for(var n in a){if(n.match(/[Ll]abels[02-9]|compactLabels1/)){a[n]=null}}}},_adjustSettings:function(a,b,c){var d;var e=0;var f=null;for(var i=0;i<this._serverSyncs.length;i++){if(this._serverSyncs[i][0]==b.options.serverSync){f=this._serverSyncs[i][1];break}}if(f!=null){e=(b.options.serverSync?f:0);d=new Date()}else{var g=($.isFunction(b.options.serverSync)?b.options.serverSync.apply(a,[]):null);d=new Date();e=(g?d.getTime()-g.getTime():0);this._serverSyncs.push([b.options.serverSync,e])}var h=b.options.timezone;h=(h==null?-d.getTimezoneOffset():h);if(c||(!c&&b._until==null&&b._since==null)){b._since=b.options.since;if(b._since!=null){b._since=this.UTCDate(h,this._determineTime(b._since,null));if(b._since&&e){b._since.setMilliseconds(b._since.getMilliseconds()+e)}}b._until=this.UTCDate(h,this._determineTime(b.options.until,d));if(e){b._until.setMilliseconds(b._until.getMilliseconds()+e)}}b._show=this._determineShow(b)},_destroyPlugin:function(a){a=$(a);if(!a.hasClass(this.markerClassName)){return}this._removeTarget(a[0]);a.removeClass(this.markerClassName).empty().removeData(this.propertyName)},_pausePlugin:function(a){this._hold(a,'pause')},_lapPlugin:function(a){this._hold(a,'lap')},_resumePlugin:function(a){this._hold(a,null)},_hold:function(a,b){var c=$.data(a,this.propertyName);if(c){if(c._hold=='pause'&&!b){c._periods=c._savePeriods;var d=(c._since?'-':'+');c[c._since?'_since':'_until']=this._determineTime(d+c._periods[0]+'y'+d+c._periods[1]+'o'+d+c._periods[2]+'w'+d+c._periods[3]+'d'+d+c._periods[4]+'h'+d+c._periods[5]+'m'+d+c._periods[6]+'s');this._addTarget(a)}c._hold=b;c._savePeriods=(b=='pause'?c._periods:null);$.data(a,this.propertyName,c);this._updateCountdown(a,c)}},_getTimesPlugin:function(a){var b=$.data(a,this.propertyName);return(!b?null:(b._hold=='pause'?b._savePeriods:(!b._hold?b._periods:this._calculatePeriods(b,b._show,b.options.significant,new Date()))))},_determineTime:function(k,l){var m=function(a){var b=new Date();b.setTime(b.getTime()+a*1000);return b};var n=function(a){a=a.toLowerCase();var b=new Date();var c=b.getFullYear();var d=b.getMonth();var e=b.getDate();var f=b.getHours();var g=b.getMinutes();var h=b.getSeconds();var i=/([+-]?[0-9]+)\s*(s|m|h|d|w|o|y)?/g;var j=i.exec(a);while(j){switch(j[2]||'s'){case's':h+=parseInt(j[1],10);break;case'm':g+=parseInt(j[1],10);break;case'h':f+=parseInt(j[1],10);break;case'd':e+=parseInt(j[1],10);break;case'w':e+=parseInt(j[1],10)*7;break;case'o':d+=parseInt(j[1],10);e=Math.min(e,x._getDaysInMonth(c,d));break;case'y':c+=parseInt(j[1],10);e=Math.min(e,x._getDaysInMonth(c,d));break}j=i.exec(a)}return new Date(c,d,e,f,g,h,0)};var o=(k==null?l:(typeof k=='string'?n(k):(typeof k=='number'?m(k):k)));if(o)o.setMilliseconds(0);return o},_getDaysInMonth:function(a,b){return 32-new Date(a,b,32).getDate()},_normalLabels:function(a){return a},_generateHTML:function(c){var d=this;c._periods=(c._hold?c._periods:this._calculatePeriods(c,c._show,c.options.significant,new Date()));var e=false;var f=0;var g=c.options.significant;var h=$.extend({},c._show);for(var i=Y;i<=S;i++){e|=(c._show[i]=='?'&&c._periods[i]>0);h[i]=(c._show[i]=='?'&&!e?null:c._show[i]);f+=(h[i]?1:0);g-=(c._periods[i]>0?1:0)}var j=[false,false,false,false,false,false,false];for(var i=S;i>=Y;i--){if(c._show[i]){if(c._periods[i]){j[i]=true}else{j[i]=g>0;g--}}}var k=(c.options.compact?c.options.compactLabels:c.options.labels);var l=c.options.whichLabels||this._normalLabels;var m=function(a){var b=c.options['compactLabels'+l(c._periods[a])];return(h[a]?d._translateDigits(c,c._periods[a])+(b?b[a]:k[a])+' ':'')};var n=function(a){var b=c.options['labels'+l(c._periods[a])];return((!c.options.significant&&h[a])||(c.options.significant&&j[a])?'<span class="'+x._sectionClass+'">'+'<span class="'+x._amountClass+'">'+d._translateDigits(c,c._periods[a])+'</span><br/>'+(b?b[a]:k[a])+'</span>':'')};return(c.options.layout?this._buildLayout(c,h,c.options.layout,c.options.compact,c.options.significant,j):((c.options.compact?'<span class="'+this._rowClass+' '+this._amountClass+(c._hold?' '+this._holdingClass:'')+'">'+m(Y)+m(O)+m(W)+m(D)+(h[H]?this._minDigits(c,c._periods[H],2):'')+(h[M]?(h[H]?c.options.timeSeparator:'')+this._minDigits(c,c._periods[M],2):'')+(h[S]?(h[H]||h[M]?c.options.timeSeparator:'')+this._minDigits(c,c._periods[S],2):''):'<span class="'+this._rowClass+' '+this._showClass+(c.options.significant||f)+(c._hold?' '+this._holdingClass:'')+'">'+n(Y)+n(O)+n(W)+n(D)+n(H)+n(M)+n(S))+'</span>'+(c.options.description?'<span class="'+this._rowClass+' '+this._descrClass+'">'+c.options.description+'</span>':'')))},_buildLayout:function(c,d,e,f,g,h){var j=c.options[f?'compactLabels':'labels'];var k=c.options.whichLabels||this._normalLabels;var l=function(a){return(c.options[(f?'compactLabels':'labels')+k(c._periods[a])]||j)[a]};var m=function(a,b){return c.options.digits[Math.floor(a/b)%10]};var o={desc:c.options.description,sep:c.options.timeSeparator,yl:l(Y),yn:this._minDigits(c,c._periods[Y],1),ynn:this._minDigits(c,c._periods[Y],2),ynnn:this._minDigits(c,c._periods[Y],3),y1:m(c._periods[Y],1),y10:m(c._periods[Y],10),y100:m(c._periods[Y],100),y1000:m(c._periods[Y],1000),ol:l(O),on:this._minDigits(c,c._periods[O],1),onn:this._minDigits(c,c._periods[O],2),onnn:this._minDigits(c,c._periods[O],3),o1:m(c._periods[O],1),o10:m(c._periods[O],10),o100:m(c._periods[O],100),o1000:m(c._periods[O],1000),wl:l(W),wn:this._minDigits(c,c._periods[W],1),wnn:this._minDigits(c,c._periods[W],2),wnnn:this._minDigits(c,c._periods[W],3),w1:m(c._periods[W],1),w10:m(c._periods[W],10),w100:m(c._periods[W],100),w1000:m(c._periods[W],1000),dl:l(D),dn:this._minDigits(c,c._periods[D],1),dnn:this._minDigits(c,c._periods[D],2),dnnn:this._minDigits(c,c._periods[D],3),d1:m(c._periods[D],1),d10:m(c._periods[D],10),d100:m(c._periods[D],100),d1000:m(c._periods[D],1000),hl:l(H),hn:this._minDigits(c,c._periods[H],1),hnn:this._minDigits(c,c._periods[H],2),hnnn:this._minDigits(c,c._periods[H],3),h1:m(c._periods[H],1),h10:m(c._periods[H],10),h100:m(c._periods[H],100),h1000:m(c._periods[H],1000),ml:l(M),mn:this._minDigits(c,c._periods[M],1),mnn:this._minDigits(c,c._periods[M],2),mnnn:this._minDigits(c,c._periods[M],3),m1:m(c._periods[M],1),m10:m(c._periods[M],10),m100:m(c._periods[M],100),m1000:m(c._periods[M],1000),sl:l(S),sn:this._minDigits(c,c._periods[S],1),snn:this._minDigits(c,c._periods[S],2),snnn:this._minDigits(c,c._periods[S],3),s1:m(c._periods[S],1),s10:m(c._periods[S],10),s100:m(c._periods[S],100),s1000:m(c._periods[S],1000)};var p=e;for(var i=Y;i<=S;i++){var q='yowdhms'.charAt(i);var r=new RegExp('\\{'+q+'<\\}([\\s\\S]*)\\{'+q+'>\\}','g');p=p.replace(r,((!g&&d[i])||(g&&h[i])?'$1':''))}$.each(o,function(n,v){var a=new RegExp('\\{'+n+'\\}','g');p=p.replace(a,v)});return p},_minDigits:function(a,b,c){b=''+b;if(b.length>=c){return this._translateDigits(a,b)}b='0000000000'+b;return this._translateDigits(a,b.substr(b.length-c))},_translateDigits:function(b,c){return(''+c).replace(/[0-9]/g,function(a){return b.options.digits[a]})},_determineShow:function(a){var b=a.options.format;var c=[];c[Y]=(b.match('y')?'?':(b.match('Y')?'!':null));c[O]=(b.match('o')?'?':(b.match('O')?'!':null));c[W]=(b.match('w')?'?':(b.match('W')?'!':null));c[D]=(b.match('d')?'?':(b.match('D')?'!':null));c[H]=(b.match('h')?'?':(b.match('H')?'!':null));c[M]=(b.match('m')?'?':(b.match('M')?'!':null));c[S]=(b.match('s')?'?':(b.match('S')?'!':null));return c},_calculatePeriods:function(c,d,e,f){c._now=f;c._now.setMilliseconds(0);var g=new Date(c._now.getTime());if(c._since){if(f.getTime()<c._since.getTime()){c._now=f=g}else{f=c._since}}else{g.setTime(c._until.getTime());if(f.getTime()>c._until.getTime()){c._now=f=g}}var h=[0,0,0,0,0,0,0];if(d[Y]||d[O]){var i=x._getDaysInMonth(f.getFullYear(),f.getMonth());var j=x._getDaysInMonth(g.getFullYear(),g.getMonth());var k=(g.getDate()==f.getDate()||(g.getDate()>=Math.min(i,j)&&f.getDate()>=Math.min(i,j)));var l=function(a){return(a.getHours()*60+a.getMinutes())*60+a.getSeconds()};var m=Math.max(0,(g.getFullYear()-f.getFullYear())*12+g.getMonth()-f.getMonth()+((g.getDate()<f.getDate()&&!k)||(k&&l(g)<l(f))?-1:0));h[Y]=(d[Y]?Math.floor(m/12):0);h[O]=(d[O]?m-h[Y]*12:0);f=new Date(f.getTime());var n=(f.getDate()==i);var o=x._getDaysInMonth(f.getFullYear()+h[Y],f.getMonth()+h[O]);if(f.getDate()>o){f.setDate(o)}f.setFullYear(f.getFullYear()+h[Y]);f.setMonth(f.getMonth()+h[O]);if(n){f.setDate(o)}}var p=Math.floor((g.getTime()-f.getTime())/1000);var q=function(a,b){h[a]=(d[a]?Math.floor(p/b):0);p-=h[a]*b};q(W,604800);q(D,86400);q(H,3600);q(M,60);q(S,1);if(p>0&&!c._since){var r=[1,12,4.3482,7,24,60,60];var s=S;var t=1;for(var u=S;u>=Y;u--){if(d[u]){if(h[s]>=t){h[s]=0;p=1}if(p>0){h[u]++;p=0;s=u;t=1}}t*=r[u]}}if(e){for(var u=Y;u<=S;u++){if(e&&h[u]){e--}else if(!e){h[u]=0}}}return h}});var w=['getTimes'];function isNotChained(a,b){if(a=='option'&&(b.length==0||(b.length==1&&typeof b[0]=='string'))){return true}return $.inArray(a,w)>-1}$.fn.countdown=function(a){var b=Array.prototype.slice.call(arguments,1);if(isNotChained(a,b)){return x['_'+a+'Plugin'].apply(x,[this[0]].concat(b))}return this.each(function(){if(typeof a=='string'){if(!x['_'+a+'Plugin']){throw'Unknown command: '+a;}x['_'+a+'Plugin'].apply(x,[this].concat(b))}else{x._attachPlugin(this,a||{})}})};var x=$.countdown=new Countdown()})(jQuery);﻿
(function($){$.countdown.regional['ru']={labels:['Лет','Месяцев','Недель','Дней','Часов','Минут','Секунд'],labels1:['Год','Месяц','Неделя','День','Час','Минута','Секунда'],labels2:['Года','Месяца','Недели','Дня','Часа','Минуты','Секунды'],compactLabels:['л','м','н','д'],compactLabels1:['г','м','н','д'],whichLabels:function(amount){var units=amount%10;var tens=Math.floor((amount%100)/10);return(amount==1?1:(units>=2&&units<=4&&tens!=1?2:(units==1&&tens!=1?1:0)));},digits:['0','1','2','3','4','5','6','7','8','9'],timeSeparator:':',isRTL:false};$.countdown.setDefaults($.countdown.regional['ru']);})(jQuery);;(function($){$(document).ready(function(){var updatePhoneFields=function(){var $phoneField=$('input[name$=phone]'),$phoneValidField=$('input[name$=is_phone_valid]');if($phoneField.length){var maskList=$.masksSort($.masksLoad("/st/libs/phonemask/phones-ru.json"),['#'],/[0-9]|#/,"mask");var maskOpts={inputmask:{definitions:{'#':{validator:"[0-9]",cardinality:1}},showMaskOnHover:false,autoUnmask:true},match:/[0-9]/,replace:'#',list:maskList,listKey:"mask",onMaskChange:function(maskObj,determined,completed){if(completed){$phoneValidField.attr('checked',true).val(true);}else{$phoneValidField.attr('checked',false).val(false);}}};$phoneField.each(function(){$(this).inputmasks(maskOpts);});}};updatePhoneFields();$('.b-form__field_count input').coreUICount();$(document).on("click",".g-btn-ajax",function(e){e.preventDefault();var url=$(this).attr('href'),width=$(window).width();if(width>800)width=768;$.fancybox({href:url,width:500,height:460,maxHeight:460,type:'iframe',padding:0,openEffect:'elastic',closeEffect:'elastic',helpers:{title:null,overlay:{closeClick:false,css:{'background-color':'rgba(0,0,0,.1)','cursor':'auto'}}}});});var checkDelivery=function($deliveryField,$rowPvz,$rowAddress,$btnSubmit,$buyDesc){var d=$deliveryField.val();if(d=='1'){$rowPvz.show();$rowAddress.hide();}else{$rowPvz.hide();$rowAddress.show();}};var calculateDeliveryCost=function(delivery,city,$deliveryPriceBox,$deliveryPeriod,$productPrice1Box,$productPrice2Box,$productPrice1Val,$productPrice2Val,count){$.get('calc/index.html',{delivery:delivery,city:city,count:count},function(data){$deliveryPriceBox.text(data.price);var period=data.min==data.max?data.max:data.min+'-'+data.max;$deliveryPeriod.text(period);$productPrice1Val.text(data.product_price1);$productPrice2Val.text(data.product_price2);if(data.product_price1!=data.product_price2){$productPrice1Box.css('text-decoration','line-through');$productPrice2Box.show();}else{$productPrice1Box.css('text-decoration','none');$productPrice2Box.hide();}});};$('.b-form_order').each(function(){var $form=$(this),productPrice=$form.data('product-price'),$deliveryPriceField=$form.find('#id_delivery_price'),$buyDesc=$form.find('#buy-desc'),$deliveryField=$form.find('#id_delivery'),$cityField=$form.find('#id_city_field'),$pvzField=$form.find('#id_pvz_field'),$countField=$form.find('#id_count'),$rowPvz=$form.find('.row_pvz'),$rowAddress=$form.find('#row_address'),$productPrice1Box=$form.find('.b-result__pp__p1'),$productPrice2Box=$form.find('.b-result__pp__p2'),$productPrice1Val=$form.find('.b-result__pp__val1'),$productPrice2Val=$form.find('.b-result__pp__val2'),$deliveryPriceBox=$form.find('.b-result__dp__val'),$deliveryPeriod=$form.find('.b-result__period__val'),$btnSubmit=$form.find('.b-btn_submit');$deliveryField.chosen({disable_search_threshold:10,width:'100%'});$cityField.chosen({disable_search_threshold:10,width:'100%'});$pvzField.chosen({disable_search_threshold:10,width:'100%'});checkDelivery($deliveryField,$rowPvz,$rowAddress,$btnSubmit,$buyDesc);$deliveryField.bind('change',function(){checkDelivery($deliveryField,$rowPvz,$rowAddress,$btnSubmit,$buyDesc);calculateDeliveryCost($deliveryField.val(),$cityField.val(),$deliveryPriceBox,$deliveryPeriod,$productPrice1Box,$productPrice2Box,$productPrice1Val,$productPrice2Val,$countField.val());});$pvzField.chained("#id_city_field");$pvzField.trigger("chosen:updated");$cityField.bind("change",function(){$pvzField.trigger("chosen:updated");calculateDeliveryCost($deliveryField.val(),$cityField.val(),$deliveryPriceBox,$deliveryPeriod,$productPrice1Box,$productPrice2Box,$productPrice1Val,$productPrice2Val,$countField.val());});calculateDeliveryCost($deliveryField.val(),$cityField.val(),$deliveryPriceBox,$deliveryPeriod,$productPrice1Box,$productPrice2Box,$productPrice1Val,$productPrice2Val,$countField.val());});});})(jQuery);;(function($){var $citySelect=$('.b-sale-point-map__city-select');$citySelect.chosen();function selectCity(cityCode){$('.b-sale-point-map__city-item_active').removeClass('b-sale-point-map__city-item_active');$('#city'+cityCode).addClass('b-sale-point-map__city-item_active');}
$citySelect.bind('change',function(){selectCity($(this).val());});$('.b-sale-point__item').bind('click',function(){$('.b-sale-point__item_active').removeClass('b-sale-point__item_active');$(this).addClass('b-sale-point__item_active');var placemark=salesPointsHash[$(this).data('pk')];placemark.balloon.open();map.panTo([parseFloat($(this).data('longitude')),parseFloat($(this).data('latitude'))],{duration:500});});if(typeof ymaps!='undefined'){ymaps.ready(function(){var cityCode=cities[ymaps.geolocation.city];if(!cityCode)cityCode=cities['Москва'];$citySelect.val(cityCode);$citySelect.trigger("chosen:updated");selectCity(cityCode);});}})(jQuery);;(function($){window.renderCountdown=function(){var $counter=$('.b-counter');$counter.each(function(){var self=$(this),date=new Date(parseInt(self.data('date')));if(!self.data('counter')){self.data('counter',1);self.countdown({until:date,format:'dmHS',layout:'<span class="b-counter__section">\
	                        <span class="b-counter__amount"><b>{dnn}</b></span>\
	                        <span class="b-counter__legend">{dl}</span>\
                        </span>\
                        <span class="b-counter__section">\
                            <span class="b-counter__amount"><b>{hnn}</b></span>\
                            <span class="b-counter__legend">{hl}</span>\
                        </span>\
                        <span class="b-counter__section">\
                            <span class="b-counter__amount"><b>{mnn}</b></span>\
                            <span class="b-counter__legend">{ml}</span>\
                        </span>\
                        <span class="b-counter__section">\
                            <span class="b-counter__amount"><b>{snn}</b></span>\
                            <span class="b-counter__legend">{sl}</span>\
                        </span>'},$.countdown.regional['ru']);}});};window.renderCountdown();})(jQuery);$(document).ready(function(){if(!/Android|iPhone|iPad|BlackBerry/i.test(navigator.userAgent)){$('a.b-tel__link').click(function(){return false;});}});